(self.webpackChunkoshop=self.webpackChunkoshop||[]).push([[179],{2011:(nt,Ee,P)=>{"use strict";P.d(Ee,{hO:()=>Ue,xv:()=>ue,Dh:()=>le,GT:()=>ge,cc:()=>Ce,on:()=>H,pX:()=>re});var d=P(5e3),Q=P(127),F=P(5813);nt=P.hmd(nt);const ae=["ngOnDestroy"],re=(ne,_e,Te,ye={})=>new Proxy(ne,{get:(je,Ie)=>Te.runOutsideAngular(()=>{var Je;if(ne[Ie])return(null===(Je=null==ye?void 0:ye.spy)||void 0===Je?void 0:Je.get)&&ye.spy.get(Ie,ne[Ie]),ne[Ie];if(ae.indexOf(Ie)>-1)return()=>{};const Ze=_e.toPromise().then(pt=>{const J=pt&&pt[Ie];return"function"==typeof J?J.bind(pt):J&&J.then?J.then(me=>Te.run(()=>me)):Te.run(()=>J)});return new Proxy(()=>{},{get:(pt,J)=>Ze[J],apply:(pt,J,me)=>Ze.then(be=>{var De;const ke=be&&be(...me);return(null===(De=null==ye?void 0:ye.spy)||void 0===De?void 0:De.apply)&&ye.spy.apply(Ie,me,ke),ke})})})}),ge=(ne,_e)=>{_e.forEach(Te=>{Object.getOwnPropertyNames(Te.prototype||Te).forEach(ye=>{Object.defineProperty(ne.prototype,ye,Object.getOwnPropertyDescriptor(Te.prototype||Te,ye))})})};class ie{constructor(_e){return _e}}const le=new d.OlP("angularfire2.app.options"),ue=new d.OlP("angularfire2.app.name");function H(ne,_e,Te){const je="object"==typeof Te&&Te||{};je.name=je.name||"string"==typeof Te&&Te||"[DEFAULT]";const Je=Q.Z.apps.filter(Ze=>Ze&&Ze.name===je.name)[0]||_e.runOutsideAngular(()=>Q.Z.initializeApp(ne,je));try{JSON.stringify(ne)!==JSON.stringify(Je.options)&&G("error",`${Je.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ze){}return new ie(Je)}const G=(ne,..._e)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[ne](..._e)},X={provide:ie,useFactory:H,deps:[le,d.R0b,[new d.FiY,ue]]};let Ue=(()=>{class ne{constructor(Te){Q.Z.registerVersion("angularfire",F.q4.full,"core"),Q.Z.registerVersion("angularfire",F.q4.full,"app-compat"),Q.Z.registerVersion("angular",d.q4F.full,Te.toString())}static initializeApp(Te,ye){return{ngModule:ne,providers:[{provide:le,useValue:Te},{provide:ue,useValue:ye}]}}}return ne.\u0275fac=function(Te){return new(Te||ne)(d.LFG(d.Lbi))},ne.\u0275mod=d.oAB({type:ne}),ne.\u0275inj=d.cJS({providers:[X]}),ne})();function Ce(ne,_e,Te,ye,je){const[,Ie,Je]=globalThis.\u0275AngularfireInstanceCache.find(Ze=>Ze[0]===ne)||[];if(Ie)return function Oe(ne,_e){try{return ne.toString()===_e.toString()}catch(Te){return ne===_e}}(je,Je)||(Z("error",`${_e} was already initialized on the ${Te} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),Z("warn",{is:je,was:Je})),Ie;{const Ze=ye();return globalThis.\u0275AngularfireInstanceCache.push([ne,Ze,je]),Ze}}const Ve=!!nt.hot,Z=(ne,..._e)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[ne](..._e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(nt,Ee,P)=>{"use strict";P.d(Ee,{q4:()=>Sf,iC:()=>cl,HU:()=>Jl,vb:()=>Bd,JM:()=>pc});var d=P(5e3),Q=P(5867),F=P(5861),ae=P(9681),re=P(2090),ge=P(4859),ie=P(1877),le=P(2940);const ue="@firebase/installations",H="0.5.5",X=`w:${H}`,Ue="FIS_v2",_e=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Te(C){return C instanceof re.ZR&&C.code.includes("request-failed")}function ye({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function je(C){return{token:C.token,requestStatus:2,expiresIn:be(C.expiresIn),creationTime:Date.now()}}function Ie(C,I){return Je.apply(this,arguments)}function Je(){return(Je=(0,F.Z)(function*(C,I){const B=(yield I.json()).error;return _e.create("request-failed",{requestName:C,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Ze({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function pt(C,{refreshToken:I}){const O=Ze(C);return O.append("Authorization",function De(C){return`${Ue} ${C}`}(I)),O}function J(C){return me.apply(this,arguments)}function me(){return(me=(0,F.Z)(function*(C){const I=yield C();return I.status>=500&&I.status<600?C():I})).apply(this,arguments)}function be(C){return Number(C.replace("s","000"))}function ke(C,I){return he.apply(this,arguments)}function he(){return(he=(0,F.Z)(function*(C,{fid:I}){const O=ye(C),ce={method:"POST",headers:Ze(C),body:JSON.stringify({fid:I,authVersion:Ue,appId:C.appId,sdkVersion:X})},Ne=yield J(()=>fetch(O,ce));if(Ne.ok){const Ye=yield Ne.json();return{fid:Ye.fid||I,registrationStatus:2,refreshToken:Ye.refreshToken,authToken:je(Ye.authToken)}}throw yield Ie("Create Installation",Ne)})).apply(this,arguments)}function It(C){return new Promise(I=>{setTimeout(I,C)})}const Kn=/^[cdef][\w-]{21}$/;function rt(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const O=function Fr(C){return function Ut(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Kn.test(O)?O:""}catch(C){return""}}function ln(C){return`${C.appName}!${C.appId}`}const Sr=new Map;function Qt(C,I){const O=ln(C);Rn(O,I),function Pi(C,I){const O=function Dn(){return!jt&&"BroadcastChannel"in self&&(jt=new BroadcastChannel("[Firebase] FID Change"),jt.onmessage=C=>{Rn(C.data.key,C.data.fid)}),jt}();O&&O.postMessage({key:C,fid:I}),function Do(){0===Sr.size&&jt&&(jt.close(),jt=null)}()}(O,I)}function Rn(C,I){const O=Sr.get(C);if(O)for(const B of O)B(I)}let jt=null;const Ae="firebase-installations-store";let _r=null;function Xe(){return _r||(_r=(0,le.openDb)("firebase-installations-database",1,C=>{0===C.oldVersion&&C.createObjectStore(Ae)})),_r}function wi(C,I){return qt.apply(this,arguments)}function qt(){return(qt=(0,F.Z)(function*(C,I){const O=ln(C),K=(yield Xe()).transaction(Ae,"readwrite"),ce=K.objectStore(Ae),Ne=yield ce.get(O);return yield ce.put(I,O),yield K.complete,(!Ne||Ne.fid!==I.fid)&&Qt(C,I.fid),I})).apply(this,arguments)}function Zn(C){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,F.Z)(function*(C){const I=ln(C),B=(yield Xe()).transaction(Ae,"readwrite");yield B.objectStore(Ae).delete(I),yield B.complete})).apply(this,arguments)}function ht(C,I){return tt.apply(this,arguments)}function tt(){return(tt=(0,F.Z)(function*(C,I){const O=ln(C),K=(yield Xe()).transaction(Ae,"readwrite"),ce=K.objectStore(Ae),Ne=yield ce.get(O),Ye=I(Ne);return void 0===Ye?yield ce.delete(O):yield ce.put(Ye,O),yield K.complete,Ye&&(!Ne||Ne.fid!==Ye.fid)&&Qt(C,Ye.fid),Ye})).apply(this,arguments)}function St(C){return fn.apply(this,arguments)}function fn(){return(fn=(0,F.Z)(function*(C){let I;const O=yield ht(C,B=>{const K=Lr(B),ce=At(C,K);return I=ce.registrationPromise,ce.installationEntry});return""===O.fid?{installationEntry:yield I}:{installationEntry:O,registrationPromise:I}})).apply(this,arguments)}function Lr(C){return En(C||{fid:rt(),registrationStatus:0})}function At(C,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(_e.create("app-offline"))};const O={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},B=function et(C,I){return ut.apply(this,arguments)}(C,O);return{installationEntry:O,registrationPromise:B}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:$u(C)}:{installationEntry:I}}function ut(){return(ut=(0,F.Z)(function*(C,I){try{return wi(C,yield ke(C,I))}catch(O){throw Te(O)&&409===O.customData.serverCode?yield Zn(C):yield wi(C,{fid:I.fid,registrationStatus:0}),O}})).apply(this,arguments)}function $u(C){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,F.Z)(function*(C){let I=yield gt(C);for(;1===I.registrationStatus;)yield It(100),I=yield gt(C);if(0===I.registrationStatus){const{installationEntry:O,registrationPromise:B}=yield St(C);return B||O}return I})).apply(this,arguments)}function gt(C){return ht(C,I=>{if(!I)throw _e.create("installation-not-found");return En(I)})}function En(C){return function Vr(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Ss(C,I){return j.apply(this,arguments)}function j(){return(j=(0,F.Z)(function*({appConfig:C,platformLoggerProvider:I},O){const B=W(C,O),K=pt(C,O),ce=I.getImmediate({optional:!0});ce&&K.append("x-firebase-client",ce.getPlatformInfoString());const Ye={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:X}})},qe=yield J(()=>fetch(B,Ye));if(qe.ok)return je(yield qe.json());throw yield Ie("Generate Auth Token",qe)})).apply(this,arguments)}function W(C,{fid:I}){return`${ye(C)}/${I}/authTokens:generate`}function q(C){return we.apply(this,arguments)}function we(){return(we=(0,F.Z)(function*(C,I=!1){let O;const B=yield ht(C.appConfig,ce=>{if(!On(ce))throw _e.create("not-registered");const Ne=ce.authToken;if(!I&&Br(Ne))return ce;if(1===Ne.requestStatus)return O=te(C,I),ce;{if(!navigator.onLine)throw _e.create("app-offline");const Ye=yr(ce);return O=pn(C,Ye),Ye}});return O?yield O:B.authToken})).apply(this,arguments)}function te(C,I){return He.apply(this,arguments)}function He(){return(He=(0,F.Z)(function*(C,I){let O=yield _t(C.appConfig);for(;1===O.authToken.requestStatus;)yield It(100),O=yield _t(C.appConfig);const B=O.authToken;return 0===B.requestStatus?q(C,I):B})).apply(this,arguments)}function _t(C){return ht(C,I=>{if(!On(I))throw _e.create("not-registered");return function Qs(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function pn(C,I){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,F.Z)(function*(C,I){try{const O=yield Ss(C,I),B=Object.assign(Object.assign({},I),{authToken:O});return yield wi(C.appConfig,B),O}catch(O){if(!Te(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const B=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield wi(C.appConfig,B)}else yield Zn(C.appConfig);throw O}})).apply(this,arguments)}function On(C){return void 0!==C&&2===C.registrationStatus}function Br(C){return 2===C.requestStatus&&!function Ft(C){const I=Date.now();return I<C.creationTime||C.creationTime+C.expiresIn<I+36e5}(C)}function yr(C){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:I})}function Xo(){return(Xo=(0,F.Z)(function*(C){const I=C,{installationEntry:O,registrationPromise:B}=yield St(I.appConfig);return B?B.catch(console.error):q(I).catch(console.error),O.fid})).apply(this,arguments)}function Co(){return(Co=(0,F.Z)(function*(C,I=!1){const O=C;return yield ar(O.appConfig),(yield q(O,I)).token})).apply(this,arguments)}function ar(C){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,F.Z)(function*(C){const{registrationPromise:I}=yield St(C);I&&(yield I)})).apply(this,arguments)}function Va(C){return _e.create("missing-app-config-values",{valueName:C})}const ni="installations",Nt=C=>{const I=C.getProvider("app").getImmediate(),O=function Jn(C){if(!C||!C.options)throw Va("App Configuration");if(!C.name)throw Va("App Name");const I=["projectId","apiKey","appId"];for(const O of I)if(!C.options[O])throw Va(O);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(I);return{app:I,appConfig:O,platformLoggerProvider:(0,ae._getProvider)(I,"platform-logger"),_delete:()=>Promise.resolve()}},zt=C=>{const I=C.getProvider("app").getImmediate(),O=(0,ae._getProvider)(I,ni).getImmediate();return{getId:()=>function Wu(C){return Xo.apply(this,arguments)}(O),getToken:K=>function Ol(C){return Co.apply(this,arguments)}(O,K)}};(function xn(){(0,ae._registerComponent)(new ge.wA(ni,Nt,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("installations-internal",zt,"PRIVATE"))})(),(0,ae.registerVersion)(ue,H),(0,ae.registerVersion)(ue,H,"esm2017");const Ar="@firebase/remote-config",kn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class xl{constructor(I,O,B,K){this.client=I,this.storage=O,this.storageCache=B,this.logger=K}isCachedDataFresh(I,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-O,K=B<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${K}.`),K}fetch(I){var O=this;return(0,F.Z)(function*(){const[B,K]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(K&&O.isCachedDataFresh(I.cacheMaxAgeMillis,B))return K;I.eTag=K&&K.eTag;const ce=yield O.client.fetch(I),Ne=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&Ne.push(O.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(Ne),ce})()}}function yf(C=navigator){return C.languages&&C.languages[0]||C.language}class Ui{constructor(I,O,B,K,ce,Ne){this.firebaseInstallations=I,this.sdkVersion=O,this.namespace=B,this.projectId=K,this.apiKey=ce,this.appId=Ne}fetch(I){var O=this;return(0,F.Z)(function*(){const[B,K]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},qe={sdk_version:O.sdkVersion,app_instance_id:B,app_instance_id_token:K,app_id:O.appId,language_code:yf()},Bt={method:"POST",headers:Ye,body:JSON.stringify(qe)},Xt=fetch(Ne,Bt),oi=new Promise((Ei,lo)=>{I.signal.addEventListener(()=>{const hl=new Error("The operation was aborted.");hl.name="AbortError",lo(hl)})});let ir;try{yield Promise.race([Xt,oi]),ir=yield Xt}catch(Ei){let lo="fetch-client-network";throw"AbortError"===Ei.name&&(lo="fetch-timeout"),kn.create(lo,{originalErrorMessage:Ei.message})}let vn=ir.status;const Bo=ir.headers.get("ETag")||void 0;let fs,va;if(200===ir.status){let Ei;try{Ei=yield ir.json()}catch(lo){throw kn.create("fetch-client-parse",{originalErrorMessage:lo.message})}fs=Ei.entries,va=Ei.state}if("INSTANCE_STATE_UNSPECIFIED"===va?vn=500:"NO_CHANGE"===va?vn=304:("NO_TEMPLATE"===va||"EMPTY_CONFIG"===va)&&(fs={}),304!==vn&&200!==vn)throw kn.create("fetch-status",{httpStatus:vn});return{status:vn,eTag:Bo,config:fs}})()}}class _d{constructor(I,O){this.client=I,this.storage=O}fetch(I){var O=this;return(0,F.Z)(function*(){const B=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(I,B)})()}attemptFetch(I,{throttleEndTimeMillis:O,backoffCount:B}){var K=this;return(0,F.Z)(function*(){yield function Ua(C,I){return new Promise((O,B)=>{const K=Math.max(I-Date.now(),0),ce=setTimeout(O,K);C.addEventListener(()=>{clearTimeout(ce),B(kn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,O);try{const ce=yield K.client.fetch(I);return yield K.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function vf(C){if(!(C instanceof re.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}(ce))throw ce;const Ne={throttleEndTimeMillis:Date.now()+(0,re.$s)(B),backoffCount:B+1};return yield K.storage.setThrottleMetadata(Ne),K.attemptFetch(I,Ne)}})()}}class Pg{constructor(I,O,B,K,ce){this.app=I,this._client=O,this._storageCache=B,this._storage=K,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ja(C,I){const O=C.target.error||void 0;return kn.create(I,{originalErrorMessage:O&&O.message})}const ra="app_namespace_store";class Fg{constructor(I,O,B,K=function bd(){return new Promise((C,I)=>{try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=B=>{I(ja(B,"storage-open"))},O.onsuccess=B=>{C(B.target.result)},O.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(ra,{keyPath:"compositeKey"})}}catch(O){I(kn.create("storage-open",{originalErrorMessage:O}))}})}()){this.appId=I,this.appName=O,this.namespace=B,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var O=this;return(0,F.Z)(function*(){const B=yield O.openDbPromise;return new Promise((K,ce)=>{const Ye=B.transaction([ra],"readonly").objectStore(ra),qe=O.createCompositeKey(I);try{const Bt=Ye.get(qe);Bt.onerror=Xt=>{ce(ja(Xt,"storage-get"))},Bt.onsuccess=Xt=>{const oi=Xt.target.result;K(oi?oi.value:void 0)}}catch(Bt){ce(kn.create("storage-get",{originalErrorMessage:Bt&&Bt.message}))}})})()}set(I,O){var B=this;return(0,F.Z)(function*(){const K=yield B.openDbPromise;return new Promise((ce,Ne)=>{const qe=K.transaction([ra],"readwrite").objectStore(ra),Bt=B.createCompositeKey(I);try{const Xt=qe.put({compositeKey:Bt,value:O});Xt.onerror=oi=>{Ne(ja(oi,"storage-set"))},Xt.onsuccess=()=>{ce()}}catch(Xt){Ne(kn.create("storage-set",{originalErrorMessage:Xt&&Xt.message}))}})})()}delete(I){var O=this;return(0,F.Z)(function*(){const B=yield O.openDbPromise;return new Promise((K,ce)=>{const Ye=B.transaction([ra],"readwrite").objectStore(ra),qe=O.createCompositeKey(I);try{const Bt=Ye.delete(qe);Bt.onerror=Xt=>{ce(ja(Xt,"storage-delete"))},Bt.onsuccess=()=>{K()}}catch(Bt){ce(kn.create("storage-delete",{originalErrorMessage:Bt&&Bt.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class wd{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,F.Z)(function*(){const O=I.storage.getLastFetchStatus(),B=I.storage.getLastSuccessfulFetchTimestampMillis(),K=I.storage.getActiveConfig(),ce=yield O;ce&&(I.lastFetchStatus=ce);const Ne=yield B;Ne&&(I.lastSuccessfulFetchTimestampMillis=Ne);const Ye=yield K;Ye&&(I.activeConfig=Ye)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function Dd(){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,F.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Lg(){(0,ae._registerComponent)(new ge.wA("remote-config",function C(I,{instanceIdentifier:O}){const B=I.getProvider("app").getImmediate(),K=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw kn.create("registration-window");if(!(0,re.hl)())throw kn.create("indexed-db-unavailable");const{projectId:ce,apiKey:Ne,appId:Ye}=B.options;if(!ce)throw kn.create("registration-project-id");if(!Ne)throw kn.create("registration-api-key");if(!Ye)throw kn.create("registration-app-id");const qe=new Fg(Ye,B.name,O=O||"firebase"),Bt=new wd(qe),Xt=new ie.Yd(Ar);Xt.logLevel=ie.in.ERROR;const oi=new Ui(K,ae.SDK_VERSION,O,ce,Ne,Ye),ir=new _d(oi,qe),vn=new xl(ir,qe,Bt,Xt),Bo=new Pg(B,vn,Bt,qe,Xt);return function un(C){const I=(0,re.m9)(C);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(Bo),Bo},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Ar,"0.3.4"),(0,ae.registerVersion)(Ar,"0.3.4","esm2017")}();const Ed="/firebase-messaging-sw.js",Ao="/firebase-cloud-messaging-push-scope",kl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",No="google.c.a.c_id",$a="google.c.a.c_l",Xs="google.c.a.ts",vr="google.c.a.e";var Nr=(()=>{return(C=Nr||(Nr={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Nr;var C})();function ji(C){const I=new Uint8Array(C);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Yu(C){const O=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(O),K=new Uint8Array(B.length);for(let ce=0;ce<B.length;++ce)K[ce]=B.charCodeAt(ce);return K}const jr="fcm_token_details_db",Td="fcm_token_object_Store";function Pl(C){return Id.apply(this,arguments)}function Id(){return Id=(0,F.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(jr))return null;let I=null;return(yield(0,le.openDb)(jr,5,function(){var B=(0,F.Z)(function*(K){var ce;if(K.oldVersion<2||!K.objectStoreNames.contains(Td))return;const Ne=K.transaction.objectStore(Td),Ye=yield Ne.index("fcmSenderId").get(C);if(yield Ne.clear(),Ye)if(2===K.oldVersion){const qe=Ye;if(!qe.auth||!qe.p256dh||!qe.endpoint)return;I={token:qe.fcmToken,createTime:null!==(ce=qe.createTime)&&void 0!==ce?ce:Date.now(),subscriptionOptions:{auth:qe.auth,p256dh:qe.p256dh,endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:"string"==typeof qe.vapidKey?qe.vapidKey:ji(qe.vapidKey)}}}else if(3===K.oldVersion){const qe=Ye;I={token:qe.fcmToken,createTime:qe.createTime,subscriptionOptions:{auth:ji(qe.auth),p256dh:ji(qe.p256dh),endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:ji(qe.vapidKey)}}}else if(4===K.oldVersion){const qe=Ye;I={token:qe.fcmToken,createTime:qe.createTime,subscriptionOptions:{auth:ji(qe.auth),p256dh:ji(qe.p256dh),endpoint:qe.endpoint,swScope:qe.swScope,vapidKey:ji(qe.vapidKey)}}}});return function(K){return B.apply(this,arguments)}}())).close(),yield(0,le.deleteDb)(jr),yield(0,le.deleteDb)("fcm_vapid_details_db"),yield(0,le.deleteDb)("undefined"),Qu(I)?I:null}),Id.apply(this,arguments)}function Qu(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:I}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const eo="firebase-messaging-store";let Ad=null;function cn(){return Ad||(Ad=(0,le.openDb)("firebase-messaging-database",1,C=>{0===C.oldVersion&&C.createObjectStore(eo)})),Ad}function wf(C){return ia.apply(this,arguments)}function ia(){return(ia=(0,F.Z)(function*(C){const I=as(C),B=yield(yield cn()).transaction(eo).objectStore(eo).get(I);if(B)return B;{const K=yield Pl(C.appConfig.senderId);if(K)return yield er(C,K),K}})).apply(this,arguments)}function er(C,I){return Un.apply(this,arguments)}function Un(){return(Un=(0,F.Z)(function*(C,I){const O=as(C),K=(yield cn()).transaction(eo,"readwrite");return yield K.objectStore(eo).put(I,O),yield K.complete,I})).apply(this,arguments)}function Ns(C){return sa.apply(this,arguments)}function sa(){return(sa=(0,F.Z)(function*(C){const I=as(C),B=(yield cn()).transaction(eo,"readwrite");yield B.objectStore(eo).delete(I),yield B.complete})).apply(this,arguments)}function as({appConfig:C}){return C.appId}const tr=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ls(C,I){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,F.Z)(function*(C,I){const O=yield qa(C),B=aa(I),K={method:"POST",headers:O,body:JSON.stringify(B)};let ce;try{ce=yield(yield fetch(cr(C.appConfig),K)).json()}catch(Ne){throw tr.create("token-subscribe-failed",{errorInfo:Ne})}if(ce.error)throw tr.create("token-subscribe-failed",{errorInfo:ce.error.message});if(!ce.token)throw tr.create("token-subscribe-no-token");return ce.token})).apply(this,arguments)}function Hr(C,I){return to.apply(this,arguments)}function to(){return(to=(0,F.Z)(function*(C,I){const O=yield qa(C),B=aa(I.subscriptionOptions),K={method:"PATCH",headers:O,body:JSON.stringify(B)};let ce;try{ce=yield(yield fetch(`${cr(C.appConfig)}/${I.token}`,K)).json()}catch(Ne){throw tr.create("token-update-failed",{errorInfo:Ne})}if(ce.error)throw tr.create("token-update-failed",{errorInfo:ce.error.message});if(!ce.token)throw tr.create("token-update-no-token");return ce.token})).apply(this,arguments)}function oa(C,I){return mt.apply(this,arguments)}function mt(){return(mt=(0,F.Z)(function*(C,I){const B={method:"DELETE",headers:yield qa(C)};try{const ce=yield(yield fetch(`${cr(C.appConfig)}/${I}`,B)).json();if(ce.error)throw tr.create("token-unsubscribe-failed",{errorInfo:ce.error.message})}catch(K){throw tr.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function cr({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function qa(C){return za.apply(this,arguments)}function za(){return(za=(0,F.Z)(function*({appConfig:C,installations:I}){const O=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function aa({p256dh:C,auth:I,endpoint:O,vapidKey:B}){const K={web:{endpoint:O,auth:I,p256dh:C}};return B!==kl&&(K.web.applicationPubKey=B),K}const la=6048e5;function Xu(C){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,F.Z)(function*(C){const I=yield ri(C.swRegistration,C.vapidKey),O={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:I.endpoint,auth:ji(I.getKey("auth")),p256dh:ji(I.getKey("p256dh"))},B=yield wf(C.firebaseDependencies);if(B){if(Vl(B.subscriptionOptions,O))return Date.now()>=B.createTime+la?Ll(C,{token:B.token,createTime:Date.now(),subscriptionOptions:O}):B.token;try{yield oa(C.firebaseDependencies,B.token)}catch(K){console.warn(K)}return Mo(C.firebaseDependencies,O)}return Mo(C.firebaseDependencies,O)})).apply(this,arguments)}function Se(C){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,F.Z)(function*(C){const I=yield wf(C.firebaseDependencies);I&&(yield oa(C.firebaseDependencies,I.token),yield Ns(C.firebaseDependencies));const O=yield C.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()})).apply(this,arguments)}function Ll(C,I){return dn.apply(this,arguments)}function dn(){return(dn=(0,F.Z)(function*(C,I){try{const O=yield Hr(C.firebaseDependencies,I),B=Object.assign(Object.assign({},I),{token:O,createTime:Date.now()});return yield er(C.firebaseDependencies,B),O}catch(O){throw yield Se(C),O}})).apply(this,arguments)}function Mo(C,I){return no.apply(this,arguments)}function no(){return(no=(0,F.Z)(function*(C,I){const B={token:yield ls(C,I),createTime:Date.now(),subscriptionOptions:I};return yield er(C,B),B.token})).apply(this,arguments)}function ri(C,I){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,F.Z)(function*(C,I){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Yu(I)})})).apply(this,arguments)}function Vl(C,I){return I.vapidKey===C.vapidKey&&I.endpoint===C.endpoint&&I.auth===C.auth&&I.p256dh===C.p256dh}function Bl(C){const I={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Ul(C,I){if(!I.notification)return;C.notification={};const O=I.notification.title;O&&(C.notification.title=O);const B=I.notification.body;B&&(C.notification.body=B);const K=I.notification.image;K&&(C.notification.image=K)}(I,C),function ua(C,I){!I.data||(C.data=I.data)}(I,C),function Ka(C,I){if(!I.fcmOptions)return;C.fcmOptions={};const O=I.fcmOptions.link;O&&(C.fcmOptions.link=O);const B=I.fcmOptions.analytics_label;B&&(C.fcmOptions.analyticsLabel=B)}(I,C),I}function nr(C){return"object"==typeof C&&!!C&&No in C}function Gi(C,I){const O=[];for(let B=0;B<C.length;B++)O.push(C.charAt(B)),B<I.length&&O.push(I.charAt(B));return O.join("")}function Rs(C){return tr.create("missing-app-config-values",{valueName:C})}Gi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Gi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Hi{constructor(I,O,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function jl(C){if(!C||!C.options)throw Rs("App Configuration Object");if(!C.name)throw Rs("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:O}=C;for(const B of I)if(!O[B])throw Rs(B);return{appName:C.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:K,installations:O,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Nd(C){return ca.apply(this,arguments)}function ca(){return(ca=(0,F.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Ed,{scope:Ao}),C.swRegistration.update().catch(()=>{})}catch(I){throw tr.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function Gl(C,I){return Za.apply(this,arguments)}function Za(){return(Za=(0,F.Z)(function*(C,I){if(!I&&!C.swRegistration&&(yield Nd(C)),I||!C.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw tr.create("invalid-sw-registration");C.swRegistration=I}})).apply(this,arguments)}function da(C,I){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,F.Z)(function*(C,I){I?C.vapidKey=I:C.vapidKey||(C.vapidKey=kl)})).apply(this,arguments)}function Ja(){return(Ja=(0,F.Z)(function*(C,I){if(!navigator)throw tr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw tr.create("permission-blocked");return yield da(C,null==I?void 0:I.vapidKey),yield Gl(C,null==I?void 0:I.serviceWorkerRegistration),Xu(C)})).apply(this,arguments)}function ec(C,I,O){return tc.apply(this,arguments)}function tc(){return(tc=(0,F.Z)(function*(C,I,O){const B=ha(I);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:O[No],message_name:O[$a],message_time:O[Xs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ha(C){switch(C){case Nr.NOTIFICATION_CLICKED:return"notification_open";case Nr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Xa(){return(Xa=(0,F.Z)(function*(C,I){const O=I.data;if(!O.isFirebaseMessaging)return;C.onMessageHandler&&O.messageType===Nr.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Bl(O)):C.onMessageHandler.next(Bl(O)));const B=O.data;nr(B)&&"1"===B[vr]&&(yield ec(C,O.messageType,B))})).apply(this,arguments)}const nc="@firebase/messaging",Hl=C=>{const I=new Hi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function Md(C,I){return Xa.apply(this,arguments)}(I,O)),I},Rd=C=>{const I=C.getProvider("messaging").getImmediate();return{getToken:B=>function Qa(C,I){return Ja.apply(this,arguments)}(I,B)}};function dr(){return jn.apply(this,arguments)}function jn(){return(jn=(0,F.Z)(function*(){return"undefined"!=typeof window&&(0,re.hl)()&&(yield(0,re.eu)())&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vg(){(0,ae._registerComponent)(new ge.wA("messaging",Hl,"PUBLIC")),(0,ae._registerComponent)(new ge.wA("messaging-internal",Rd,"PRIVATE")),(0,ae.registerVersion)(nc,"0.9.7"),(0,ae.registerVersion)(nc,"0.9.7","esm2017")}();const ro="analytics",$l="firebase_id",xd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Os="https://www.googletagmanager.com/gtag/js",Tn=new ie.Yd("@firebase/analytics");function If(C){return Promise.all(C.map(I=>I.catch(O=>O)))}function Bg(C,I){const O=document.createElement("script");O.src=`${Os}?l=${C}&id=${I}`,O.async=!0,document.head.appendChild(O)}function ql(C,I,O,B,K,ce){return kd.apply(this,arguments)}function kd(){return(kd=(0,F.Z)(function*(C,I,O,B,K,ce){const Ne=B[K];try{if(Ne)yield I[Ne];else{const qe=(yield If(O)).find(Bt=>Bt.measurementId===K);qe&&(yield I[qe.appId])}}catch(Ye){Tn.error(Ye)}C("config",K,ce)})).apply(this,arguments)}function rl(C,I,O,B,K){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,F.Z)(function*(C,I,O,B,K){try{let ce=[];if(K&&K.send_to){let Ne=K.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Ye=yield If(O);for(const qe of Ne){const Bt=Ye.find(oi=>oi.measurementId===qe),Xt=Bt&&I[Bt.appId];if(!Xt){ce=[];break}ce.push(Xt)}}0===ce.length&&(ce=Object.values(I)),yield Promise.all(ce),C("event",B,K||{})}catch(ce){Tn.error(ce)}})).apply(this,arguments)}function br(){const C=window.document.getElementsByTagName("script");for(const I of Object.values(C))if(I.src&&I.src.includes(Os))return I;return null}const Lt=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),oc=new class at{constructor(I={},O=1e3){this.throttleMetadata=I,this.intervalMillis=O}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,O){this.throttleMetadata[I]=O}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function it(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function ac(C){return $r.apply(this,arguments)}function $r(){return($r=(0,F.Z)(function*(C){var I;const{appId:O,apiKey:B}=C,K={method:"GET",headers:it(B)},ce=xd.replace("{app-id}",O),Ne=yield fetch(ce,K);if(200!==Ne.status&&304!==Ne.status){let Ye="";try{const qe=yield Ne.json();(null===(I=qe.error)||void 0===I?void 0:I.message)&&(Ye=qe.error.message)}catch(qe){}throw Lt.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Ye})}return Ne.json()})).apply(this,arguments)}function rr(C){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,F.Z)(function*(C,I=oc,O){const{appId:B,apiKey:K,measurementId:ce}=C.options;if(!B)throw Lt.create("no-app-id");if(!K){if(ce)return{measurementId:ce,appId:B};throw Lt.create("no-api-key")}const Ne=I.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Oo;return setTimeout((0,F.Z)(function*(){Ye.abort()}),void 0!==O?O:6e4),Sn({appId:B,apiKey:K,measurementId:ce},Ne,Ye,I)})).apply(this,arguments)}function Sn(C,I,O){return lc.apply(this,arguments)}function lc(){return(lc=(0,F.Z)(function*(C,{throttleEndTimeMillis:I,backoffCount:O},B,K=oc){const{appId:ce,measurementId:Ne}=C;try{yield Ro(B,I)}catch(Ye){if(Ne)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:ce,measurementId:Ne};throw Ye}try{const Ye=yield ac(C);return K.deleteThrottleMetadata(ce),Ye}catch(Ye){if(!us(Ye)){if(K.deleteThrottleMetadata(ce),Ne)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:ce,measurementId:Ne};throw Ye}const qe=503===Number(Ye.customData.httpStatus)?(0,re.$s)(O,K.intervalMillis,30):(0,re.$s)(O,K.intervalMillis),Bt={throttleEndTimeMillis:Date.now()+qe,backoffCount:O+1};return K.setThrottleMetadata(ce,Bt),Tn.debug(`Calling attemptFetch again in ${qe} millis`),Sn(C,Bt,B,K)}})).apply(this,arguments)}function Ro(C,I){return new Promise((O,B)=>{const K=Math.max(I-Date.now(),0),ce=setTimeout(O,K);C.addEventListener(()=>{clearTimeout(ce),B(Lt.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function us(C){if(!(C instanceof re.ZR&&C.customData))return!1;const I=Number(C.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Oo{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function il(){return $i.apply(this,arguments)}function $i(){return($i=(0,F.Z)(function*(){if(!(0,re.hl)())return Tn.warn(Lt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(C){return Tn.warn(Lt.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function pa(){return(pa=(0,F.Z)(function*(C,I,O,B,K,ce,Ne){var Ye;const qe=rr(C);qe.then(vn=>{O[vn.measurementId]=vn.appId,C.options.measurementId&&vn.measurementId!==C.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vn=>Tn.error(vn)),I.push(qe);const Bt=il().then(vn=>{if(vn)return B.getId()}),[Xt,oi]=yield Promise.all([qe,Bt]);br()||Bg(ce,Xt.measurementId),K("js",new Date);const ir=null!==(Ye=null==Ne?void 0:Ne.config)&&void 0!==Ye?Ye:{};return ir.origin="firebase",ir.update=!0,null!=oi&&(ir[$l]=oi),K("config",Xt.measurementId,ir),Xt.measurementId})).apply(this,arguments)}class en{constructor(I){this.app=I}_delete(){return delete xs[this.app.options.appId],Promise.resolve()}}let xs={},zl=[];const Wi={};let k,hn,fe="dataLayer",Kl=!1;function ko(C,I,O){!function so(){const C=[];if((0,re.ru)()&&C.push("This is a browser extension environment."),(0,re.zI)()||C.push("Cookies are not available."),C.length>0){const I=C.map((B,K)=>`(${K+1}) ${B}`).join(" "),O=Lt.create("invalid-analytics-context",{errorInfo:I});Tn.warn(O.message)}}();const B=C.options.appId;if(!B)throw Lt.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Lt.create("no-api-key");Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=xs[B])throw Lt.create("already-exists",{id:B});if(!Kl){!function nl(C){let I=[];Array.isArray(window[C])?I=window[C]:window[C]=I}(fe);const{wrappedGtag:ce,gtagCore:Ne}=function sc(C,I,O,B,K){let ce=function(...Ne){window[B].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ce=window[K]),window[K]=function Ug(C,I,O,B){function ce(){return(ce=(0,F.Z)(function*(Ne,Ye,qe){try{"event"===Ne?yield rl(C,I,O,Ye,qe):"config"===Ne?yield ql(C,I,O,B,Ye,qe):C("set",Ye)}catch(Bt){Tn.error(Bt)}})).apply(this,arguments)}return function K(Ne,Ye,qe){return ce.apply(this,arguments)}}(ce,C,I,O),{gtagCore:ce,wrappedGtag:window[K]}}(xs,zl,Wi,fe,"gtag");hn=ce,k=Ne,Kl=!0}return xs[B]=function xo(C,I,O,B,K,ce,Ne){return pa.apply(this,arguments)}(C,zl,Wi,I,k,fe,O),new en(C)}function sl(){return(sl=(0,F.Z)(function*(C,I,O,B,K){if(K&&K.global)C("event",O,B);else{const ce=yield I;C("event",O,Object.assign(Object.assign({},B),{send_to:ce}))}})).apply(this,arguments)}function Nn(){return ma.apply(this,arguments)}function ma(){return(ma=(0,F.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(C){return!1}})).apply(this,arguments)}const Fo="@firebase/analytics";!function tn(){(0,ae._registerComponent)(new ge.wA(ro,(I,{options:O})=>ko(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,ae._registerComponent)(new ge.wA("analytics-internal",function C(I){try{const O=I.getProvider(ro).getImmediate();return{logEvent:(B,K,ce)=>function ol(C,I,O,B){C=(0,re.m9)(C),function Pn(C,I,O,B,K){return sl.apply(this,arguments)}(hn,xs[C.app.options.appId],I,O,B).catch(K=>Tn.error(K))}(O,B,K,ce)}}catch(O){throw Lt.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,ae.registerVersion)(Fo,"0.7.5"),(0,ae.registerVersion)(Fo,"0.7.5","esm2017")}();var oo=P(4408),Zl=P(7565);const si=new class dc extends Zl.v{}(class hs extends oo.o{constructor(I,O){super(I,O),this.scheduler=I,this.work=O}schedule(I,O=0){return O>0?super.schedule(I,O):(this.delay=O,this.state=I,this.scheduler.flush(this),this)}execute(I,O){return O>0||this.closed?super.execute(I,O):this._execute(I,O)}requestAsyncId(I,O,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(I,O,B):I.flush(this)}});var hc=P(4986),al=P(8505),_a=P(9468),Vd=P(5363);const Sf=new d.GfV("7.2.0"),Yl="__angularfire_symbol__analyticsIsSupported",Fs="__angularfire_symbol__remoteConfigIsSupported",Ls="__angularfire_symbol__messagingIsSupported";function pc(C,I,O){if(I){if(1===I.length)return I[0];const ce=I.filter(Ne=>Ne.app===O);if(1===ce.length)return ce[0]}return O.container.getProvider(C).getImmediate({optional:!0})}globalThis[Yl]||(globalThis[Yl]=Nn().then(C=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=C)),globalThis[Ls]||(globalThis[Ls]=dr().then(C=>globalThis.__angularfire_symbol__messagingIsSupportedValue=C)),globalThis[Fs]||(globalThis[Fs]=Dd().then(C=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=C));const Bd=(C,I)=>{const O=I?[I]:(0,Q.C6)(),B=[];return O.forEach(K=>{K.container.getProvider(C).instances.forEach(Ne=>{B.includes(Ne)||B.push(Ne)})}),B};function Lo(){}class gc{constructor(I,O=si){this.zone=I,this.delegate=O}now(){return this.delegate.now()}schedule(I,O,B){const K=this.zone;return this.delegate.schedule(function(Ne){K.runGuarded(()=>{I.apply(this,[Ne])})},O,B)}}class ul{constructor(I){this.zone=I,this.task=null}call(I,O){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lo,{},Lo,Lo)),O.pipe((0,al.b)({next:B,complete:B,error:B})).subscribe(I).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Jl=(()=>{class C{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new gc(Zone.current)),this.insideAngular=O.run(()=>new gc(Zone.current,hc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(O){return new(O||C)(d.LFG(d.R0b))},C.\u0275prov=d.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Di(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function cl(C){return Di(),function Xl(C){return function(O){return(O=O.lift(new ul(C.ngZone))).pipe((0,_a.R)(C.outsideAngular),(0,Vd.Q)(C.insideAngular))}}(Di())(C)}},2090:(nt,Ee,P)=>{"use strict";P.d(Ee,{BH:()=>Ue,LL:()=>he,ZR:()=>ke,gQ:()=>Ae,zI:()=>me,hu:()=>Q,g5:()=>F,US:()=>ge,tV:()=>ue,h$:()=>ie,$s:()=>gt,r3:()=>ki,Sg:()=>Ce,ne:()=>_r,p$:()=>H,vZ:()=>jt,ZB:()=>G,gK:()=>ht,pd:()=>Is,m9:()=>Ss,z$:()=>Oe,GJ:()=>Qt,jU:()=>ne,ru:()=>_e,d:()=>ye,xb:()=>Rn,w1:()=>je,hl:()=>pt,uI:()=>Ve,UG:()=>Z,Yr:()=>Je,b$:()=>Te,G6:()=>Ze,Mn:()=>Ie,w9:()=>Sr,cI:()=>Kn,UI:()=>Pi,xO:()=>Do,zd:()=>ti,DV:()=>ns,ug:()=>At,dS:()=>Lr,Pz:()=>ot,Dv:()=>Ys,Wj:()=>St,lb:()=>fn,eu:()=>J});const Q=function(j,W){if(!j)throw F(W)},F=function(j){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+j)},ae=function(j){const W=[];let q=0;for(let we=0;we<j.length;we++){let te=j.charCodeAt(we);te<128?W[q++]=te:te<2048?(W[q++]=te>>6|192,W[q++]=63&te|128):55296==(64512&te)&&we+1<j.length&&56320==(64512&j.charCodeAt(we+1))?(te=65536+((1023&te)<<10)+(1023&j.charCodeAt(++we)),W[q++]=te>>18|240,W[q++]=te>>12&63|128,W[q++]=te>>6&63|128,W[q++]=63&te|128):(W[q++]=te>>12|224,W[q++]=te>>6&63|128,W[q++]=63&te|128)}return W},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,W){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let te=0;te<j.length;te+=3){const He=j[te],_t=te+1<j.length,pn=_t?j[te+1]:0,Yn=te+2<j.length,On=Yn?j[te+2]:0;let yr=(15&pn)<<2|On>>6,Qs=63&On;Yn||(Qs=64,_t||(yr=64)),we.push(q[He>>2],q[(3&He)<<4|pn>>4],q[yr],q[Qs])}return we.join("")},encodeString(j,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(j):this.encodeByteArray(ae(j),W)},decodeString(j,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(j):function(j){const W=[];let q=0,we=0;for(;q<j.length;){const te=j[q++];if(te<128)W[we++]=String.fromCharCode(te);else if(te>191&&te<224){const He=j[q++];W[we++]=String.fromCharCode((31&te)<<6|63&He)}else if(te>239&&te<365){const Yn=((7&te)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;W[we++]=String.fromCharCode(55296+(Yn>>10)),W[we++]=String.fromCharCode(56320+(1023&Yn))}else{const He=j[q++],_t=j[q++];W[we++]=String.fromCharCode((15&te)<<12|(63&He)<<6|63&_t)}}return W.join("")}(this.decodeStringToByteArray(j,W))},decodeStringToByteArray(j,W){this.init_();const q=W?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let te=0;te<j.length;){const He=q[j.charAt(te++)],pn=te<j.length?q[j.charAt(te)]:0;++te;const On=te<j.length?q[j.charAt(te)]:64;++te;const Ft=te<j.length?q[j.charAt(te)]:64;if(++te,null==He||null==pn||null==On||null==Ft)throw Error();we.push(He<<2|pn>>4),64!==On&&(we.push(pn<<4&240|On>>2),64!==Ft&&we.push(On<<6&192|Ft))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ie=function(j){const W=ae(j);return ge.encodeByteArray(W,!0)},le=function(j){return ie(j).replace(/\./g,"")},ue=function(j){try{return ge.decodeString(j,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function H(j){return G(void 0,j)}function G(j,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return W}for(const q in W)!W.hasOwnProperty(q)||!X(q)||(j[q]=G(j[q],W[q]));return j}function X(j){return"__proto__"!==j}class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,q)=>{this.resolve=W,this.reject=q})}wrapCallback(W){return(q,we)=>{q?this.reject(q):this.resolve(we),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(q):W(q,we))}}}function Ce(j,W){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=W||"demo-project",te=j.iat||0,He=j.sub||j.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:te,exp:te+3600,auth_time:te,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},j);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(_t)),""].join(".")}function Oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function Z(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function ne(){return"object"==typeof self&&self.self===self}function _e(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return Oe().indexOf("Electron/")>=0}function je(){const j=Oe();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ie(){return Oe().indexOf("MSAppHost/")>=0}function Je(){return!1}function Ze(){return!Z()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pt(){return"object"==typeof indexedDB}function J(){return new Promise((j,W)=>{try{let q=!0;const we="validate-browser-context-for-indexeddb-analytics-module",te=self.indexedDB.open(we);te.onsuccess=()=>{te.result.close(),q||self.indexedDB.deleteDatabase(we),j(!0)},te.onupgradeneeded=()=>{q=!1},te.onerror=()=>{var He;W((null===(He=te.error)||void 0===He?void 0:He.message)||"")}}catch(q){W(q)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ke extends Error{constructor(W,q,we){super(q),this.code=W,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor(W,q,we){this.service=W,this.serviceName=q,this.errors=we}create(W,...q){const we=q[0]||{},te=`${this.service}/${W}`,He=this.errors[W],_t=He?function It(j,W){return j.replace(Ut,(q,we)=>{const te=W[we];return null!=te?String(te):`<${we}?>`})}(He,we):"Error";return new ke(te,`${this.serviceName}: ${_t} (${te}).`,we)}}const Ut=/\{\$([^}]+)}/g;function Kn(j){return JSON.parse(j)}function ot(j){return JSON.stringify(j)}const rt=function(j){let W={},q={},we={},te="";try{const He=j.split(".");W=Kn(ue(He[0])||""),q=Kn(ue(He[1])||""),te=He[2],we=q.d||{},delete q.d}catch(He){}return{header:W,claims:q,data:we,signature:te}},Sr=function(j){const q=rt(j).claims;return!!q&&"object"==typeof q&&q.hasOwnProperty("iat")},Qt=function(j){const W=rt(j).claims;return"object"==typeof W&&!0===W.admin};function ki(j,W){return Object.prototype.hasOwnProperty.call(j,W)}function ns(j,W){if(Object.prototype.hasOwnProperty.call(j,W))return j[W]}function Rn(j){for(const W in j)if(Object.prototype.hasOwnProperty.call(j,W))return!1;return!0}function Pi(j,W,q){const we={};for(const te in j)Object.prototype.hasOwnProperty.call(j,te)&&(we[te]=W.call(q,j[te],te,j));return we}function jt(j,W){if(j===W)return!0;const q=Object.keys(j),we=Object.keys(W);for(const te of q){if(!we.includes(te))return!1;const He=j[te],_t=W[te];if(Dn(He)&&Dn(_t)){if(!jt(He,_t))return!1}else if(He!==_t)return!1}for(const te of we)if(!q.includes(te))return!1;return!0}function Dn(j){return null!==j&&"object"==typeof j}function Do(j){const W=[];for(const[q,we]of Object.entries(j))Array.isArray(we)?we.forEach(te=>{W.push(encodeURIComponent(q)+"="+encodeURIComponent(te))}):W.push(encodeURIComponent(q)+"="+encodeURIComponent(we));return W.length?"&"+W.join("&"):""}function ti(j){const W={};return j.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[te,He]=we.split("=");W[decodeURIComponent(te)]=decodeURIComponent(He)}}),W}function Is(j){const W=j.indexOf("?");if(!W)return"";const q=j.indexOf("#",W);return j.substring(W,q>0?q:void 0)}class Ae{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,q){q||(q=0);const we=this.W_;if("string"==typeof W)for(let Ft=0;Ft<16;Ft++)we[Ft]=W.charCodeAt(q)<<24|W.charCodeAt(q+1)<<16|W.charCodeAt(q+2)<<8|W.charCodeAt(q+3),q+=4;else for(let Ft=0;Ft<16;Ft++)we[Ft]=W[q]<<24|W[q+1]<<16|W[q+2]<<8|W[q+3],q+=4;for(let Ft=16;Ft<80;Ft++){const yr=we[Ft-3]^we[Ft-8]^we[Ft-14]^we[Ft-16];we[Ft]=4294967295&(yr<<1|yr>>>31)}let On,Br,te=this.chain_[0],He=this.chain_[1],_t=this.chain_[2],pn=this.chain_[3],Yn=this.chain_[4];for(let Ft=0;Ft<80;Ft++){Ft<40?Ft<20?(On=pn^He&(_t^pn),Br=1518500249):(On=He^_t^pn,Br=1859775393):Ft<60?(On=He&_t|pn&(He|_t),Br=2400959708):(On=He^_t^pn,Br=3395469782);const yr=(te<<5|te>>>27)+On+Yn+Br+we[Ft]&4294967295;Yn=pn,pn=_t,_t=4294967295&(He<<30|He>>>2),He=te,te=yr}this.chain_[0]=this.chain_[0]+te&4294967295,this.chain_[1]=this.chain_[1]+He&4294967295,this.chain_[2]=this.chain_[2]+_t&4294967295,this.chain_[3]=this.chain_[3]+pn&4294967295,this.chain_[4]=this.chain_[4]+Yn&4294967295}update(W,q){if(null==W)return;void 0===q&&(q=W.length);const we=q-this.blockSize;let te=0;const He=this.buf_;let _t=this.inbuf_;for(;te<q;){if(0===_t)for(;te<=we;)this.compress_(W,te),te+=this.blockSize;if("string"==typeof W){for(;te<q;)if(He[_t]=W.charCodeAt(te),++_t,++te,_t===this.blockSize){this.compress_(He),_t=0;break}}else for(;te<q;)if(He[_t]=W[te],++_t,++te,_t===this.blockSize){this.compress_(He),_t=0;break}}this.inbuf_=_t,this.total_+=q}digest(){const W=[];let q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let te=this.blockSize-1;te>=56;te--)this.buf_[te]=255&q,q/=256;this.compress_(this.buf_);let we=0;for(let te=0;te<5;te++)for(let He=24;He>=0;He-=8)W[we]=this.chain_[te]>>He&255,++we;return W}}function _r(j,W){const q=new Xe(j,W);return q.subscribe.bind(q)}class Xe{constructor(W,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{W(this)}).catch(we=>{this.error(we)})}next(W){this.forEachObserver(q=>{q.next(W)})}error(W){this.forEachObserver(q=>{q.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,q,we){let te;if(void 0===W&&void 0===q&&void 0===we)throw new Error("Missing Observer.");te=function qt(j,W){if("object"!=typeof j||null===j)return!1;for(const q of W)if(q in j&&"function"==typeof j[q])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:q,complete:we},void 0===te.next&&(te.next=Zn),void 0===te.error&&(te.error=Zn),void 0===te.complete&&(te.complete=Zn);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?te.error(this.finalError):te.complete()}catch(_t){}}),this.observers.push(te),He}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,W)}sendOne(W,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{q(this.observers[W])}catch(we){"undefined"!=typeof console&&console.error&&console.error(we)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zn(){}const Ys=function(j,W,q,we){let te;if(we<W?te="at least "+W:we>q&&(te=0===q?"none":"no more than "+q),te)throw new Error(j+" failed: Was called with "+we+(1===we?" argument.":" arguments.")+" Expects "+te+".")};function ht(j,W){return`${j} failed: ${W} argument `}function St(j,W,q,we){if((!we||q)&&"function"!=typeof q)throw new Error(ht(j,W)+"must be a valid function.")}function fn(j,W,q,we){if((!we||q)&&("object"!=typeof q||null===q))throw new Error(ht(j,W)+"must be a valid context object.")}const Lr=function(j){const W=[];let q=0;for(let we=0;we<j.length;we++){let te=j.charCodeAt(we);if(te>=55296&&te<=56319){const He=te-55296;we++,Q(we<j.length,"Surrogate pair missing trail surrogate."),te=65536+(He<<10)+(j.charCodeAt(we)-56320)}te<128?W[q++]=te:te<2048?(W[q++]=te>>6|192,W[q++]=63&te|128):te<65536?(W[q++]=te>>12|224,W[q++]=te>>6&63|128,W[q++]=63&te|128):(W[q++]=te>>18|240,W[q++]=te>>12&63|128,W[q++]=te>>6&63|128,W[q++]=63&te|128)}return W},At=function(j){let W=0;for(let q=0;q<j.length;q++){const we=j.charCodeAt(q);we<128?W++:we<2048?W+=2:we>=55296&&we<=56319?(W+=4,q++):W+=3}return W};function gt(j,W=1e3,q=2){const we=W*Math.pow(q,j),te=Math.round(.5*we*(Math.random()-.5)*2);return Math.min(144e5,we+te)}function Ss(j){return j&&j._delegate?j._delegate:j}},1800:(nt,Ee,P)=>{"use strict";var d=P(5e3);let Q=null;function F(){return Q}const ie=new d.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ue(){return(0,d.LFG)(G)}()},providedIn:"platform"}),n})();const H=new d.OlP("Location Initialized");let G=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ue(){return new G((0,d.LFG)(ie))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Ce(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let Z=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ne(n){const e=(0,d.LFG)(ie).location;return new Te((0,d.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const _e=new d.OlP("appBaseHref");let Te=(()=>{class n extends Z{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ce(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+Ve(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+Ve(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le),d.LFG(_e,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n extends Z{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ce(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+Ve(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+Ve(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le),d.LFG(_e,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(Ze(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function Je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Ce,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(d.LFG(Z),d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ie(){return new je((0,d.LFG)(Z),(0,d.LFG)(le))}()},providedIn:"root"}),n})();function Ze(n){return n.replace(/\/index.html$/,"")}var me=(()=>((me=me||{})[me.Zero=0]="Zero",me[me.One=1]="One",me[me.Two=2]="Two",me[me.Few=3]="Few",me[me.Many=4]="Many",me[me.Other=5]="Other",me))();const Is=d.kL8;class $t{}let kn=(()=>{class n extends $t{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Is(r||this.locale)(t)){case me.Zero:return"zero";case me.One:return"one";case me.Two:return"two";case me.Few:return"few";case me.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.soG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),vr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[{provide:$t,useClass:kn}]}),n})();function Wa(n){return"server"===n}let Qu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Sd((0,d.LFG)(ie),window)}),n})();class Sd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function eo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Jt(this.window.history)||Jt(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Jt(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ia extends class wf extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){Q||(Q=n)}(new ia)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Un(){return er=er||document.querySelector("base"),er?er.getAttribute("href"):null}();return null==t?null:function sa(n){Ns=Ns||document.createElement("a"),Ns.setAttribute("href",n);const e=Ns.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){er=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ea(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ns,er=null;const as=new d.OlP("TRANSITION_ID"),tr=[{provide:d.ip1,useFactory:function Gr(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[as,ie,d.zs3],multi:!0}];class ls{static init(){(0,d.VLi)(new ls)}addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const p=function(_){u=u||_,a--,0==a&&r(u)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ju=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Hr=new d.OlP("EventManagerPlugins");let to=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hr),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class oa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let mt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),cr=(()=>{class n extends mt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(qa),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(qa))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function qa(n){F().remove(n)}const za={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},aa=/%COMP%/g;function dn(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?dn(n,i,t):(i=i.replace(aa,n),t.push(i))}return t}function Mo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ri=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ms(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ul(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new ua(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=dn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(to),d.LFG(cr),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Ms{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(za[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=za[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=za[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Mo(r)):this.eventManager.addEventListener(e,t,Mo(r))}}class Ul extends Ms{constructor(e,t,r,i){super(e),this.component=r;const a=dn(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ot(n){return"_ngcontent-%COMP%".replace(aa,n)}(i+"-"+r.id),this.hostAttr=function Ll(n){return"_nghost-%COMP%".replace(aa,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ua extends Ms{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=dn(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const p=document.createElement("style");p.textContent=a[u],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ka=(()=>{class n extends oa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const nr=["alt","control","meta","shift"],jl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Hi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Nd=(()=>{class n extends oa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="";if(nr.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),u+=_+".")}),u+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=u,p}static getEventFullKey(t){let r="",i=function ca(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Rs.hasOwnProperty(e)&&(e=Rs[e]))}return jl[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),nr.forEach(a=>{a!=i&&Hi[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Qa=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Gl(){ia.makeCurrent(),ls.init()},multi:!0},{provide:ie,useFactory:function da(){return(0,d.RDi)(document),document},deps:[]}]),Ja=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Za(){return new d.qLn},deps:[]},{provide:Hr,useClass:Ka,multi:!0,deps:[ie,d.R0b,d.Lbi]},{provide:Hr,useClass:Nd,multi:!0,deps:[ie]},{provide:ri,useClass:ri,deps:[to,cr,d.AFp]},{provide:d.FYo,useExisting:ri},{provide:mt,useExisting:cr},{provide:cr,useClass:cr,deps:[ie]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:to,useClass:to,deps:[Hr,d.R0b]},{provide:class cn{},useClass:Ju,deps:[]}];let ec=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:as,useExisting:d.AFp},tr]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Ja,imports:[vr,d.hGG]}),n})();"undefined"!=typeof window&&window;var br=P(2011),fa=P(4986),Lt=P(8306),io=P(3269),In=P(8996);function at(...n){const e=(0,io.yG)(n);return(0,In.D)(n,e)}var oc=P(6451),it=P(4004),ac=P(3099),$r=P(8421),rr=P(4482),Kt=P(5403);function Sn(n,e){return(0,rr.e)((t,r)=>{let i=null,a=0,u=!1;const p=()=>u&&!i&&r.complete();t.subscribe(new Kt.Q(r,_=>{null==i||i.unsubscribe();let w=0;const T=a++;(0,$r.Xf)(n(_,T)).subscribe(i=new Kt.Q(r,A=>r.next(e?e(_,A,T,w++):A),()=>{i=null,p()}))},()=>{u=!0,p()}))})}function lc(n,e,t,r,i){return(a,u)=>{let p=t,_=e,w=0;a.subscribe(new Kt.Q(u,T=>{const A=w++;_=p?n(_,T,A):(p=!0,T),r&&u.next(_)},i&&(()=>{p&&u.next(_),u.complete()})))}}function Ro(n,e){return(0,rr.e)(lc(n,e,arguments.length>=2,!0))}var us=P(4671);function Oo(n,e=us.y){return n=null!=n?n:il,(0,rr.e)((t,r)=>{let i,a=!0;t.subscribe(new Kt.Q(r,u=>{const p=e(u);(a||!n(i,p))&&(a=!1,i=p,r.next(u))}))})}function il(n,e){return n===e}var $i=P(5032);function xo(...n){const e=(0,io.jO)(n);return(0,rr.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),p=!1;for(let _=0;_<i;_++)(0,$r.Xf)(n[_]).subscribe(new Kt.Q(r,w=>{a[_]=w,!p&&!u[_]&&(u[_]=!0,(p=u.every(us.y))&&(u=null))},$i.Z));t.subscribe(new Kt.Q(r,_=>{if(p){const w=[_,...a];r.next(e?e(...w):w)}}))})}var en=P(5813),zl=(P(5735),P(3942)),Wi=P(4859),fe=P(5861),Mr=P(9681),k=P(2090),hn=P(1877);const Kl="@firebase/database";let so="";function ko(n){so=n}class Pn{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class sl{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ga=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Pn(e)}}catch(e){}return new sl},Wr=ga("localStorage"),cs=ga("sessionStorage"),ii=new hn.Yd("@firebase/database"),uc=function(){let n=1;return function(){return n++}}(),Po=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},ds=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=ds.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let qi=null,Ld=!0;const on=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ii.logLevel=hn.in.VERBOSE,qi=ii.log.bind(ii),e&&cs.set("logging_enabled",!0)):"function"==typeof n?qi=n:(qi=null,cs.remove("logging_enabled"))},Nn=function(...n){if(!0===Ld&&(Ld=!1,null===qi&&!0===cs.get("logging_enabled")&&on(!0)),qi){const e=ds.apply(null,n);qi(e)}},ma=function(n){return function(...e){Nn(n,...e)}},cc=function(...n){const e="FIREBASE INTERNAL ERROR: "+ds(...n);ii.error(e)},ks=function(...n){const e=`FIREBASE FATAL ERROR: ${ds(...n)}`;throw ii.error(e),new Error(e)},Rr=function(...n){const e="FIREBASE WARNING: "+ds(...n);ii.warn(e)},ol=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ps="[MIN_NAME]",tn="[MAX_NAME]",oo=function(n,e){if(n===e)return 0;if(n===Ps||e===tn)return-1;if(e===Ps||n===tn)return 1;{const t=Ql(n),r=Ql(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},hs=function(n,e){return n===e?0:n<e?-1:1},Zl=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},dc=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=dc(n[e[r]]);return t+="}",t},si=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function nn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const hc=function(n){(0,k.hu)(!ol(n),"Invalid JSON number");const r=1023;let i,a,u,p,_;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=p+r,u=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(u%2?1:0),u=Math.floor(u/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const T=w.join("");let A="";for(_=0;_<64;_+=8){let x=parseInt(T.substr(_,8),2).toString(16);1===x.length&&(x="0"+x),A+=x}return A.toLowerCase()},Sf=new RegExp("^-?(0*)\\d{1,10}$"),ya=-2147483648,Yl=2147483647,Ql=function(n){if(Sf.test(n)){const e=Number(n);if(e>=ya&&e<=Yl)return e}return null},Fs=function(n){try{n()}catch(e){setTimeout(()=>{throw Rr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ls=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class ao{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Rr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ry{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rr(e)}}let ll=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ul=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qr="websocket",mc="long_polling";class Vo{constructor(e,t,r,i,a=!1,u="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wr.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Xl(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===qr)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==mc)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function cl(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return nn(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class Af{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const dl={},C={};function I(n){const e=n.toString();return dl[e]||(dl[e]=new Af),dl[e]}class B{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Fs(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ba{constructor(e,t,r,i,a,u,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ma(e),this.stats_=I(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),Xl(t,mc,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new B(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _c((...a)=>{const[u,p,_,w,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=p,this.password=_;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,p]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ul.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ba.forceAllow_=!0}static forceDisallow(){ba.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!ba.forceAllow_&&(ba.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=si(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class _c{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=uc(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=_c.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(p){Nn("frame writing exception"),p.stack&&Nn(p.stack),Nn(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Nn("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let nu=null;"undefined"!=typeof MozWebSocket?nu=MozWebSocket:"undefined"!=typeof WebSocket&&(nu=WebSocket);let Gd=(()=>{class n{constructor(t,r,i,a,u,p,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ma(this.connId),this.stats_=I(r),this.connURL=n.connectionURL_(r,p,_,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const u={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&ul.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),a&&(u.ac=a),Xl(t,qr,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wr.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${so}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,p=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;p&&(a.proxy={origin:p}),this.mySock=new nu(this.connURL,[],a)}else this.mySock=new nu(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==nu&&!n.forceDisallow_}static previouslyFailed(){return Wr.isInMemoryStorage||!0===Wr.get("previous_websocket_failure")}markConnectionHealthy(){Wr.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=si(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class Hd{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ba,Gd]}initTransports_(e){const t=Gd&&Gd.isAvailable();let r=t&&!Gd.previouslyFailed();if(e.webSocketOnly&&(t||Rr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Gd];else{const i=this.transports_=[];for(const a of Hd.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class $d{constructor(e,t,r,i,a,u,p,_,w,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=p,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ma("c:"+this.id+":"),this.transportManager_=new Hd(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ls(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Zl("t",e),r=Zl("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Zl("t",e),r=Zl("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Zl("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?cc("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):cc("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Rr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ls(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ls(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Wd{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class qd{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class zd extends qd{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zd}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class rn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Zt(){return new rn("")}function bt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ci(n){return n.pieces_.length-n.pieceNum_}function gn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new rn(n.pieces_,e)}function Gg(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Zd(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Yd(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new rn(e,0)}function Mn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof rn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new rn(t,0)}function xt(n){return n.pieceNum_>=n.pieces_.length}function ai(n,e){const t=bt(n),r=bt(e);if(null===t)return e;if(t===r)return ai(gn(n),gn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function ky(n,e){const t=Zd(n,0),r=Zd(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=oo(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Pf(n,e){if(Ci(n)!==Ci(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ps(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ci(n)>Ci(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class yw{constructor(e,t){this.errorPrefix_=t,this.parts_=Zd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);Ff(this)}}function Ff(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zr(n))}function zr(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class pl extends qd{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new pl}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ou=1e3;let lu,Uo=(()=>{class n extends Wd{constructor(t,r,i,a,u,p,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=p,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=ma("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ou,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pl.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&zd.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,k.Pz)(u)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:p=>{const _=p.d;"ok"===p.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[u];void 0===p||a!==p||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+u),this.listens.has(p)||this.listens.set(p,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(p).has(u),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(p).set(u,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,_=>{const w=_.d,T=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Rr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,p=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,p=>{a&&setTimeout(()=>{a(p.s,p.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const p={p:r,d:i};void 0!==u&&(p.h=u),this.outstandingPuts_.push({action:t,request:p,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):cc("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ou,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ou,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ou),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,fe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let _=!1,w=null;const T=function(){w?w.close():(_=!0,a())};t.realtime_={close:T,sendRequest:function(V){(0,k.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(V)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,z]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);_?Nn("getToken() completed but was canceled"):(Nn("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=z&&z.token,w=new $d(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,oe=>{Rr(oe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(V){t.log_("Failed to get token: "+V),_||(t.repoInfo_.nodeAdmin&&Rr(V),T())}}})()}interrupt(t){Nn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Nn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ou,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>dc(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new rn(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Nn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Nn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+so.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=zd.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class kt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new kt(e,t)}}class Bf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new kt(Ps,e),i=new kt(Ps,t);return 0!==this.compare(r,i)}minPost(){return kt.MIN}}class $g extends Bf{static get __EMPTY_NODE(){return lu}static set __EMPTY_NODE(e){lu=e}compare(e,t){return oo(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return kt.MIN}maxPost(){return new kt(tn,lu)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new kt(e,lu)}toString(){return".key"}}const gs=new $g;class Qd{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Wg,ms=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Or.EMPTY_NODE,this.right=null!=u?u:Or.EMPTY_NODE}copy(t,r,i,a,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Or.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Or.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Or{constructor(e,t=Or.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Or(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ms.BLACK,null,null))}remove(e){return new Or(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ms.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Qd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Qd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Qd(this.root_,null,this.comparator_,!0,e)}}function Ly(n,e){return oo(n.name,e.name)}function wc(n,e){return oo(n,e)}Or.EMPTY_NODE=new class Uf{copy(e,t,r,i,a){return this}insert(e,t,r){return new ms(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const qg=function(n){return"number"==typeof n?"number:"+hc(n):"string:"+n},zg=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===Wg||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===Wg||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let uu,Jd,Kg,gl=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),zg(this.priorityNode_)}static set __childrenNodeConstructor(t){uu=t}static get __childrenNodeConstructor(){return uu}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return xt(t)?this:".priority"===bt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=bt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Ci(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(gn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+qg(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?hc(this.value_):this.value_,this.lazyHash_=Po(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const bn=new class By extends Bf{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?oo(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return kt.MIN}maxPost(){return new kt(tn,new gl("[PRIORITY-POST]",Kg))}makePost(e,t){const r=Jd(e);return new kt(t,new gl("[PRIORITY-POST]",r))}toString(){return".priority"}},Zg=Math.log(2);class Dc{constructor(e){this.count=parseInt(Math.log(e+1)/Zg,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Dr=function(n,e,t,r){n.sort(e);const i=function(_,w){const T=w-_;let A,x;if(0===T)return null;if(1===T)return A=n[_],x=t?t(A):A,new ms(x,A.node,ms.BLACK,null,null);{const V=parseInt(T/2,10)+_,z=i(_,V),oe=i(V+1,w);return A=n[V],x=t?t(A):A,new ms(x,A.node,ms.BLACK,z,oe)}},p=function(_){let w=null,T=null,A=n.length;const x=function(z,oe){const xe=A-z,ct=A;A-=z;const dt=i(xe+1,ct),Wt=n[xe],Rt=t?t(Wt):Wt;V(new ms(Rt,Wt.node,oe,null,dt))},V=function(z){w?(w.left=z,w=z):(T=z,w=z)};for(let z=0;z<_.count;++z){const oe=_.nextBitIsOne(),xe=Math.pow(2,_.count-(z+1));oe?x(xe,ms.BLACK):(x(xe,ms.BLACK),x(xe,ms.RED))}return T}(new Dc(n.length));return new Or(r||e,p)};let Ec;const ml={};class uo{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(ml&&bn,"ChildrenNode.ts has not been loaded"),Ec=Ec||new uo({".priority":ml},{".priority":bn}),Ec}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Or?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==gs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(kt.Wrap);let p,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();p=i?Dr(r,e.getCompare()):ml;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const T=Object.assign({},this.indexes_);return T[_]=p,new uo(T,w)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const u=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(u,"Missing index implementation for "+a),i===ml){if(u.isDefinedOn(e.node)){const p=[],_=t.getIterator(kt.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&p.push(w),w=_.getNext();return p.push(e),Dr(p,u.getCompare())}return ml}{const p=t.get(e.name);let _=i;return p&&(_=_.remove(new kt(e.name,p))),_.insert(e,e.node)}});return new uo(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===ml)return i;{const a=t.get(e.name);return a?i.remove(new kt(e.name,a)):i}});return new uo(r,this.indexSet_)}}let Gn,vt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&zg(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gn||(Gn=new n(new Or(wc),null,uo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gn}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Gn:r}}getChild(t){const r=bt(t);return null===r?this:this.getImmediateChild(r).getChild(gn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new kt(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const p=a.isEmpty()?Gn:this.priorityNode_;return new n(a,p,u)}}updateChild(t,r){const i=bt(t);if(null===i)return r;{(0,k.hu)(".priority"!==bt(t)||1===Ci(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(gn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(bn,(p,_)=>{r[p]=_.val(t),i++,u&&n.INTEGER_REGEXP_.test(p)?a=Math.max(a,Number(p)):u=!1}),!t&&u&&a<2*i){const p=[];for(const _ in r)p[_]=r[_];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+qg(this.getPriority().val())+":"),this.forEachChild(bn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":Po(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new kt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new kt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new kt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,kt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,kt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Cc?-1:0}withIndex(t){if(t===gs||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===gs||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(bn),a=r.getIterator(bn);let u=i.getNext(),p=a.getNext();for(;u&&p;){if(u.name!==p.name||!u.node.equals(p.node))return!1;u=i.getNext(),p=a.getNext()}return null===u&&null===p}return!1}return!1}}resolveIndex_(t){return t===gs?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Cc=new class Gf extends vt{constructor(){super(new Or(wc),vt.EMPTY_NODE,uo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return vt.EMPTY_NODE}isEmpty(){return!1}};function _n(n,e=null){if(null===n)return vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new gl(n,_n(e));if(n instanceof Array){let t=vt.EMPTY_NODE;return nn(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=_n(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(_n(e))}{const t=[];let r=!1;if(nn(n,(u,p)=>{if("."!==u.substring(0,1)){const _=_n(p);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new kt(u,_)))}}),0===t.length)return vt.EMPTY_NODE;const a=Dr(t,Ly,u=>u.name,wc);if(r){const u=Dr(t,bn.getCompare());return new vt(a,_n(e),new uo({".priority":u},{".priority":bn}))}return new vt(a,_n(e),uo.Default)}}Object.defineProperties(kt,{MIN:{value:new kt(Ps,vt.EMPTY_NODE)},MAX:{value:new kt(tn,Cc)}}),$g.__EMPTY_NODE=vt.EMPTY_NODE,gl.__childrenNodeConstructor=vt,function mn(n){Wg=n}(Cc),function jf(n){Kg=n}(Cc),function Vy(n){Jd=n}(_n);class $f extends Bf{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!xt(e)&&".priority"!==bt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?oo(e.name,t.name):a}makePost(e,t){const r=_n(e),i=vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new kt(t,i)}maxPost(){const e=vt.EMPTY_NODE.updateChild(this.indexPath_,Cc);return new kt(tn,e)}toString(){return Zd(this.indexPath_,0).join("/")}}const cu=new class Yg extends Bf{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?oo(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return kt.MIN}maxPost(){return kt.MAX}makePost(e,t){const r=_n(e);return new kt(t,r)}toString(){return".value"}},_l="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Uy=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=_l.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=_l.charAt(e[i]);return(0,k.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),Jg=function(n){if(n===""+Yl)return"-";const e=Ql(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return tn;const a=_l.charAt(_l.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},Xd=function(n){if(n===""+ya)return Ps;const e=Ql(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Yl:(delete t[t.length-1],t.join("")):(t[t.length-1]=_l.charAt(_l.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Xg(n){return{type:"value",snapshotNode:n}}function jo(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Go(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function du(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class qf{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(Go(t,p)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?u.trackChildChange(jo(t,r)):u.trackChildChange(du(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(bn,(i,a)=>{t.hasChild(i)||r.trackChildChange(Go(i,a))}),t.isLeafNode()||t.forEachChild(bn,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(du(i,a,u))}else r.trackChildChange(jo(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ic{constructor(e){this.indexedFilter_=new qf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ic.getStartPost_(e),this.endPost_=Ic.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new kt(t,r))||(r=vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=vt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(vt.EMPTY_NODE);const a=this;return t.forEachChild(bn,(u,p)=>{a.matches(new kt(u,p))||(i=i.updateImmediateChild(u,vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Gy{constructor(e){this.rangedFilter_=new Ic(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new kt(t,r))||(r=vt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=vt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const p=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(p.name,p.node),u++}}else{let a,u,p,_;if(i=t.withIndex(this.index_),i=i.updatePriority(vt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();p=(x,V)=>A(V,x)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let w=0,T=!1;for(;_.hasNext();){const A=_.getNext();!T&&p(a,A)<=0&&(T=!0),T&&w<this.limit_&&p(A,u)<=0?w++:i=i.updateImmediateChild(A.name,vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const A=this.index_.getCompare();u=(x,V)=>A(V,x)}else u=this.index_.getCompare();const p=e;(0,k.hu)(p.numChildren()===this.limit_,"");const _=new kt(t,r),w=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),T=this.rangedFilter_.matches(_);if(p.hasChild(t)){const A=p.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=x&&(x.name===t||p.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const V=null==x?1:u(x,_);if(T&&!r.isEmpty()&&V>=0)return null!=a&&a.trackChildChange(du(t,r,A)),p.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(Go(t,A));const oe=p.updateImmediateChild(t,vt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=a&&a.trackChildChange(jo(x.name,x.node)),oe.updateImmediateChild(x.name,x.node)):oe}}return r.isEmpty()?e:T&&u(w,_)>=0?(null!=a&&(a.trackChildChange(Go(w.name,w.node)),a.trackChildChange(jo(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(w.name,vt.EMPTY_NODE)):e}}class hu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=bn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ps}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:tn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===bn}copy(){const e=new hu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Zf(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function li(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ac(n,e){const t=n.copy();return t.index_=e,t}function yl(n){const e={};if(n.isDefault())return e;let t;return n.index_===bn?t="$priority":n.index_===cu?t="$value":n.index_===gs?t="$key":((0,k.hu)(n.index_ instanceof $f,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function zi(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==bn&&(e.i=n.index_.toString()),e}class Nc extends Wd{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ma("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=Nc.getListenId_(e,r),p={};this.listens_[u]=p;const _=yl(e._queryParams);this.restRequest_(a+".json",_,(w,T)=>{let A=T;if(404===w&&(A=null,w=null),null===w&&this.onDataUpdate_(a,A,!1,r),(0,k.DV)(this.listens_,u)===p){let x;x=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(x,null)}})}unlisten(e,t){const r=Nc.getListenId_(e,t);delete this.listens_[r]}get(e){const t=yl(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,u)=>{let p=u;404===a&&(p=null,a=null),null===a?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+u);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+u+" received. status:",p.status,"response:",p.responseText);let _=null;if(p.status>=200&&p.status<300){try{_=(0,k.cI)(p.responseText)}catch(w){Rr("Failed to parse JSON response for "+u+": "+p.responseText)}r(null,_)}else 401!==p.status&&404!==p.status&&Rr("Got unsuccessful REST response for "+u+" Status: "+p.status),r(p.status);r=null}},p.open("GET",u,!0),p.send()})}}class ww{constructor(){this.rootNode_=vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function fu(){return{value:null,children:new Map}}function Mc(n,e,t){if(xt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=bt(e);n.children.has(r)||n.children.set(r,fu()),Mc(n.children.get(r),e=gn(e),t)}}function hr(n,e){if(xt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(bn,(r,i)=>{Mc(n,new rn(r),i)}),hr(n,e)}}if(n.children.size>0){const t=bt(e);return e=gn(e),n.children.has(t)&&hr(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function pu(n,e,t){null!==n.value?t(e,n.value):function Yf(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{pu(i,new rn(e.toString()+"/"+r),t)})}class Hy{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&nn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class th{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Hy(e);const r=1e4+2e4*Math.random();Ls(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;nn(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Ls(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Kr=(()=>{return(n=Kr||(Kr={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Kr;var n})();function mu(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class co{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Kr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(xt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new rn(e));return new co(Zt(),t,this.revert)}}return(0,k.hu)(bt(this.path)===e,"operationForChild called for unrelated child."),new co(gn(this.path),this.affectedTree,this.revert)}}class wa{constructor(e,t){this.source=e,this.path=t,this.type=Kr.LISTEN_COMPLETE}operationForChild(e){return xt(this.path)?new wa(this.source,Zt()):new wa(this.source,gn(this.path))}}class Da{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Kr.OVERWRITE}operationForChild(e){return xt(this.path)?new Da(this.source,Zt(),this.snap.getImmediateChild(e)):new Da(this.source,gn(this.path),this.snap)}}class Ea{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Kr.MERGE}operationForChild(e){if(xt(this.path)){const t=this.children.subtree(new rn(e));return t.isEmpty()?null:t.value?new Da(this.source,Zt(),t.value):new Ea(this.source,Zt(),t)}return(0,k.hu)(bt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ea(this.source,gn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ho{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xt(e))return this.isFullyInitialized()&&!this.filtered_;const t=bt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class $y{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Oc(n,e,t,r,i,a){const u=r.filter(p=>p.type===t);u.sort((p,_)=>function f(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new kt(e.childName,e.snapshotNode),i=new kt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,_)),u.forEach(p=>{const _=function y(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,a);i.forEach(w=>{w.respondsTo(p.type)&&e.push(w.createEvent(_,n.query_))})})}function g(n,e){return{eventCache:n,serverCache:e}}function b(n,e,t,r){return g(new ho(e,t,r),n.serverCache)}function S(n,e,t,r){return g(n.eventCache,new ho(e,t,r))}function M(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function U(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let ee;class ve{constructor(e,t=(()=>(ee||(ee=new Or(hs)),ee))()){this.value=e,this.children=t}static fromObject(e){let t=new ve(null);return nn(e,(r,i)=>{t=t.set(new rn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Zt(),value:this.value};if(xt(e))return null;{const r=bt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(gn(e),t);return null!=a?{path:Mn(new rn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xt(e))return this;{const t=bt(e),r=this.children.get(t);return null!==r?r.subtree(gn(e)):new ve(null)}}set(e,t){if(xt(e))return new ve(t,this.children);{const r=bt(e),a=(this.children.get(r)||new ve(null)).set(gn(e),t),u=this.children.insert(r,a);return new ve(this.value,u)}}remove(e){if(xt(e))return this.children.isEmpty()?new ve(null):new ve(null,this.children);{const t=bt(e),r=this.children.get(t);if(r){const i=r.remove(gn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new ve(null):new ve(this.value,a)}return this}}get(e){if(xt(e))return this.value;{const t=bt(e),r=this.children.get(t);return r?r.get(gn(e)):null}}setTree(e,t){if(xt(e))return t;{const r=bt(e),a=(this.children.get(r)||new ve(null)).setTree(gn(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new ve(this.value,u)}}fold(e){return this.fold_(Zt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Mn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Zt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(xt(e))return null;{const a=bt(e),u=this.children.get(a);return u?u.findOnPath_(gn(e),Mn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Zt(),t)}foreachOnPath_(e,t,r){if(xt(e))return this;{this.value&&r(t,this.value);const i=bt(e),a=this.children.get(i);return a?a.foreachOnPath_(gn(e),Mn(t,i),r):new ve(null)}}foreach(e){this.foreach_(Zt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Mn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ze{constructor(e){this.writeTree_=e}static empty(){return new ze(new ve(null))}}function Ke(n,e,t){if(xt(e))return new ze(new ve(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=ai(i,e);return a=a.updateChild(u,t),new ze(n.writeTree_.set(i,a))}{const i=new ve(t),a=n.writeTree_.setTree(e,i);return new ze(a)}}}function Pt(n,e,t){let r=n;return nn(t,(i,a)=>{r=Ke(r,Mn(e,i),a)}),r}function sr(n,e){if(xt(e))return ze.empty();{const t=n.writeTree_.setTree(e,new ve(null));return new ze(t)}}function fo(n,e){return null!=Ki(n,e)}function Ki(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ai(t.path,e)):null}function nh(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(bn,(r,i)=>{e.push(new kt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new kt(r,i.value))}),e}function po(n,e){if(xt(e))return n;{const t=Ki(n,e);return new ze(null!=t?new ve(t):n.writeTree_.subtree(e))}}function xc(n){return n.writeTree_.isEmpty()}function Ho(n,e){return kc(Zt(),n.writeTree_,e)}function kc(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=kc(Mn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Mn(n,".priority"),r)),t}}function _u(n,e){return Qy(e,n)}function nm(n,e){if(n.snap)return ps(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ps(Mn(n.path,t),e))return!0;return!1}function Jf(n){return n.visible}function Dw(n,e,t){let r=ze.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let p;if(a.snap)ps(t,u)?(p=ai(t,u),r=Ke(r,p,a.snap)):ps(u,t)&&(p=ai(u,t),r=Ke(r,Zt(),a.snap.getChild(p)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(ps(t,u))p=ai(t,u),r=Pt(r,p,a.children);else if(ps(u,t))if(p=ai(u,t),xt(p))r=Pt(r,Zt(),a.children);else{const _=(0,k.DV)(a.children,bt(p));if(_){const w=_.getChild(gn(p));r=Ke(r,Zt(),w)}}}}}return r}function zy(n,e,t,r,i){if(r||i){const a=po(n.visibleWrites,e);return!i&&xc(a)?t:i||null!=t||fo(a,Zt())?Ho(Dw(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(ps(w.path,e)||ps(e,w.path))},e),t||vt.EMPTY_NODE):null}{const a=Ki(n.visibleWrites,e);if(null!=a)return a;{const u=po(n.visibleWrites,e);return xc(u)?t:null!=t||fo(u,Zt())?Ho(u,t||vt.EMPTY_NODE):null}}}function Xf(n,e,t,r){return zy(n.writeTree,n.treePath,e,t,r)}function Zy(n,e){return function g1(n,e,t){let r=vt.EMPTY_NODE;const i=Ki(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(bn,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=po(n.visibleWrites,e);return t.forEachChild(bn,(u,p)=>{const _=Ho(po(a,new rn(u)),p);r=r.updateImmediateChild(u,_)}),nh(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return nh(po(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function Yy(n,e,t,r){return function m1(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Mn(e,t);if(fo(n.visibleWrites,a))return null;{const u=po(n.visibleWrites,a);return xc(u)?i.getChild(t):Ho(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function rm(n,e){return function Ky(n,e){return Ki(n.visibleWrites,e)}(n.writeTree,Mn(n.treePath,e))}function Vs(n,e,t){return function Ew(n,e,t,r){const i=Mn(e,t),a=Ki(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Ho(po(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Tw(n,e){return Qy(Mn(n.treePath,e),n.writeTree)}function Qy(n,e){return{treePath:n,writeTree:e}}class y1{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,du(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Go(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,jo(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,du(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Iw=new class v1{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Jy{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ho(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vs(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:U(this.viewCache_),a=function _1(n,e,t,r,i,a){return function Cw(n,e,t,r,i,a,u){let p;const _=po(n.visibleWrites,e),w=Ki(_,Zt());if(null!=w)p=w;else{if(null==t)return[];p=Ho(_,t)}if(p=p.withIndex(u),p.isEmpty()||p.isLeafNode())return[];{const T=[],A=u.getCompare(),x=a?p.getReverseIteratorFrom(r,u):p.getIteratorFrom(r,u);let V=x.getNext();for(;V&&T.length<i;)0!==A(V,r)&&T.push(V),V=x.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Tt(n,e,t,r,i,a){const u=e.eventCache;if(null!=rm(r,t))return e;{let p,_;if(xt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=U(e),A=Zy(r,w instanceof vt?w:vt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),A,a)}else{const w=Xf(r,U(e));p=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=bt(t);if(".priority"===w){(0,k.hu)(1===Ci(t),"Can't have a priority with additional path components");const T=u.getNode();_=e.serverCache.getNode();const A=Yy(r,t,T,_);p=null!=A?n.filter.updatePriority(T,A):u.getNode()}else{const T=gn(t);let A;if(u.isCompleteForChild(w)){_=e.serverCache.getNode();const x=Yy(r,t,u.getNode(),_);A=null!=x?u.getNode().getImmediateChild(w).updateChild(T,x):u.getNode().getImmediateChild(w)}else A=Vs(r,w,e.serverCache);p=null!=A?n.filter.updateChild(u.getNode(),w,A,T,i,a):u.getNode()}}return b(e,p,u.isFullyInitialized()||xt(t),n.filter.filtersNodes())}}function ep(n,e,t,r,i,a,u,p){const _=e.serverCache;let w;const T=u?n.filter:n.filter.getIndexedFilter();if(xt(t))w=T.updateFullNode(_.getNode(),r,null);else if(T.filtersNodes()&&!_.isFiltered()){const V=_.getNode().updateChild(t,r);w=T.updateFullNode(_.getNode(),V,null)}else{const V=bt(t);if(!_.isCompleteForPath(t)&&Ci(t)>1)return e;const z=gn(t),xe=_.getNode().getImmediateChild(V).updateChild(z,r);w=".priority"===V?T.updatePriority(_.getNode(),xe):T.updateChild(_.getNode(),V,xe,z,Iw,null)}const A=S(e,w,_.isFullyInitialized()||xt(t),T.filtersNodes());return Tt(n,A,t,i,new Jy(i,A,a),p)}function im(n,e,t,r,i,a,u){const p=e.eventCache;let _,w;const T=new Jy(i,e,a);if(xt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,u),_=b(e,w,!0,n.filter.filtersNodes());else{const A=bt(t);if(".priority"===A)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=b(e,w,p.isFullyInitialized(),p.isFiltered());else{const x=gn(t),V=p.getNode().getImmediateChild(A);let z;if(xt(x))z=r;else{const oe=T.getCompleteChild(A);z=null!=oe?".priority"===Gg(x)&&oe.getChild(Yd(x)).isEmpty()?oe:oe.updateChild(x,r):vt.EMPTY_NODE}_=V.equals(z)?e:b(e,n.filter.updateChild(p.getNode(),A,z,x,T,u),p.isFullyInitialized(),n.filter.filtersNodes())}}return _}function Xy(n,e){return n.eventCache.isCompleteForChild(e)}function go(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function om(n,e,t,r,i,a,u,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=xt(t)?r:new ve(null).setTree(t,r);const T=e.serverCache.getNode();return w.children.inorderTraversal((A,x)=>{if(T.hasChild(A)){const z=go(0,e.serverCache.getNode().getImmediateChild(A),x);_=ep(n,_,new rn(A),z,i,a,u,p)}}),w.children.inorderTraversal((A,x)=>{const V=!e.serverCache.isCompleteForChild(A)&&void 0===x.value;if(!T.hasChild(A)&&!V){const oe=go(0,e.serverCache.getNode().getImmediateChild(A),x);_=ep(n,_,new rn(A),oe,i,a,u,p)}}),_}class tv{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new qf(r.getIndex()),a=function zf(n){return n.loadsAllData()?new qf(n.getIndex()):n.hasLimit()?new Gy(n):new Ic(n)}(r);this.processor_=function Sw(n){return{filter:n}}(a);const u=t.serverCache,p=t.eventCache,_=i.updateFullNode(vt.EMPTY_NODE,u.getNode(),null),w=a.updateFullNode(vt.EMPTY_NODE,p.getNode(),null),T=new ho(_,u.isFullyInitialized(),i.filtersNodes()),A=new ho(w,p.isFullyInitialized(),a.filtersNodes());this.viewCache_=g(A,T),this.eventGenerator_=new $y(this.query_)}get query(){return this.query_}}function JN(n,e){const t=U(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!xt(e)&&!t.getImmediateChild(bt(e)).isEmpty())?t.getChild(e):null}function rv(n){return 0===n.eventRegistrations_.length}function tp(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function np(n,e,t,r){e.type===Kr.MERGE&&null!==e.source.queryId&&((0,k.hu)(U(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(M(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function w1(n,e,t,r,i){const a=new y1;let u,p;if(t.type===Kr.OVERWRITE){const w=t;w.source.fromUser?u=im(n,e,w.path,w.snap,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),p=w.source.tagged||e.serverCache.isFiltered()&&!xt(w.path),u=ep(n,e,w.path,w.snap,r,i,p,a))}else if(t.type===Kr.MERGE){const w=t;w.source.fromUser?u=function sm(n,e,t,r,i,a,u){let p=e;return r.foreach((_,w)=>{const T=Mn(t,_);Xy(e,bt(T))&&(p=im(n,p,T,w,i,a,u))}),r.foreach((_,w)=>{const T=Mn(t,_);Xy(e,bt(T))||(p=im(n,p,T,w,i,a,u))}),p}(n,e,w.path,w.children,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),p=w.source.tagged||e.serverCache.isFiltered(),u=om(n,e,w.path,w.children,r,i,p,a))}else if(t.type===Kr.ACK_USER_WRITE){const w=t;u=w.revert?function vl(n,e,t,r,i,a){let u;if(null!=rm(r,t))return e;{const p=new Jy(r,e,i),_=e.eventCache.getNode();let w;if(xt(t)||".priority"===bt(t)){let T;if(e.serverCache.isFullyInitialized())T=Xf(r,U(e));else{const A=e.serverCache.getNode();(0,k.hu)(A instanceof vt,"serverChildren would be complete if leaf node"),T=Zy(r,A)}T=T,w=n.filter.updateFullNode(_,T,a)}else{const T=bt(t);let A=Vs(r,T,e.serverCache);null==A&&e.serverCache.isCompleteForChild(T)&&(A=_.getImmediateChild(T)),w=null!=A?n.filter.updateChild(_,T,A,gn(t),p,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(_,T,vt.EMPTY_NODE,gn(t),p,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Xf(r,U(e)),u.isLeafNode()&&(w=n.filter.updateFullNode(w,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=rm(r,Zt()),b(e,w,u,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function E1(n,e,t,r,i,a,u){if(null!=rm(i,t))return e;const p=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(xt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return ep(n,e,t,_.getNode().getChild(t),i,a,p,u);if(xt(t)){let w=new ve(null);return _.getNode().forEachChild(gs,(T,A)=>{w=w.set(new rn(T),A)}),om(n,e,t,w,i,a,p,u)}return e}{let w=new ve(null);return r.foreach((T,A)=>{const x=Mn(t,T);_.isCompleteForPath(x)&&(w=w.set(T,_.getNode().getChild(x)))}),om(n,e,t,w,i,a,p,u)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Kr.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);u=function ev(n,e,t,r,i){const a=e.serverCache;return Tt(n,S(e,a.getNode(),a.isFullyInitialized()||xt(t),a.isFiltered()),t,r,Iw,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function D1(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=M(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Xg(M(e)))}}(e,u,_),{viewCache:u,changes:_}}(n.processor_,i,e,t,r);return function b1(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,am(n,a.changes,a.viewCache.eventCache.getNode(),null)}function am(n,e,t,r){return function Wy(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function jy(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Oc(n,i,"child_removed",e,r,t),Oc(n,i,"child_added",e,r,t),Oc(n,i,"child_moved",a,r,t),Oc(n,i,"child_changed",e,r,t),Oc(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let rh,uv;class C1{constructor(){this.views=new Map}}function sv(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),np(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(np(u,e,t,r));return a}}function ov(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let p=Xf(t,i?r:null),_=!1;p?_=!0:r instanceof vt?(p=Zy(t,r),_=!1):(p=vt.EMPTY_NODE,_=!1);const w=g(new ho(p,_,!1),new ho(r,i,!1));return new tv(e,w)}return u}function N1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function bl(n,e){let t=null;for(const r of n.views.values())t=t||JN(r,e);return t}function av(n,e){return e._queryParams.loadsAllData()?lv(n):n.views.get(e._queryIdentifier)}function Nw(n,e){return null!=av(n,e)}function Ca(n){return null!=lv(n)}function lv(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let rM=1;class M1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ve(null),this.pendingWriteTree_=function QN(){return{visibleWrites:ze.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Mw(n,e,t,r,i){return function yu(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ke(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Vc(n,new Da({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Lc(n,e,t=!1){const r=function tm(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Fc(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const p=n.allWrites[u];p.visible&&(u>=t&&nm(p,r.path)?i=!1:ps(r.path,p.path)&&(a=!0)),u--}return!!i&&(a?(function qy(n){n.visibleWrites=Dw(n.allWrites,Jf,Zt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=sr(n.visibleWrites,r.path):nn(r.children,_=>{n.visibleWrites=sr(n.visibleWrites,Mn(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new ve(null);return null!=r.snap?a=a.set(Zt(),!0):nn(r.children,u=>{a=a.set(new rn(u),!0)}),Vc(n,new co(r.path,a,t))}return[]}function lm(n,e,t){return Vc(n,new Da({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function um(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let u=[];if(a&&("default"===e._queryIdentifier||Nw(a,e))){const p=function A1(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const p=Ca(n);if("default"===i)for(const[_,w]of n.views.entries())u=u.concat(tp(w,t,r)),rv(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(u=u.concat(tp(_,t,r)),rv(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return p&&!Ca(n)&&a.push(new(function I1(){return(0,k.hu)(rh,"Reference.ts has not been loaded"),rh}())(e._repo,e._path)),{removed:a,events:u}}(a,e,t,r);(function S1(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=p.removed;u=p.events;const w=-1!==_.findIndex(A=>A._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(A,x)=>Ca(x));if(w&&!T){const A=n.syncPointTree_.subtree(i);if(!A.isEmpty()){const x=function fv(n){return n.fold((e,t,r)=>{if(t&&Ca(t))return[lv(t)];{let i=[];return t&&(i=N1(t)),nn(r,(a,u)=>{i=i.concat(u)}),i}})}(A);for(let V=0;V<x.length;++V){const z=x[V],oe=z.query,xe=xw(n,z);n.listenProvider_.startListening(Ta(oe),rp(n,oe),xe.hashFn,xe.onComplete)}}}if(!T&&_.length>0&&!r)if(w){const A=null;n.listenProvider_.stopListening(Ta(e),A)}else _.forEach(A=>{const x=n.queryToTagMap.get(fm(A));n.listenProvider_.stopListening(Ta(A),x)});!function ip(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=fm(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return u}function cm(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(A,x)=>{const V=ai(A,r);i=i||bl(x,V),a=a||Ca(x)});let p,u=n.syncPointTree_.get(r);u?(a=a||Ca(u),i=i||bl(u,Zt())):(u=new C1,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?p=!0:(p=!1,i=vt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((x,V)=>{const z=bl(V,Zt());z&&(i=i.updateImmediateChild(x,z))}));const _=Nw(u,e);if(!_&&!e._queryParams.loadsAllData()){const A=fm(e);(0,k.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const x=function ih(){return rM++}();n.queryToTagMap.set(A,x),n.tagToQueryMap.set(x,A)}let T=function eM(n,e,t,r,i,a){const u=ov(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function XN(n,e){n.eventRegistrations_.push(e)}(u,t),function iv(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(bn,(a,u)=>{r.push(jo(a,u))}),t.isFullyInitialized()&&r.push(Xg(t.getNode())),am(n,r,t.getNode(),e)}(u,t)}(u,e,t,_u(n.pendingWriteTree_,r),i,p);if(!_&&!a){const A=av(u,e);T=T.concat(function O1(n,e,t){const r=e._path,i=rp(n,e),a=xw(n,t),u=n.listenProvider_.startListening(Ta(e),i,a.hashFn,a.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Ca(p.value),"If we're adding a query, it shouldn't be shadowed");else{const _=p.fold((w,T,A)=>{if(!xt(w)&&T&&Ca(T))return[lv(T).query];{let x=[];return T&&(x=x.concat(N1(T).map(V=>V.query))),nn(A,(V,z)=>{x=x.concat(z)}),x}});for(let w=0;w<_.length;++w){const T=_[w];n.listenProvider_.stopListening(Ta(T),rp(n,T))}}return u}(n,e,A))}return T}function dm(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,p)=>{const w=bl(p,ai(u,e));if(w)return w});return zy(i,e,a,t,!0)}function Vc(n,e){return Ow(e,n.syncPointTree_,null,_u(n.pendingWriteTree_,Zt()))}function Ow(n,e,t,r){if(xt(n.path))return hm(n,e,t,r);{const i=e.get(Zt());null==t&&null!=i&&(t=bl(i,Zt()));let a=[];const u=bt(n.path),p=n.operationForChild(u),_=e.children.get(u);if(_&&p){const w=t?t.getImmediateChild(u):null,T=Tw(r,u);a=a.concat(Ow(p,_,w,T))}return i&&(a=a.concat(sv(i,n,r,t))),a}}function hm(n,e,t,r){const i=e.get(Zt());null==t&&null!=i&&(t=bl(i,Zt()));let a=[];return e.children.inorderTraversal((u,p)=>{const _=t?t.getImmediateChild(u):null,w=Tw(r,u),T=n.operationForChild(u);T&&(a=a.concat(hm(T,p,_,w)))}),i&&(a=a.concat(sv(i,n,r,t))),a}function xw(n,e){const t=e.query,r=rp(n,t);return{hashFn:()=>(function Aw(n){return n.viewCache_.serverCache.getNode()}(e)||vt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function R1(n,e,t){const r=hv(n,t);if(r){const i=Bc(r),a=i.path,u=i.queryId,p=ai(a,e);return wu(n,a,new wa(mu(u),p))}return[]}(n,t._path,r):function cv(n,e){return Vc(n,new wa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function Vd(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return um(n,t,null,a)}}}}function rp(n,e){const t=fm(e);return n.queryToTagMap.get(t)}function fm(n){return n._path.toString()+"$"+n._queryIdentifier}function hv(n,e){return n.tagToQueryMap.get(e)}function Bc(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new rn(n.substr(0,e))}}function wu(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),sv(r,t,_u(n.pendingWriteTree_,e),null)}function Ta(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function nM(){return(0,k.hu)(uv,"Reference.ts has not been loaded"),uv}())(n._repo,n._path):n}class pm{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new pm(t)}node(){return this.node_}}class gm{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Mn(this.path_,e);return new gm(this.syncTree_,t)}node(){return dm(this.syncTree_,this.path_)}}const mm=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?kw(n[".sv"],e,t):"object"==typeof n[".sv"]?_m(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},kw=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},_m=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},Pw=function(n,e,t,r){return Fw(e,new gm(t,n),r)},ym=function(n,e,t){return Fw(n,new pm(e),t)};function Fw(n,e,t){const r=n.getPriority().val(),i=mm(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,p=mm(u.getValue(),e,t);return p!==u.getValue()||i!==u.getPriority().val()?new gl(p,_n(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new gl(i))),u.forEachChild(bn,(p,_)=>{const w=Fw(_,e.getImmediateChild(p),t);w!==_&&(a=a.updateImmediateChild(p,w))}),a}}class vm{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function sp(n,e){let t=e instanceof rn?e:new rn(e),r=n,i=bt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new vm(i,r,a),t=gn(t),i=bt(t)}return r}function Uc(n){return n.node.value}function bm(n,e){n.node.value=e,Bw(n)}function Lw(n){return n.node.childCount>0}function Ti(n,e){nn(n.node.children,(t,r)=>{e(new vm(t,n,r))})}function Vw(n,e,t,r){t&&!r&&e(n),Ti(n,i=>{Vw(i,e,!0,r)}),t&&r&&e(n)}function wm(n){return new rn(null===n.parent?n.name:wm(n.parent)+"/"+n.name)}function Bw(n){null!==n.parent&&function Uw(n,e,t){const r=function x1(n){return void 0===Uc(n)&&!Lw(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Bw(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Bw(n))}(n.parent,n.name,n)}const sM=/[\[\].#$\/\u0000-\u001F\u007F]/,P1=/[\[\].#$\u0000-\u001F\u007F]/,op=10485760,ap=function(n){return"string"==typeof n&&0!==n.length&&!sM.test(n)},jw=function(n){return"string"==typeof n&&0!==n.length&&!P1.test(n)},lp=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ol(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},$o=function(n,e,t,r){r&&void 0===e||up((0,k.gK)(n,"value"),e,t)},up=function(n,e,t){const r=t instanceof rn?new yw(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+zr(r));if("function"==typeof e)throw new Error(n+"contains a function "+zr(r)+" with contents = "+e.toString());if(ol(e))throw new Error(n+"contains "+e.toString()+" "+zr(r));if("string"==typeof e&&e.length>op/3&&(0,k.ug)(e)>op)throw new Error(n+"contains a string greater than "+op+" utf8 bytes "+zr(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(nn(e,(u,p)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!ap(u)))throw new Error(n+" contains an invalid key ("+u+") "+zr(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Py(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),Ff(n)})(r,u),up(n,p,r),function su(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+zr(r)+" in addition to actual children.")}},Hw=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];nn(e,(u,p)=>{const _=new rn(u);if(up(i,p,Mn(t,_)),".priority"===Gg(_)&&!lp(p))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Zd(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!ap(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(ky);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ps(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},gv=function(n,e,t){if(!t||void 0!==e){if(ol(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lp(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},sh=function(n,e,t,r){if(!(r&&void 0===t||ap(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},oh=function(n,e,t,r){if(!(r&&void 0===t||jw(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},fr=function(n,e){if(".info"===bt(e))throw new Error(n+" failed = Can't modify data under /.info/")},Dm=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ap(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jw(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class V1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Em(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Pf(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function $w(n,e,t){Em(n,t),Ww(n,r=>Pf(r,e))}function Bs(n,e,t){Em(n,t),Ww(n,r=>ps(r,e)||ps(e,r))}function Ww(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(B1(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function B1(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();qi&&Nn("event: "+t.toString()),Fs(r)}}}const qw="repo_interrupt";class U1{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new V1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fu(),this.transactionQueueTree_=new vm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cp(n){const t=n.infoData_.getNode(new rn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function jc(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:cp(n)})}function zw(n,e,t,r,i){n.dataUpdateCount++;const a=new rn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const _=(0,k.UI)(t,w=>_n(w));u=function Rw(n,e,t,r){const i=hv(n,r);if(i){const a=Bc(i),u=a.path,p=a.queryId,_=ai(u,e),w=ve.fromObject(t);return wu(n,u,new Ea(mu(p),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=_n(t);u=function dv(n,e,t,r){const i=hv(n,r);if(null!=i){const a=Bc(i),u=a.path,p=a.queryId,_=ai(u,e);return wu(n,u,new Da(mu(p),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,k.UI)(t,w=>_n(w));u=function vu(n,e,t){const r=ve.fromObject(t);return Vc(n,new Ea({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=_n(t);u=lm(n.serverSyncTree_,a,_)}let p=a;u.length>0&&(p=uh(n,a)),Bs(n.eventQueue_,p,u)}function Cm(n,e){Tm(n,"connected",e),!1===e&&function H1(n){ah(n,"onDisconnectEvents");const e=jc(n),t=fu();pu(n.onDisconnect_,Zt(),(i,a)=>{const u=Pw(i,a,n.serverSyncTree_,e);Mc(t,i,u)});let r=[];pu(t,Zt(),(i,a)=>{r=r.concat(lm(n.serverSyncTree_,i,a));const u=pp(n,i);uh(n,u)}),n.onDisconnect_=fu(),Bs(n.eventQueue_,Zt(),r)}(n)}function Tm(n,e,t){const r=new rn("/.info/"+e),i=_n(t);n.infoData_.updateSnapshot(r,i);const a=lm(n.infoSyncTree_,r,i);Bs(n.eventQueue_,r,a)}function Im(n){return n.nextWriteId_++}function dp(n,e,t,r,i){ah(n,"set",{path:e.toString(),value:t,priority:r});const a=jc(n),u=_n(t,r),p=dm(n.serverSyncTree_,e),_=ym(u,p,a),w=Im(n),T=Mw(n.serverSyncTree_,e,_,w,!0);Em(n.eventQueue_,T),n.server_.put(e.toString(),u.val(!0),(x,V)=>{const z="ok"===x;z||Rr("set at "+e+" failed: "+x);const oe=Lc(n.serverSyncTree_,w,!z);Bs(n.eventQueue_,e,oe),Gc(0,i,x,V)});const A=pp(n,e);uh(n,A),Bs(n.eventQueue_,A,[])}function Kw(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&hr(n.onDisconnect_,e),Gc(0,t,r,i)})}function yv(n,e,t,r){const i=_n(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&Mc(n.onDisconnect_,e,i),Gc(0,r,a,u)})}function Wo(n,e,t){let r;r=".info"===bt(e._path)?um(n.infoSyncTree_,e,t):um(n.serverSyncTree_,e,t),$w(n.eventQueue_,e._path,r)}function hp(n){n.persistentConnection_&&n.persistentConnection_.interrupt(qw)}function ah(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Nn(t,...e)}function Gc(n,e,t,r){e&&Fs(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function Sm(n,e,t){return dm(n.serverSyncTree_,e,t)||vt.EMPTY_NODE}function lh(n,e=n.transactionQueueTree_){if(e||Am(n,e),Uc(e)){const t=Dv(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function fp(n,e,t){const r=t.map(w=>w.currentWriteId),i=Sm(n,e,r);let a=i;const u=i.hash();for(let w=0;w<t.length;w++){const T=t[w];(0,k.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const A=ai(e,T.path);a=a.updateChild(A,T.currentOutputSnapshotRaw)}const p=a.val(!0),_=e;n.server_.put(_.toString(),p,w=>{ah(n,"transaction put response",{path:_.toString(),status:w});let T=[];if("ok"===w){const A=[];for(let x=0;x<t.length;x++)t[x].status=2,T=T.concat(Lc(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&A.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();Am(n,sp(n.transactionQueueTree_,e)),lh(n,n.transactionQueueTree_),Bs(n.eventQueue_,e,T);for(let x=0;x<A.length;x++)Fs(A[x])}else{if("datastale"===w)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{Rr("transaction at "+_.toString()+" failed: "+w);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=w}uh(n,e)}},u)}(n,wm(e),t)}else Lw(e)&&Ti(e,t=>{lh(n,t)})}function uh(n,e){const t=wv(n,e),r=wm(t);return function bv(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const _=e[p],w=ai(t,_.path);let A,T=!1;if((0,k.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)T=!0,A=_.abortReason,i=i.concat(Lc(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)T=!0,A="maxretry",i=i.concat(Lc(n.serverSyncTree_,_.currentWriteId,!0));else{const x=Sm(n,_.path,u);_.currentInputSnapshot=x;const V=e[p].update(x.val());if(void 0!==V){up("transaction failed: Data returned ",V,_.path);let z=_n(V);"object"==typeof V&&null!=V&&(0,k.r3)(V,".priority")||(z=z.updatePriority(x.getPriority()));const xe=_.currentWriteId,ct=jc(n),dt=ym(z,x,ct);_.currentOutputSnapshotRaw=z,_.currentOutputSnapshotResolved=dt,_.currentWriteId=Im(n),u.splice(u.indexOf(xe),1),i=i.concat(Mw(n.serverSyncTree_,_.path,dt,_.currentWriteId,_.applyLocally)),i=i.concat(Lc(n.serverSyncTree_,xe,!0))}else T=!0,A="nodata",i=i.concat(Lc(n.serverSyncTree_,_.currentWriteId,!0))}Bs(n.eventQueue_,t,i),i=[],T&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===A?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(A),!1,null)))}Am(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)Fs(r[p]);lh(n,n.transactionQueueTree_)}(n,Dv(n,t),r),r}function wv(n,e){let t,r=n.transactionQueueTree_;for(t=bt(e);null!==t&&void 0===Uc(r);)r=sp(r,t),t=bt(e=gn(e));return r}function Dv(n,e){const t=[];return Ev(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Ev(n,e,t){const r=Uc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Ti(e,i=>{Ev(n,i,t)})}function Am(n,e){const t=Uc(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,bm(e,t.length>0?t:void 0)}Ti(e,r=>{Am(n,r)})}function pp(n,e){const t=wm(wv(n,e)),r=sp(n.transactionQueueTree_,e);return function k1(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Cv(n,i)}),Cv(n,r),Vw(r,i=>{Cv(n,i)}),t}function Cv(n,e){const t=Uc(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,k.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,k.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Lc(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?bm(e,void 0):t.length=a+1,Bs(n.eventQueue_,wm(e),i);for(let u=0;u<r.length;u++)Fs(r[u])}}const Du=function(n,e){const t=Xw(n),r=t.namespace;return"firebase.com"===t.domain&&ks(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ks("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Rr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Vo(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new rn(t.pathString)}},Xw=function(n){let e="",t="",r="",i="",a="",u=!0,p="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(p=n.substring(0,w-1),n=n.substring(w+2));let T=n.indexOf("/");-1===T&&(T=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(T,A)),T<A&&(i=function W1(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(T,A)));const x=function Jw(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));w=e.indexOf(":"),w>=0?(u="https"===p||"wss"===p,_=parseInt(e.substring(w+1),10)):w=e.length;const V=e.slice(0,w);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const z=e.indexOf(".");r=e.substring(0,z).toLowerCase(),t=e.substring(z+1),a=r}"ns"in x&&(a=x.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:u,scheme:p,pathString:i,namespace:a}};class eD{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class tD{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Hc{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class nD{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return Kw(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){fr("OnDisconnect.remove",this._path);const e=new k.BH;return yv(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){fr("OnDisconnect.set",this._path),$o("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return yv(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){fr("OnDisconnect.setWithPriority",this._path),$o("OnDisconnect.setWithPriority",e,this._path,!1),gv("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function Zw(n,e,t,r,i){const a=_n(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,p)=>{"ok"===u&&Mc(n.onDisconnect_,e,a),Gc(0,i,u,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){fr("OnDisconnect.update",this._path),Hw("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function Yw(n,e,t,r){if((0,k.xb)(t))return Nn("onDisconnect().update() called with empty data.  Don't do anything."),void Gc(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&nn(t,(u,p)=>{const _=_n(p);Mc(n.onDisconnect_,Mn(e,u),_)}),Gc(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ys{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return xt(this._path)?null:Gg(this._path)}get ref(){return new vs(this._repo,this._path)}get _queryIdentifier(){const e=zi(this._queryParams),t=dc(e);return"{}"===t?"default":t}get _queryObject(){return zi(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof ys))return!1;const t=this._repo===e._repo,r=Pf(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function xy(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Nm(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Eu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===gs){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ps)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==tn)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===bn){if(null!=e&&!lp(e)||null!=t&&!lp(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof $f||n.getIndex()===cu,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Zi(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class vs extends ys{constructor(e,t){super(e,t,new hu,!1)}get parent(){const e=Yd(this._path);return null===e?null:new vs(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Cu{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new rn(e),r=Tu(this.ref,e);return new Cu(this._node.getChild(t),r,bn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Cu(i,Tu(this.ref,r),bn)))}hasChild(e){const t=new rn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Tv(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Tu(n._root,e):n._root}function Iv(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=Du(e,n._repo.repoInfo_.nodeAdmin);Dm("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ks("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Tv(n,t.path.toString())}function Tu(n,e){return null===bt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),oh("child","path",t,!1)):oh("child","path",e,!1),new vs(n._repo,Mn(n._path,e));var t}function Sv(n,e){n=(0,k.m9)(n),fr("set",n._path),$o("set",e,n._path,!1);const t=new k.BH;return dp(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function iD(n,e){Hw("update",e,n._path,!1);const t=new k.BH;return function oM(n,e,t,r){ah(n,"update",{path:e.toString(),value:t});let i=!0;const a=jc(n),u={};if(nn(t,(p,_)=>{i=!1,u[p]=Pw(Mn(e,p),_n(_),n.serverSyncTree_,a)}),i)Nn("update() called with empty data.  Don't do anything."),Gc(0,r,"ok",void 0);else{const p=Im(n),_=function iM(n,e,t,r){!function Pc(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Pt(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=ve.fromObject(t);return Vc(n,new Ea({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,p);Em(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,T)=>{const A="ok"===w;A||Rr("update at "+e+" failed: "+w);const x=Lc(n.serverSyncTree_,p,!A),V=x.length>0?uh(n,e):e;Bs(n.eventQueue_,V,x),Gc(0,r,w,T)}),nn(t,w=>{const T=pp(n,Mn(e,w));uh(n,T)}),Bs(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function K1(n){return function G1(n,e){const t=function bu(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,T)=>{const A=ai(w,t);r=r||bl(T,A)});let i=n.syncPointTree_.get(t);i?r=r||bl(i,Zt()):(i=new C1,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new ho(r,!0,!1):null;return function nv(n){return M(n.viewCache_)}(ov(i,e,_u(n.pendingWriteTree_,e._path),a?u.getNode():vt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=_n(r).withIndex(e._queryParams.getIndex()),a=lm(n.serverSyncTree_,e._path,i);return $w(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(ah(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new Cu(e,new vs(n._repo,n._path),n._queryParams.getIndex()))}class Mm{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new eD("value",this,new Cu(e.snapshotNode,new vs(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new tD(this,e,t):null}matches(e){return e instanceof Mm&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Av{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new tD(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Tu(new vs(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new eD(e.type,this,new Cu(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Av&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Rm(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(T,A)=>{Wo(n._repo,n,p),_(T,A)};w.userCallback=t.userCallback,w.context=t.context,t=w}const u=new Hc(t,a||void 0),p="value"===e?new Mm(u):new Av(e,u);return function Qw(n,e,t){let r;r=".info"===bt(e._path)?cm(n.infoSyncTree_,e,t):cm(n.serverSyncTree_,e,t),$w(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>Wo(n._repo,n,p)}function gp(n,e,t,r){return Rm(n,"value",e,t,r)}function sD(n,e,t,r){return Rm(n,"child_added",e,t,r)}function Nv(n,e,t,r){return Rm(n,"child_changed",e,t,r)}function Mv(n,e,t,r){return Rm(n,"child_moved",e,t,r)}function Z1(n,e,t,r){return Rm(n,"child_removed",e,t,r)}function mo(n,e,t){let r=null;const i=t?new Hc(t):null;"value"===e?r=new Mm(i):e&&(r=new Av(e,i)),Wo(n._repo,n,r)}class Ia{}class Y1 extends Ia{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$o("endAt",this._value,e._path,!0);const t=li(e._queryParams,this._value,this._key);if(Zi(t),Eu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ys(e._repo,e._path,t,e._orderByCalled)}}class aD extends Ia{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$o("endBefore",this._value,e._path,!1);const t=function Sc(n,e,t){let r,i;return n.index_===gs?("string"==typeof e&&(e=Xd(e)),i=li(n,e,t)):(r=null==t?Ps:Xd(t),i=li(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Zi(t),Eu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ys(e._repo,e._path,t,e._orderByCalled)}}class uD extends Ia{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$o("startAt",this._value,e._path,!0);const t=Zf(e._queryParams,this._value,this._key);if(Zi(t),Eu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ys(e._repo,e._path,t,e._orderByCalled)}}class cD extends Ia{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$o("startAfter",this._value,e._path,!1);const t=function eh(n,e,t){let r;if(n.index_===gs)"string"==typeof e&&(e=Jg(e)),r=Zf(n,e,t);else{let i;i=null==t?tn:Jg(t),r=Zf(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Zi(t),Eu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ys(e._repo,e._path,t,e._orderByCalled)}}class Q1 extends Ia{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ys(e._repo,e._path,function Kf(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class J1 extends Ia{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ys(e._repo,e._path,function em(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class eT extends Ia{constructor(e){super(),this._path=e}_apply(e){Nm(e,"orderByChild");const t=new rn(this._path);if(xt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new $f(t),i=Ac(e._queryParams,r);return Eu(i),new ys(e._repo,e._path,i,!0)}}class nT extends Ia{_apply(e){Nm(e,"orderByKey");const t=Ac(e._queryParams,gs);return Eu(t),new ys(e._repo,e._path,t,!0)}}class Om extends Ia{_apply(e){Nm(e,"orderByPriority");const t=Ac(e._queryParams,bn);return Eu(t),new ys(e._repo,e._path,t,!0)}}class iT extends Ia{_apply(e){Nm(e,"orderByValue");const t=Ac(e._queryParams,cu);return Eu(t),new ys(e._repo,e._path,t,!0)}}class sT extends Ia{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if($o("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Y1(this._value,this._key)._apply(new uD(this._value,this._key)._apply(e))}}function Us(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function T1(n){(0,k.hu)(!rh,"__referenceConstructor has already been defined"),rh=n})(vs),function tM(n){(0,k.hu)(!uv,"__referenceConstructor has already been defined"),uv=n}(vs);const $c={};function _p(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ks("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Nn("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,u=Du(a,i),p=u.repoInfo;"undefined"!=typeof process&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${p.namespace}`,u=Du(a,i),p=u.repoInfo):_=!u.repoInfo.secure;const T=i&&_?new ll(ll.OWNER):new Ry(n.name,n.options,e);Dm("Invalid Firebase Database URL",u),xt(u.path)||ks("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function xv(n,e,t,r){let i=$c[e.name];i||(i={},$c[e.name]=i);let a=i[n.toURLString()];return a&&ks("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new U1(n,false,t,r),i[n.toURLString()]=a,a}(p,n,T,new ao(n.name,t));return new hh(A,n)}class hh{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function j1(n,e,t){if(n.stats_=I(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Nc(n.repoInfo_,(r,i,a,u)=>{zw(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Cm(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Uo(n.repoInfo_,e,(r,i,a,u)=>{zw(n,r,i,a,u)},r=>{Cm(n,r)},r=>{!function _v(n,e){nn(e,(t,r)=>{Tm(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function O(n,e){const t=n.toString();return C[t]||(C[t]=e()),C[t]}(n.repoInfo_,()=>new th(n.stats_,n.server_)),n.infoData_=new ww,n.infoSyncTree_=new M1({startListening:(r,i,a,u)=>{let p=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(p=lm(n.infoSyncTree_,r._path,_),setTimeout(()=>{u("ok")},0)),p},stopListening:()=>{}}),Tm(n,"connected",!1),n.serverSyncTree_=new M1({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(p,_)=>{const w=u(p,_);Bs(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vs(this._repo,Zt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function _o(n,e){const t=$c[e];(!t||t[n.key]!==n)&&ks(`Database ${e}(${n.repoInfo_}) has already been deleted.`),hp(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ks("Cannot call "+e+" on a deleted database.")}}function mh(n,e){on(n,e)}const yh={".sv":"timestamp"};class fD{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Uo.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Uo.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function _h(n){ko(Mr.SDK_VERSION),(0,Mr._registerComponent)(new Wi.wA("database",(e,{instanceIdentifier:t})=>_p(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Mr.registerVersion)(Kl,"0.12.5",n),(0,Mr.registerVersion)(Kl,"0.12.5","esm2017")}();const _D=new hn.Yd("@firebase/database-compat"),yD=function(n){_D.warn("FIREBASE WARNING: "+n)};class bD{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,yD("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class wD{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Iu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),oh("DataSnapshot.child","path",e,!1),new Iu(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),oh("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Iu(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new bs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class di{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const u=di.getCancelAndContextArgs_("Query.on",r,i),p=(w,T)=>{t.call(u.context,new Iu(this.database,w),T)};p.userCallback=t,p.context=u.context;const _=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return gp(this._delegate,p,_),t;case"child_added":return sD(this._delegate,p,_),t;case"child_removed":return Z1(this._delegate,p,_),t;case"child_changed":return Nv(this._delegate,p,_),t;case"child_moved":return Mv(this._delegate,p,_),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,mo(this._delegate,e,i)}else mo(this._delegate,e)}get(){return K1(this._delegate).then(e=>new Iu(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=di.getCancelAndContextArgs_("Query.once",r,i),u=new k.BH,p=(w,T)=>{const A=new Iu(this.database,w);t&&t.call(a.context,A,T),u.resolve(A)};p.userCallback=t,p.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),u.reject(w)};switch(e){case"value":gp(this._delegate,p,_,{onlyOnce:!0});break;case"child_added":sD(this._delegate,p,_,{onlyOnce:!0});break;case"child_removed":Z1(this._delegate,p,_,{onlyOnce:!0});break;case"child_changed":Nv(this._delegate,p,_,{onlyOnce:!0});break;case"child_moved":Mv(this._delegate,p,_,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new di(this.database,Us(this._delegate,function Ov(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Q1(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new di(this.database,Us(this._delegate,function X1(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new J1(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new di(this.database,Us(this._delegate,function tT(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return oh("orderByChild","path",n,!1),new eT(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new di(this.database,Us(this._delegate,function rT(){return new nT}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new di(this.database,Us(this._delegate,function ch(){return new Om}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new di(this.database,Us(this._delegate,function mp(){return new iT}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new di(this.database,Us(this._delegate,function uM(n=null,e){return sh("startAt","key",e,!0),new uD(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new di(this.database,Us(this._delegate,function Rv(n,e){return sh("startAfter","key",e,!0),new cD(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new di(this.database,Us(this._delegate,function oD(n,e){return sh("endAt","key",e,!0),new Y1(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new di(this.database,Us(this._delegate,function lD(n,e){return sh("endBefore","key",e,!0),new aD(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new di(this.database,Us(this._delegate,function oT(n,e){return sh("equalTo","key",e,!0),new sT(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof di))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new bs(this.database,new vs(this._delegate._repo,this._delegate._path))}}class bs extends di{constructor(e,t){super(e,new ys(t._repo,t._path,new hu,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new bs(this.database,Tu(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new bs(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new bs(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=Sv(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,yD("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fr("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=iD(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function lM(n,e,t){if(fr("setWithPriority",n._path),$o("setWithPriority",e,n._path,!1),gv("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return dp(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function z1(n){return fr("remove",n._path),Sv(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function pD(n,e,t){var r;if(n=(0,k.m9)(n),fr("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,p=gp(n,()=>{});return function vv(n,e,t,r,i,a){ah(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:uc(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=Sm(n,e,void 0);u.currentInputSnapshot=p;const _=u.update(p.val());if(void 0===_)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{up("transaction failed: Data returned ",_,u.path),u.status=0;const w=sp(n.transactionQueueTree_,e),T=Uc(w)||[];let A;T.push(u),bm(w,T),"object"==typeof _&&null!==_&&(0,k.r3)(_,".priority")?(A=(0,k.DV)(_,".priority"),(0,k.hu)(lp(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(dm(n.serverSyncTree_,e)||vt.EMPTY_NODE).getPriority().val();const x=jc(n),V=_n(_,A),z=ym(V,p,x);u.currentOutputSnapshotRaw=V,u.currentOutputSnapshotResolved=z,u.currentWriteId=Im(n);const oe=Mw(n.serverSyncTree_,e,z,u.currentWriteId,u.applyLocally);Bs(n.eventQueue_,e,oe),lh(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,T)=>{let A=null;_?a.reject(_):(A=new Cu(T,new vs(n._repo,n._path),bn),a.resolve(new fD(w,A)))},p,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new wD(a.committed,new Iu(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function rD(n,e){n=(0,k.m9)(n),fr("setPriority",n._path),gv("setPriority",e,!1);const t=new k.BH;return dp(n._repo,Mn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function q1(n,e){n=(0,k.m9)(n),fr("push",n._path),$o("push",e,n._path,!0);const t=cp(n._repo),r=Uy(t),i=Tu(n,r),a=Tu(n,r);let u;return u=null!=e?Sv(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new bs(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new bs(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return fr("Reference.onDisconnect",this._delegate._path),new bD(new nD(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class vp{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function fh(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ks("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ks('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new ll(ll.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new ll(u)}!function Wc(n,e,t,r){n.repoInfo_=new Vo(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof bs){const t=Iv(this._delegate,e.toString());return new bs(this,t)}{const t=Tv(this._delegate,e);return new bs(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=Iv(this._delegate,e);return new bs(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function ph(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),hp(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function gh(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function $1(n){n.persistentConnection_&&n.persistentConnection_.resume(qw)}(n._repo)}(this._delegate)}}vp.ServerValue={TIMESTAMP:function dD(){return yh}(),increment:n=>function hD(n){return{".sv":{increment:n}}}(n)};var cT=Object.freeze({__proto__:null,initStandalone:function DD({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){ko(t);const u=new Wi.zt("auth-internal",new Wi.H0("database-standalone"));return u.setComponent(new Wi.wA("auth-internal",()=>r,"PRIVATE")),{instance:new vp(_p(n,u,void 0,e,a),n),namespace:i}}});const dT=vp.ServerValue;!function cM(n){n.INTERNAL.registerComponent(new Wi.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new vp(i,r)},"PUBLIC").setServiceProps({Reference:bs,Query:di,Database:vp,DataSnapshot:Iu,enableLogging:mh,INTERNAL:cT,ServerValue:dT}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(zl.Z);var pr=P(7579),vh=P(5363),kv=P(6063);class hT extends pr.x{constructor(e=1/0,t=1/0,r=kv.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=u;_+=2)p=_;p&&r.splice(0,p+1)}}}function fT(n,e,t){var r,i;let a,u=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,u=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,ac.B)({connector:()=>new hT(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}const Pv=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ii(n,e){return(0,rr.e)((t,r)=>{let i=0;t.subscribe(new Kt.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Yi=P(5698);function pT(n){return(0,rr.e)((e,t)=>{let r=!1;e.subscribe(new Kt.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ED(n=bh){return(0,rr.e)((e,t)=>{let r=!1;e.subscribe(new Kt.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function bh(){return new Pv}function qc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ii((i,a)=>n(i,a,r)):us.y,(0,Yi.q)(1),t?pT(e):ED(()=>new Pv))}var Aa=P(576);function CD(n,e){return(0,Aa.m)(e)?Sn(()=>n,e):Sn(()=>n)}var xm=P(9468);P(5867);const Lv=new Map,Vv={activated:!1,tokenObservers:[]},Bv={initialized:!1,enabled:!1};function Zr(n){return Lv.get(n)||Vv}function js(n,e){Lv.set(n,e)}function wh(){return Bv}class MD{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function jv(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Si=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Gv(n){if(!Zr(n).activated)throw Si.create("use-before-activation",{appName:n.name})}function Dp(n,e){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,fe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:r};let u,p;try{u=yield fetch(n,a)}catch(A){throw Si.create("fetch-network-error",{originalErrorMessage:A.message})}if(200!==u.status)throw Si.create("fetch-status-error",{httpStatus:u.status});try{p=yield u.json()}catch(A){throw Si.create("fetch-parse-error",{originalErrorMessage:A.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Si.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const w=1e3*Number(_[1]),T=Date.now();return{token:p.attestationToken,expireTimeMillis:T+w,issuedAtTimeMillis:T}})).apply(this,arguments)}function xD(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Eh="firebase-app-check-store";let Ep=null;function Wv(){return Ep||(Ep=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Si.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Eh,{keyPath:"compositeKey"})}}catch(t){e(Si.create("storage-open",{originalErrorMessage:t.message}))}}),Ep)}function qv(){return(qv=(0,fe.Z)(function*(n,e){const r=(yield Wv()).transaction(Eh,"readwrite"),a=r.objectStore(Eh).put({compositeKey:n,value:e});return new Promise((u,p)=>{a.onsuccess=_=>{u()},r.onerror=_=>{var w;p(Si.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Hn=new hn.Yd("@firebase/app-check");function jD(n,e){return(0,k.hl)()?function PD(n,e){return function ET(n,e){return qv.apply(this,arguments)}(function BD(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Hn.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Zv(){return wh().enabled}function Yv(){return Su.apply(this,arguments)}function Su(){return(Su=(0,fe.Z)(function*(){const n=wh();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const TT={error:"UNKNOWN_ERROR"};function HD(n){return k.US.encodeString(JSON.stringify(n),!1)}function jm(n){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,fe.Z)(function*(n,e=!1){const t=n.app;Gv(t);const r=Zr(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Tp(_)&&(i=_)}if(!e&&i&&Tp(i))return{token:i.token};let p,u=!1;if(Zv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Dp(xD(t,yield Yv()),n.platformLoggerProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),u=!0);const _=yield r.exchangeTokenPromise;return yield jD(t,_),js(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),u=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Hn.warn(_.message):Hn.error(_),a=_}return i?(p={token:i.token},js(t,Object.assign(Object.assign({},r),{token:i})),yield jD(t,i)):p=Ma(a),u&&WD(t,p),p})).apply(this,arguments)}function Cp(n,e){const t=Zr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),js(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Hm(n){const{app:e}=n,t=Zr(e);let r=t.tokenRefresher;r||(r=function Na(n){const{app:e}=n;return new MD((0,fe.Z)(function*(){let r;if(r=Zr(e).token?yield jm(n,!0):yield jm(n),r.error)throw r.error}),()=>!0,()=>{const t=Zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),js(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function WD(n,e){const t=Zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Tp(n){return n.expireTimeMillis-Date.now()>0}function Ma(n){return{token:HD(TT),error:n}}class qo{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Zr(this.app);for(const t of e)Cp(this.app,t.next);return Promise.resolve()}}const r0="app-check-internal";!function kT(){(0,Mr._registerComponent)(new Wi.wA("app-check",n=>function zo(n,e){return new qo(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(r0).initialize()})),(0,Mr._registerComponent)(new Wi.wA(r0,n=>function qD(n){return{getToken:e=>jm(n,e),addTokenListener:e=>function $D(n,e,t,r){const{app:i}=n,a=Zr(i),u={next:t,error:r,type:e};if(js(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&Tp(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),Hm(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Hm(n))}(n,"INTERNAL",e),removeTokenListener:e=>Cp(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Mr.registerVersion)("@firebase/app-check","0.5.3")}();class qm{constructor(){return(0,en.vb)("app-check")}}"undefined"!=typeof window&&window;var zm=P(127);const Km=new d.OlP("angularfire2.auth.use-emulator"),Zm=new d.OlP("angularfire2.auth.settings"),Ym=new d.OlP("angularfire2.auth.tenant-id"),Qm=new d.OlP("angularfire2.auth.langugage-code"),Jm=new d.OlP("angularfire2.auth.use-device-language"),Xm=new d.OlP("angularfire.auth.persistence"),Sp=(n,e,t,r,i,a,u,p)=>(0,br.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),u)for(const[w,T]of Object.entries(u))_.settings[w]=T;return p&&_.setPersistence(p),_},[t,r,i,a,u,p]);let Ap=(()=>{class n{constructor(t,r,i,a,u,p,_,w,T,A,x,V){const z=new pr.x,oe=at(void 0).pipe((0,vh.Q)(u.outsideAngular),Sn(()=>a.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,5735)))),(0,it.U)(()=>(0,br.on)(t,a,r)),(0,it.U)(xe=>Sp(xe,a,p,w,T,A,_,x)),fT({bufferSize:1,refCount:!1}));if(Wa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{oe.pipe(qc()).subscribe();const ct=oe.pipe(Sn(Rt=>Rt.getRedirectResult().then(yn=>yn,()=>null)),en.iC,fT({bufferSize:1,refCount:!1})),dt=oe.pipe(Sn(Rt=>new Lt.y(yn=>({unsubscribe:a.runOutsideAngular(()=>Rt.onAuthStateChanged(wo=>yn.next(wo),wo=>yn.error(wo),()=>yn.complete()))})))),Wt=oe.pipe(Sn(Rt=>new Lt.y(yn=>({unsubscribe:a.runOutsideAngular(()=>Rt.onIdTokenChanged(wo=>yn.next(wo),wo=>yn.error(wo),()=>yn.complete()))}))));this.authState=ct.pipe(CD(dt),(0,xm.R)(u.outsideAngular),(0,vh.Q)(u.insideAngular)),this.user=ct.pipe(CD(Wt),(0,xm.R)(u.outsideAngular),(0,vh.Q)(u.insideAngular)),this.idToken=this.user.pipe(Sn(Rt=>Rt?(0,In.D)(Rt.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(Sn(Rt=>Rt?(0,In.D)(Rt.getIdTokenResult()):at(null))),this.credential=(0,oc.T)(ct,z,this.authState.pipe(Ii(Rt=>!Rt))).pipe((0,it.U)(Rt=>(null==Rt?void 0:Rt.user)?Rt:null),(0,xm.R)(u.outsideAngular),(0,vh.Q)(u.insideAngular))}return(0,br.pX)(this,oe,a,{spy:{apply:(xe,ct,dt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&dt.then(Wt=>z.next(Wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(br.Dh),d.LFG(br.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(en.HU),d.LFG(Km,8),d.LFG(Zm,8),d.LFG(Ym,8),d.LFG(Qm,8),d.LFG(Jm,8),d.LFG(Xm,8),d.LFG(qm,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zc=(()=>{class n{constructor(){zm.Z.registerVersion("angularfire",en.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Ap]}),n})();function Kc(n){return null==n}function GT(n){return"function"==typeof n.set}function e_(n,e){return GT(e)?e:n.ref(e)}function HT(n,e){if(function UT(n){return"string"==typeof n}(n))return e.stringCase();if(GT(n))return e.firebaseCase();if(function jT(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Ch(n,e,t="on",r=fa.z){return new Lt.y(i=>{let a=null;return a=n[t](e,(u,p)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,it.U)(i=>{const{snapshot:a,prevKey:u}=i;let p=null;return a.exists()&&(p=a.key),{type:e,payload:a,prevKey:u,key:p}}),(0,ac.B)())}function $T(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function WT(n,e){const{payload:t,prevKey:r,key:i}=e,a=$T(n,i),u=function yt(n,e){if(Kc(e))return 0;{const t=$T(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:p,key:_.key};return p=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const p=n[a-1];(p&&p.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(a>-1){const p=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,p),n}return n;default:return n}}function rE(n){return(Kc(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function iE(n,e,t){return function nE(n,e,t){return Ch(n,"value","once",t).pipe(Sn(r=>{const i=[at(r)];return e.forEach(a=>i.push(Ch(n,a,"on",t))),(0,oc.T)(...i).pipe(Ro(WT,[]))}),Oo())}(n,e=rE(e),t)}function Np(n,e,t){const r=(e=rE(e)).map(i=>Ch(n,i,"on",t));return(0,oc.T)(...r)}function $n(n,e){return function(r,i){return HT(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function IM(n){return function(t){return t?HT(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function oE(n,e){return function(){return Ch(n,"value","on",e)}}const aE=new d.OlP("angularfire2.realtimeDatabaseURL"),lE=new d.OlP("angularfire2.database.use-emulator");let uE=(()=>{class n{constructor(t,r,i,a,u,p,_,w,T,A,x,V,z,oe,xe){this.schedulers=p;const ct=_,dt=(0,br.on)(t,u,r);w&&Sp(dt,u,T,x,V,z,A,oe),this.database=(0,br.cc)(`${dt.name}.database.${i}`,"AngularFireDatabase",dt.name,()=>{const Wt=u.runOutsideAngular(()=>dt.database(i||void 0));return ct&&Wt.useEmulator(...ct),Wt},[ct])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>e_(this.database,t));let a=i;return r&&(a=r(i)),function sE(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:$n(r,"update"),set:$n(r,"set"),push:i=>r.push(i),remove:IM(r),snapshotChanges:i=>iE(n,i,t).pipe(en.iC),stateChanges:i=>Np(n,i,t).pipe(en.iC),auditTrail:i=>function qT(n,e,t){return function n_(n,e,t){return function t_(n,e){return Ch(n,"value","on",e).pipe((0,it.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(xo(e),(0,it.U)(([i,a])=>{const u=i.lastKeyToLoad,p=a.map(_=>_.key);return{actions:a,lastKeyToLoad:u,loadedKeys:p}}),function pa(n){return(0,rr.e)((e,t)=>{let r=!1,i=0;e.subscribe(new Kt.Q(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,it.U)(i=>i.actions))}(n,Np(n,e).pipe(Ro((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(en.iC),valueChanges:(i,a)=>iE(n,i,t).pipe((0,it.U)(p=>p.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),en.iC)}}(a,this)}object(t){return function zT(n,e){return{query:n,snapshotChanges:()=>oE(n,e.schedulers.outsideAngular)().pipe(en.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>oE(n,e.schedulers.outsideAngular)().pipe(en.iC,(0,it.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>e_(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(br.Dh),d.LFG(br.xv,8),d.LFG(aE,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(en.HU),d.LFG(lE,8),d.LFG(Ap,8),d.LFG(Km,8),d.LFG(Zm,8),d.LFG(Ym,8),d.LFG(Qm,8),d.LFG(Jm,8),d.LFG(Xm,8),d.LFG(qm,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),cE=(()=>{class n{constructor(){zm.Z.registerVersion("angularfire",en.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[uE]}),n})();var r_=P(8189);function Mp(...n){return function KT(){return(0,r_.J)(1)}()((0,In.D)(n,(0,io.yG)(n)))}function Ko(...n){const e=(0,io.yG)(n);return(0,rr.e)((t,r)=>{(e?Mp(n,t,e):Mp(n,t)).subscribe(r)})}function a0(){return(0,rr.e)((n,e)=>{let t,r=!1;n.subscribe(new Kt.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Qe,ZT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wl={},i_=i_||{},Et=ZT||self;function Rp(){}function l0(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Dl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var u0="closure_uid_"+(1e9*Math.random()>>>0),YT=0;function QT(n,e,t){return n.call.apply(n.bind,arguments)}function dE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Yr(n,e,t){return(Yr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?QT:dE).apply(null,arguments)}function xp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function hi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),p=2;p<arguments.length;p++)u[p-2]=arguments[p];return e.prototype[i].apply(r,u)}}function El(){this.s=this.s,this.o=this.o}var XT={};El.prototype.s=!1,El.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Op(n){return Object.prototype.hasOwnProperty.call(n,u0)&&n[u0]||(n[u0]=++YT)}(this);delete XT[n]}},El.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const eI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},tI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function nI(n){return Array.prototype.concat.apply([],arguments)}function s_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Zc(n){return/^[\s\xa0]*$/.test(n)}var xr,hE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Qi(n,e){return-1!=n.indexOf(e)}function o_(n,e){return n<e?-1:n>e?1:0}e:{var fE=Et.navigator;if(fE){var pE=fE.userAgent;if(pE){xr=pE;break e}}xr=""}function c0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function gE(n){const e={};for(const t in n)e[t]=n[t];return e}var mE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function d0(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<mE.length;a++)t=mE[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function h0(n){return h0[" "](n),n}h0[" "]=Rp;var a_,n,Th=Qi(xr,"Opera"),Ih=Qi(xr,"Trident")||Qi(xr,"MSIE"),f0=Qi(xr,"Edge"),p0=f0||Ih,g0=Qi(xr,"Gecko")&&!(Qi(xr.toLowerCase(),"webkit")&&!Qi(xr,"Edge"))&&!(Qi(xr,"Trident")||Qi(xr,"MSIE"))&&!Qi(xr,"Edge"),iI=Qi(xr.toLowerCase(),"webkit")&&!Qi(xr,"Edge");function m0(){var n=Et.document;return n?n.documentMode:void 0}e:{var kp="",_0=(n=xr,g0?/rv:([^\);]+)(\)|;)/.exec(n):f0?/Edge\/([\d\.]+)/.exec(n):Ih?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):iI?/WebKit\/(\S+)/.exec(n):Th?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(_0&&(kp=_0?_0[1]:""),Ih){var l_=m0();if(null!=l_&&l_>parseFloat(kp)){a_=String(l_);break e}}a_=kp}var _E={};var v0=Et.document&&Ih&&(m0()||parseInt(a_,10))||void 0,oI=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",Rp,e),Et.removeEventListener("test",Rp,e)}catch(t){}return n}();function fi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Pp(n,e){if(fi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(g0){e:{try{h0(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:aI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pp.Z.h.call(this)}}fi.prototype.h=function(){this.defaultPrevented=!0},hi(Pp,fi);var aI={2:"touch",3:"pen",4:"mouse"};Pp.prototype.h=function(){Pp.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fp="closure_listenable_"+(1e6*Math.random()|0),lI=0;function uI(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++lI,this.ca=this.fa=!1}function u_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function c_(n){this.src=n,this.g={},this.h=0}function b0(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=eI(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(u_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function d_(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}c_.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=d_(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new uI(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var h_="closure_lm_"+(1e6*Math.random()|0),f_={};function vE(n,e,t,r,i){if(r&&r.once)return wE(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)vE(n,e[a],t,r,i);return null}return t=D0(t),n&&n[Fp]?n.N(e,t,Dl(r)?!!r.capture:!!r,i):p_(n,e,t,!1,r,i)}function p_(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=Dl(i)?!!i.capture:!!i,p=Vp(n);if(p||(n[h_]=p=new c_(n)),(t=p.add(e,t,r,u,a)).proxy)return t;if(r=function bE(){var e=EE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)oI||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(g_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function wE(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)wE(n,e[a],t,r,i);return null}return t=D0(t),n&&n[Fp]?n.O(e,t,Dl(r)?!!r.capture:!!r,i):p_(n,e,t,!0,r,i)}function DE(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)DE(n,e[a],t,r,i);else r=Dl(r)?!!r.capture:!!r,t=D0(t),n&&n[Fp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=d_(a=n.g[e],t,r,i))&&(u_(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Vp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=d_(e,t,r,i)),(t=-1<n?e[n]:null)&&Lp(t))}function Lp(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Fp])b0(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(g_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Vp(e))?(b0(t,n),0==t.h&&(t.src=null,e[h_]=null)):u_(n)}}}function g_(n){return n in f_?f_[n]:f_[n]="on"+n}function EE(n,e){if(n.ca)n=!0;else{e=new Pp(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Lp(n),n=t.call(r,e)}return n}function Vp(n){return(n=n[h_])instanceof c_?n:null}var w0="__closure_events_fn_"+(1e9*Math.random()>>>0);function D0(n){return"function"==typeof n?n:(n[w0]||(n[w0]=function(e){return n.handleEvent(e)}),n[w0])}function Er(){El.call(this),this.i=new c_(this),this.P=this,this.I=null}function pi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new fi(e,n);else if(e instanceof fi)e.target=e.target||n;else{var i=e;d0(e=new fi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=Bp(u,r,!0,e)&&i}if(i=Bp(u=e.g=n,r,!0,e)&&i,i=Bp(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Bp(u=e.g=t[a],r,!1,e)&&i}function Bp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var p=u.listener,_=u.ia||u.src;u.fa&&b0(n.i,u),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}hi(Er,El),Er.prototype[Fp]=!0,Er.prototype.removeEventListener=function(n,e,t,r){DE(this,n,e,t,r)},Er.prototype.M=function(){if(Er.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)u_(t[r]);delete n.g[e],n.h--}}this.I=null},Er.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Er.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var E0=Et.JSON.stringify;function CE(){var n=TE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var T0,C0=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new AM,n=>n.reset());class AM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function dI(n){Et.setTimeout(()=>{throw n},0)}function Yc(n,e){T0||function Sh(){var n=Et.Promise.resolve(void 0);T0=function(){n.then(NM)}}(),Qc||(T0(),Qc=!0),TE.add(n,e)}var Qc=!1,TE=new class cI{constructor(){this.h=this.g=null}add(e,t){const r=C0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function NM(){for(var n;n=CE();){try{n.h.call(n.g)}catch(t){dI(t)}var e=C0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Qc=!1}function Up(n,e){Er.call(this),this.h=n||1,this.g=e||Et,this.j=Yr(this.kb,this),this.l=Date.now()}function I0(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function S0(n,e,t){if("function"==typeof n)t&&(n=Yr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function IE(n){n.g=S0(()=>{n.g=null,n.i&&(n.i=!1,IE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}hi(Up,Er),(Qe=Up.prototype).da=!1,Qe.S=null,Qe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),pi(this,"tick"),this.da&&(I0(this),this.start()))}},Qe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qe.M=function(){Up.Z.M.call(this),I0(this),delete this.g};class hI extends El{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:IE(this)}M(){super.M(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ah(n){El.call(this),this.h=n,this.g={}}hi(Ah,El);var A0=[];function m_(n,e,t,r){Array.isArray(t)||(t&&(A0[0]=t.toString()),t=A0);for(var i=0;i<t.length;i++){var a=vE(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function jp(n){c0(n.g,function(e,t){this.g.hasOwnProperty(t)&&Lp(e)},n),n.g={}}function Nu(){this.g=!0}function Jc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function gI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return E0(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Ah.prototype.M=function(){Ah.Z.M.call(this),jp(this)},Ah.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nu.prototype.Aa=function(){this.g=!1},Nu.prototype.info=function(){};var Xc={},__=null;function y_(){return __=__||new Er}function mI(n){fi.call(this,Xc.Ma,n)}function Gp(n){const e=y_();pi(e,new mI(e,n))}function AE(n,e){fi.call(this,Xc.STAT_EVENT,n),this.stat=e}function Cr(n){const e=y_();pi(e,new AE(e,n))}function N0(n,e){fi.call(this,Xc.Na,n),this.size=e}function Ra(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}Xc.Ma="serverreachability",hi(mI,fi),Xc.STAT_EVENT="statevent",hi(AE,fi),Xc.Na="timingevent",hi(N0,fi);var M0={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},R0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function O0(){}function x0(){}O0.prototype.h=null;var k0,v_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function b_(){fi.call(this,"d")}function Hp(){fi.call(this,"c")}function $p(){}function Nh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ah(this),this.P=yI,this.W=new Up(n=p0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new P0}function P0(){this.i=null,this.g="",this.h=!1}hi(b_,fi),hi(Hp,fi),hi($p,O0),$p.prototype.g=function(){return new XMLHttpRequest},$p.prototype.i=function(){return{}},k0=new $p;var yI=45e3,F0={},w_={};function L0(n,e,t){n.K=1,n.v=E_(Qr(e)),n.s=t,n.U=!0,NE(n,null)}function NE(n,e){n.F=Date.now(),Rh(n),n.A=Qr(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),A_(t.h,"t",r),n.C=0,t=n.l.H,n.h=new P0,n.g=$E(n.l,t?e:null,!n.s),0<n.O&&(n.L=new hI(Yr(n.Ia,n,n.g),n.O)),m_(n.V,n.g,"readystatechange",n.gb),e=n.H?gE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Gp(1),function fI(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",p=a.split("&"),_=0;_<p.length;_++){var w=p[_].split("=");if(1<w.length){var T=w[0];w=w[1];var A=T.split("_");u=2<=A.length&&"type"==A[1]?u+(T+"=")+w+"&":u+(T+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function ME(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Mh(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=RE(n,t),i==w_){4==e&&(n.o=4,Cr(14),r=!1),Jc(n.j,n.m,null,"[Incomplete Response]");break}if(i==F0){n.o=4,Cr(15),Jc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Jc(n.j,n.m,i,null),B0(n,i)}ME(n)&&i!=w_&&i!=F0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Cr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),nb(e),e.L=!0,Cr(11))):(Jc(n.j,n.m,t,"[Invalid Chunked Response]"),ed(n),Oh(n))}function RE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?w_:(t=Number(e.substring(t,r)),isNaN(t)?F0:(r+=1)+t>e.length?w_:(e=e.substr(r,t),n.C=r+t,e))}function Rh(n){n.Y=Date.now()+n.P,V0(n,n.P)}function V0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ra(Yr(n.eb,n),e)}function Wp(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function Oh(n){0==n.l.G||n.I||HE(n.l,n)}function ed(n){Wp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,I0(n.W),jp(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function B0(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||M_(t.i,n)))if(t.I=n.N,!n.J&&M_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ra(Yr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Qp(t),Lh(t)}B_(t),Cr(18)}if(1>=N_(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else Pu(t,11)}else if((n.J||t.g==n)&&Qp(t),!Zc(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const T=w[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const A=w[4];null!=A&&(t.za=A,t.h.info("SVER="+t.za));const x=w[5];null!=x&&"number"==typeof x&&0<x&&(t.K=r=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const z=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var a=r.i;!a.g&&(Qi(z,"spdy")||Qi(z,"quic")||Qi(z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(R_(a,a.h),a.h=null))}if(r.D){const oe=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;oe&&(r.sa=oe,Fn(r.F,r.D,oe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=sb(r,r.H?r.la:null,r.W),u.J){q0(r.i,u);var p=u,_=r.K;_&&p.setTimeout(_),p.B&&(Wp(p),Rh(p)),r.g=u}else tb(r);0<t.l.length&&V_(t)}else"stop"!=w[0]&&"close"!=w[0]||Pu(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Pu(t,7):X0(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}Gp(4)}catch(w){}}function U0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(l0(n)||"string"==typeof n)tI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(l0(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function vI(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(l0(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function xh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof xh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function j0(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];td(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)td(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function td(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Qe=Nh.prototype).setTimeout=function(n){this.P=n},Qe.gb=function(n){n=n.target;const e=this.L;e&&3==xu(n)?e.l():this.Ia(n)},Qe.Ia=function(n){try{if(n==this.g)e:{const T=xu(this.g);var e=this.g.Da();const A=this.g.ba();if(!(3>T)&&(3!=T||p0||this.g&&(this.h.h||this.g.ga()||Q0(this.g)))){this.I||4!=T||7==e||Gp(8==e||0>=A?3:2),Wp(this);var t=this.g.ba();this.N=t;t:if(ME(this)){var r=Q0(this.g);n="";var i=r.length,a=4==xu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ed(this),Oh(this);var u="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function SE(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zc(p)){var w=p;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Cr(12),ed(this),Oh(this);break e}Jc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,B0(this,t)}this.U?(Mh(this,T,u),p0&&this.i&&3==T&&(m_(this.V,this.W,"tick",this.fb),this.W.start())):(Jc(this.j,this.m,u,null),B0(this,u)),4==T&&ed(this),this.i&&!this.I&&(4==T?HE(this.l,this):(this.i=!1,Rh(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Cr(12)):(this.o=0,Cr(13)),ed(this),Oh(this)}}}catch(T){}},Qe.fb=function(){if(this.g){var n=xu(this.g),e=this.g.ga();this.C<e.length&&(Wp(this),Mh(this,n,e),this.i&&4!=n&&Rh(this))}},Qe.cancel=function(){this.I=!0,ed(this)},Qe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function pI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Gp(3),Cr(17)),ed(this),this.o=2,Oh(this)):V0(this,this.Y-n)},(Qe=xh.prototype).R=function(){j0(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Qe.T=function(){return j0(this),this.g.concat()},Qe.get=function(n,e){return td(this.h,n)?this.h[n]:e},Qe.set=function(n,e){td(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Qe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var kh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Cl){this.g=void 0!==e?e:n.g,D_(this,n.j),this.s=n.s,Ph(this,n.i),Mu(this,n.m),this.l=n.l,e=n.h;var t=new I_;t.i=e.i,e.g&&(t.g=new xh(e.g),t.h=e.h),OE(this,t),this.o=n.o}else n&&(t=String(n).match(kh))?(this.g=!!e,D_(this,t[1]||"",!0),this.s=qp(t[2]||""),Ph(this,t[3]||"",!0),Mu(this,t[4]),this.l=qp(t[5]||"",!0),OE(this,t[6]||"",!0),this.o=qp(t[7]||"")):(this.g=!!e,this.h=new I_(null,this.g))}function Qr(n){return new Cl(n)}function D_(n,e,t){n.j=t?qp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ph(n,e,t){n.i=t?qp(e,!0):e}function Mu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function OE(n,e,t){e instanceof I_?(n.h=e,function EI(n,e){e&&!n.j&&(Oa(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(S_(this,r),A_(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=zp(e,wI)),n.h=new I_(e,n.g))}function Fn(n,e,t){n.h.set(e,t)}function E_(n){return Fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function zp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,xE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function xE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Cl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(zp(e,G0,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(zp(e,G0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(zp(t,"/"==t.charAt(0)?kE:H0,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",zp(t,DI)),n.join("")};var G0=/[#\/\?@]/g,H0=/[#\?:]/g,kE=/[#\?]/g,wI=/[#\?@]/g,DI=/#/g;function I_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Oa(n){n.g||(n.g=new xh,n.h=0,n.i&&function bI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function S_(n,e){Oa(n),e=Ru(n,e),td(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,td((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&j0(n)))}function $0(n,e){return Oa(n),e=Ru(n,e),td(n.g.h,e)}function A_(n,e,t){S_(n,e),0<t.length&&(n.i=null,n.g.set(Ru(n,e),s_(t)),n.h+=t.length)}function Ru(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function PE(n){this.l=n||TI,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ea&&Et.g.Ea()&&Et.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qe=I_.prototype).add=function(n,e){Oa(this),this.i=null,n=Ru(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Qe.forEach=function(n,e){Oa(this),this.g.forEach(function(t,r){tI(t,function(i){n.call(e,i,r,this)},this)},this)},Qe.T=function(){Oa(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},Qe.R=function(n){Oa(this);var e=[];if("string"==typeof n)$0(this,n)&&(e=nI(e,this.g.get(Ru(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=nI(e,n[t])}return e},Qe.set=function(n,e){return Oa(this),this.i=null,$0(this,n=Ru(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Qe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=i;""!==r[a]&&(u+="="+encodeURIComponent(String(r[a]))),n.push(u)}}return this.i=n.join("&")};var TI=10;function W0(n){return!!n.h||!!n.g&&n.g.size>=n.j}function N_(n){return n.h?1:n.g?n.g.size:0}function M_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function R_(n,e){n.g?n.g.add(e):n.h=e}function q0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function z0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return s_(n.i)}function K0(){}function FE(){this.g=new K0}function LE(n,e,t){const r=t||"";try{U0(n,function(i,a){let u=i;Dl(i)&&(u=E0(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Kp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Fh(n){this.l=n.$b||null,this.j=n.ib||!1}function Jr(n,e){Er.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ou,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}PE.prototype.cancel=function(){if(this.i=z0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},K0.prototype.stringify=function(n){return Et.JSON.stringify(n,void 0)},K0.prototype.parse=function(n){return Et.JSON.parse(n,void 0)},hi(Fh,O0),Fh.prototype.g=function(){return new Jr(this.l,this.j)},Fh.prototype.i=function(n){return function(){return n}}({}),hi(Jr,Er);var Ou=0;function VE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Zp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,O_(n)}function O_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qe=Jr.prototype).open=function(n,e){if(this.readyState!=Ou)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,O_(this)},Qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Et).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zp(this)),this.readyState=Ou},Qe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,O_(this)),this.g&&(this.readyState=3,O_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Et.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;VE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Qe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Zp(this):O_(this),3==this.readyState&&VE(this)}},Qe.Ua=function(n){this.g&&(this.response=this.responseText=n,Zp(this))},Qe.Ta=function(n){this.g&&(this.response=n,Zp(this))},Qe.ha=function(){this.g&&Zp(this)},Qe.setRequestHeader=function(n,e){this.v.append(n,e)},Qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Jr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Yp=Et.JSON.parse;function Tr(n){Er.call(this),this.headers=new xh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=x_,this.K=this.L=!1}hi(Tr,Er);var x_="",SI=/^https?$/i,BE=["POST","PUT"];function NI(n){return"content-type"==n.toLowerCase()}function k_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Z0(n),nd(n)}function Z0(n){n.D||(n.D=!0,pi(n,"complete"),pi(n,"error"))}function Y0(n){if(n.h&&void 0!==i_&&(!n.C[1]||4!=xu(n)||2!=n.ba()))if(n.v&&4==xu(n))S0(n.Fa,0,n);else if(pi(n,"readystatechange"),4==xu(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(kh)[1]||null;if(!i&&Et.self&&Et.self.location){var a=Et.self.location.protocol;i=a.substr(0,a.length-1)}r=!SI.test(i?i.toLowerCase():"")}t=r}if(t)pi(n,"complete"),pi(n,"success");else{n.m=6;try{var u=2<xu(n)?n.g.statusText:""}catch(_){u=""}n.j=u+" ["+n.ba()+"]",Z0(n)}}finally{nd(n)}}}function nd(n,e){if(n.g){P_(n);const t=n.g,r=n.C[0]?Rp:null;n.g=null,n.C=null,e||pi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function P_(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function xu(n){return n.g?n.g.readyState:0}function Q0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case x_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function F_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function MI(n){let e="";return c0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fn(n,e,t))}function ku(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function J0(n){this.za=0,this.l=[],this.h=new Nu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ku("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ku("baseRetryDelayMs",5e3,n),this.$a=ku("retryDelaySeedMs",1e4,n),this.Ya=ku("forwardChannelMaxRetries",2,n),this.ra=ku("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new PE(n&&n.concurrentRequestLimit),this.Ca=new FE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function X0(n){if(L_(n),3==n.G){var e=n.V++,t=Qr(n.F);Fn(t,"SID",n.J),Fn(t,"RID",e),Fn(t,"TYPE","terminate"),Vh(n,t),(e=new Nh(n,n.h,e,void 0)).K=2,e.v=E_(Qr(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon&&(t=Et.navigator.sendBeacon(e.v.toString(),"")),!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=$E(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Rh(e)}ib(n)}function Lh(n){n.g&&(nb(n),n.g.cancel(),n.g=null)}function L_(n){Lh(n),n.u&&(Et.clearTimeout(n.u),n.u=null),Qp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function UE(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&V_(n)}function V_(n){W0(n.i)||n.m||(n.m=!0,Yc(n.Ha,n),n.C=0)}function eb(n,e){var t;t=e?e.m:n.V++;const r=Qr(n.F);Fn(r,"SID",n.J),Fn(r,"RID",t),Fn(r,"AID",n.U),Vh(n,r),n.o&&n.s&&F_(r,n.o,n.s),t=new Nh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=jE(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),R_(n.i,t),L0(t,r,e)}function Vh(n,e){n.j&&U0({},function(t,r){Fn(e,r,t)})}function jE(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Yr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let p=!0;for(let _=0;_<t;_++){let w=i[_].h;const T=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),p=!1;else try{LE(T,u,"req"+w+"_")}catch(A){r&&r(T)}}if(p){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function tb(n){n.g||n.u||(n.Y=1,Yc(n.Ga,n),n.A=0)}function B_(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ra(Yr(n.Ga,n),rb(n,n.A)),n.A++,0))}function nb(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function GE(n){n.g=new Nh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Qr(n.oa);Fn(e,"RID","rpc"),Fn(e,"SID",n.J),Fn(e,"CI",n.N?"0":"1"),Fn(e,"AID",n.U),Vh(n,e),Fn(e,"TYPE","xmlhttp"),n.o&&n.s&&F_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=E_(Qr(e)),t.s=null,t.U=!0,NE(t,n)}function Qp(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function HE(n,e){var t=null;if(n.g==e){Qp(n),nb(n),n.g=null;var r=2}else{if(!M_(n.i,e))return;t=e.D,q0(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;pi(r=y_(),new N0(r,t,e,i)),V_(n)}else tb(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function RI(n,e){return!(N_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ra(Yr(n.Ha,n,e),rb(n,n.C)),n.C++,0)))}(n,e)||2==r&&B_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Pu(n,5);break;case 4:Pu(n,10);break;case 3:Pu(n,6);break;default:Pu(n,2)}}function rb(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Pu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Yr(n.jb,n);t||(t=new Cl("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||D_(t,"https"),E_(t)),function II(n,e){const t=new Nu;if(Et.Image){const r=new Image;r.onload=xp(Kp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=xp(Kp,t,r,"TestLoadImage: error",!1,e),r.onabort=xp(Kp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=xp(Kp,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Cr(2);n.G=0,n.j&&n.j.va(e),ib(n),L_(n)}function ib(n){n.G=0,n.I=-1,n.j&&((0!=z0(n.i).length||0!=n.l.length)&&(n.i.i.length=0,s_(n.l),n.l.length=0),n.j.ua())}function sb(n,e,t){let r=function C_(n){return n instanceof Cl?Qr(n):new Cl(n,void 0)}(t);if(""!=r.i)e&&Ph(r,e+"."+r.i),Mu(r,r.m);else{const i=Et.location;r=function T_(n,e,t,r){var i=new Cl(null,void 0);return n&&D_(i,n),e&&Ph(i,e),t&&Mu(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&c0(n.aa,function(i,a){Fn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Fn(r,e,t),Fn(r,"VER",n.ma),Vh(n,r),r}function $E(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tr(t&&n.Ba&&!n.qa?new Fh({ib:!0}):n.qa)).L=n.H,e}function WE(){}function ob(){if(Ih&&!(10<=Number(v0)))throw Error("Environmental error: no available transport.")}function ws(n,e){Er.call(this),this.g=new J0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Zc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zc(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Jp(this)}function OI(n){b_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function xI(){Hp.call(this),this.status=1}function Jp(n){this.g=n}(Qe=Tr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():k0.g(),this.C=function _I(n){return n.h||(n.h=n.i())}(this.u?this.u:k0),this.g.onreadystatechange=Yr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void k_(this,a)}n=t||"";const i=new xh(this.headers);r&&U0(r,function(a,u){i.set(u,a)}),r=function SM(n){e:{var e=NI;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Et.FormData&&n instanceof Et.FormData,!(0<=eI(BE,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{P_(this),0<this.B&&((this.K=function AI(n){return Ih&&function sI(){return function rI(n){var e=_E;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=hE(String(a_)).split("."),t=hE("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=o_(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||o_(0==i[2].length,0==a[2].length)||o_(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yr(this.pa,this)):this.A=S0(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){k_(this,a)}},Qe.pa=function(){void 0!==i_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pi(this,"timeout"),this.abort(8))},Qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,pi(this,"complete"),pi(this,"abort"),nd(this))},Qe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nd(this,!0)),Tr.Z.M.call(this)},Qe.Fa=function(){this.s||(this.F||this.v||this.l?Y0(this):this.cb())},Qe.cb=function(){Y0(this)},Qe.ba=function(){try{return 2<xu(this)?this.g.status:-1}catch(n){return-1}},Qe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Qe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Yp(e)}},Qe.Da=function(){return this.m},Qe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qe=J0.prototype).ma=8,Qe.G=1,Qe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Qe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Nh(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=gE(a),d0(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=jE(this,i,e),Fn(t=Qr(this.F),"RID",n),Fn(t,"CVER",22),this.D&&Fn(t,"X-HTTP-Session-Id",this.D),Vh(this,t),this.o&&a&&F_(t,this.o,a),R_(this.i,i),this.Ra&&Fn(t,"TYPE","init"),this.ja?(Fn(t,"$req",e),Fn(t,"SID","null"),i.$=!0,L0(i,t,null)):L0(i,t,e),this.G=2}}else 3==this.G&&(n?eb(this,n):0==this.l.length||W0(this.i)||eb(this))},Qe.Ga=function(){if(this.u=null,GE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ra(Yr(this.bb,this),n)}},Qe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Cr(10),Lh(this),GE(this))},Qe.ab=function(){null!=this.v&&(this.v=null,Lh(this),B_(this),Cr(19))},Qe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Cr(2)):(this.h.info("Failed to ping google.com"),Cr(1))},(Qe=WE.prototype).xa=function(){},Qe.wa=function(){},Qe.va=function(){},Qe.ua=function(){},Qe.Oa=function(){},ob.prototype.g=function(n,e){return new ws(n,e)},hi(ws,Er),ws.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Yc(Yr(n.hb,n,e))),Cr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=sb(n,null,n.W),V_(n)},ws.prototype.close=function(){X0(this.g)},ws.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,UE(this.g,e)}else this.v?((e={}).__data__=E0(n),UE(this.g,e)):UE(this.g,n)},ws.prototype.M=function(){this.g.j=null,delete this.j,X0(this.g),delete this.g,ws.Z.M.call(this)},hi(OI,b_),hi(xI,Hp),hi(Jp,WE),Jp.prototype.xa=function(){pi(this.g,"a")},Jp.prototype.wa=function(n){pi(this.g,new OI(n))},Jp.prototype.va=function(n){pi(this.g,new xI(n))},Jp.prototype.ua=function(){pi(this.g,"b")},ob.prototype.createWebChannel=ob.prototype.g,ws.prototype.send=ws.prototype.u,ws.prototype.open=ws.prototype.m,ws.prototype.close=ws.prototype.close,M0.NO_ERROR=0,M0.TIMEOUT=8,M0.HTTP_ERROR=6,R0.COMPLETE="complete",x0.EventType=v_,v_.OPEN="a",v_.CLOSE="b",v_.ERROR="c",v_.MESSAGE="d",Er.prototype.listen=Er.prototype.N,Tr.prototype.listenOnce=Tr.prototype.O,Tr.prototype.getLastError=Tr.prototype.La,Tr.prototype.getLastErrorCode=Tr.prototype.Da,Tr.prototype.getStatus=Tr.prototype.ba,Tr.prototype.getResponseJson=Tr.prototype.Qa,Tr.prototype.getResponseText=Tr.prototype.ga,Tr.prototype.send=Tr.prototype.ea;var MM=wl.createWebChannelTransport=function(){return new ob},RM=wl.getStatEventTarget=function(){return y_()},qE=wl.ErrorCode=M0,OM=wl.EventType=R0,xM=wl.Event=Xc,Xp=wl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},kM=wl.FetchXmlHttpFactory=Fh,Bh=wl.WebChannel=x0,Uh=wl.XhrIo=Tr;const ab="@firebase/firestore";class gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");let jh="9.6.3";const xa=new hn.Yd("@firebase/firestore");function U_(){return xa.logLevel}function Le(n,...e){if(xa.logLevel<=hn.in.DEBUG){const t=e.map(Hh);xa.debug(`Firestore (${jh}): ${n}`,...t)}}function kr(n,...e){if(xa.logLevel<=hn.in.ERROR){const t=e.map(Hh);xa.error(`Firestore (${jh}): ${n}`,...t)}}function Gh(n,...e){if(xa.logLevel<=hn.in.WARN){const t=e.map(Hh);xa.warn(`Firestore (${jh}): ${n}`,...t)}}function Hh(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${jh}) INTERNAL ASSERTION FAILED: `+n;throw kr(e),new Error(e)}function Dt(n,e){n||lt()}function We(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class kI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class lb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class FI{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let u=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Xr,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const w=u;e.enqueueRetryable((0,fe.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Xr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new kI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new gi(e)}}class Gs{constructor(e,t,r){this.type="FirstParty",this.user=gi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class LI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Gs(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class j_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=i=>{e.enqueueRetryable(()=>{return null!=(a=i).error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`),t(a.token);var a})};const r=i=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?r(i):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),new j_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ji{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function KE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ji.I=-1;class ub{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=KE(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function rd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function cb(n){return n+"\0"}class ei{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ei.fromMillis(Date.now())}static fromDate(e){return ei.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ei(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new ei(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function G_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class H_{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===H_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof H_?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends H_{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new an(t)}static emptyPath(){return new an([])}}const YE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _i extends H_{construct(e,t,r){return new _i(e,t,r)}static isValidIdentifier(e){return YE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _i(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Me(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Me(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Me(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(u=!u,i++):"."!==p||u?(r+=p,i++):(a(),i++)}if(a(),u)throw new Me(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _i(t)}static emptyPath(){return new _i([])}}class $h{constructor(e){this.fields=e,e.sort(_i.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Pr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pr.EMPTY_BYTE_STRING=new Pr("");const LM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tl(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=LM.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gr(n.seconds),nanos:gr(n.nanos)}}function gr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Wh(n){return"string"==typeof n?Pr.fromBase64String(n):Pr.fromUint8Array(n)}function db(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function hb(n){const e=n.mapValue.fields.__previous_value__;return db(e)?hb(e):e}function Il(n){const e=Tl(n.mapValue.fields.__local_write_time__.timestampValue);return new ei(e.seconds,e.nanos)}function Sl(n){return null==n}function eg(n){return 0===n&&1/n==-1/0}function JE(n){return"number"==typeof n&&Number.isInteger(n)&&!eg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class st{constructor(e){this.path=e}static fromPath(e){return new st(an.fromString(e))}static fromName(e){return new st(an.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new an(e.slice()))}}function Fu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?db(n)?4:10:lt()}function ka(n,e){if(n===e)return!0;const t=Fu(n);if(t!==Fu(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Il(n).isEqual(Il(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Tl(r.timestampValue),u=Tl(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Wh(n.bytesValue).isEqual(Wh(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return gr(r.geoPointValue.latitude)===gr(i.geoPointValue.latitude)&&gr(r.geoPointValue.longitude)===gr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return gr(r.integerValue)===gr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=gr(r.doubleValue),u=gr(i.doubleValue);return a===u?eg(a)===eg(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return rd(n.arrayValue.values||[],e.arrayValue.values||[],ka);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(G_(a)!==G_(u))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===u[p]||!ka(a[p],u[p])))return!1;return!0}(n,e);default:return lt()}var i}function tg(n,e){return void 0!==(n.values||[]).find(t=>ka(t,e))}function ng(n,e){if(n===e)return 0;const t=Fu(n),r=Fu(e);if(t!==r)return Gt(t,r);switch(t){case 0:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=gr(i.integerValue||i.doubleValue),p=gr(a.integerValue||a.doubleValue);return u<p?-1:u>p?1:u===p?0:isNaN(u)?isNaN(p)?0:-1:1}(n,e);case 3:return BI(n.timestampValue,e.timestampValue);case 4:return BI(Il(n),Il(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=Wh(i),p=Wh(a);return u.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),p=a.split("/");for(let _=0;_<u.length&&_<p.length;_++){const w=Gt(u[_],p[_]);if(0!==w)return w}return Gt(u.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Gt(gr(i.latitude),gr(a.latitude));return 0!==u?u:Gt(gr(i.longitude),gr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],p=a.values||[];for(let _=0;_<u.length&&_<p.length;++_){const w=ng(u[_],p[_]);if(w)return w}return Gt(u.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const u=i.fields||{},p=Object.keys(u),_=a.fields||{},w=Object.keys(_);p.sort(),w.sort();for(let T=0;T<p.length&&T<w.length;++T){const A=Gt(p[T],w[T]);if(0!==A)return A;const x=ng(u[p[T]],_[w[T]]);if(0!==x)return x}return Gt(p.length,w.length)}(n.mapValue,e.mapValue);default:throw lt()}}function BI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=Tl(n),r=Tl(e),i=Gt(t.seconds,r.seconds);return 0!==i?i:Gt(t.nanos,r.nanos)}function $_(n){return fb(n)}function fb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Tl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Wh(n.bytesValue).toBase64():"referenceValue"in n?st.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=fb(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const p of i)u?u=!1:a+=",",a+=`${p}:${fb(r.fields[p])}`;return a+"}"}(n.mapValue):lt();var e}function W_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pb(n){return!!n&&"integerValue"in n}function XE(n){return!!n&&"arrayValue"in n}function UI(n){return!!n&&"nullValue"in n}function jI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gb(n){return!!n&&"mapValue"in n}function q_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return mi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=q_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=q_(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Ai{constructor(e){this.value=e}static empty(){return new Ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=q_(t)}setAll(e){let t=_i.emptyPath(),r={},i=[];e.forEach((u,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}u?r[p.lastSegment()]=q_(u):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());gb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ka(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mi(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ai(q_(this.value))}}function rg(n){const e=[];return mi(n.fields,(t,r)=>{const i=new _i([t]);if(gb(r)){const a=rg(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new $h(e)}class Ln{constructor(e,t,r,i,a){this.key=e,this.documentType=t,this.version=r,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Ln(e,0,Mt.min(),Ai.empty(),0)}static newFoundDocument(e,t,r){return new Ln(e,1,t,r,0)}static newNoDocument(e,t){return new Ln(e,2,t,Ai.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,Ai.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class GI{constructor(e,t=null,r=[],i=[],a=null,u=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=p,this.R=null}}function mb(n,e=null,t=[],r=[],i=null,a=null,u=null){return new GI(n,e,t,r,i,a,u)}function Zo(n){const e=We(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function _b(n){return n.field.canonicalString()+n.op.toString()+$_(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Sl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=vb(e.startAt)),e.endAt&&(t+="|ub:",t+=vb(e.endAt)),e.R=t}return e.R}function qh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!$I(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ka(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iC(n.startAt,e.startAt)&&iC(n.endAt,e.endAt)}function zh(n){return st.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Xi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new yb(e,t,r):"array-contains"===t?new VM(e,r):"in"===t?new BM(e,r):"not-in"===t?new UM(e,r):"array-contains-any"===t?new jM(e,r):new Xi(e,t,r)}static P(e,t,r){return"in"===t?new tC(e,r):new nC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ng(t,this.value)):null!==t&&Fu(this.value)===Fu(t)&&this.v(ng(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class yb extends Xi{constructor(e,t,r){super(e,t,r),this.key=st.fromName(r.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.v(t)}}class tC extends Xi{constructor(e,t){super(e,"in",t),this.keys=HI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nC extends Xi{constructor(e,t){super(e,"not-in",t),this.keys=HI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function HI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>st.fromName(r.referenceValue))}class VM extends Xi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return XE(t)&&tg(t.arrayValue,this.value)}}class BM extends Xi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tg(this.value.arrayValue,t)}}class UM extends Xi{constructor(e,t){super(e,"not-in",t)}matches(e){if(tg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tg(this.value.arrayValue,t)}}class jM extends Xi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!XE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tg(this.value.arrayValue,r))}}class z_{constructor(e,t){this.position=e,this.before=t}}function vb(n){return`${n.before?"b":"a"}:${n.position.map(e=>$_(e)).join(",")}`}class id{constructor(e,t="asc"){this.field=e,this.dir=t}}function $I(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function rC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?st.comparator(st.fromName(u.referenceValue),t.key):ng(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function iC(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ka(n.position[t],e.position[t]))return!1;return!0}class Al{constructor(e,t=null,r=[],i=[],a=null,u="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=p,this.endAt=_,this.S=null,this.D=null}}function bb(n,e,t,r,i,a,u,p){return new Al(n,e,t,r,i,a,u,p)}function sd(n){return new Al(n)}function ig(n){return!Sl(n.limit)&&"F"===n.limitType}function K_(n){return!Sl(n.limit)&&"L"===n.limitType}function wb(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Z_(n){for(const e of n.filters)if(e.V())return e.field;return null}function Kh(n){return null!==n.collectionGroup}function sg(n){const e=We(n);if(null===e.S){e.S=[];const t=Z_(e),r=wb(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new id(t)),e.S.push(new id(_i.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.S.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new id(_i.keyField(),a))}}}return e.S}function Hs(n){const e=We(n);if(!e.D)if("F"===e.limitType)e.D=mb(e.path,e.collectionGroup,sg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of sg(e))t.push(new id(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new z_(e.endAt.position,!e.endAt.before):null,i=e.startAt?new z_(e.startAt.position,!e.startAt.before):null;e.D=mb(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.D}function og(n,e,t){return new Al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ag(n,e){return qh(Hs(n),Hs(e))&&n.limitType===e.limitType}function sC(n){return`${Zo(Hs(n))}|lt:${n.limitType}`}function Db(n){return`Query(target=${function eC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${$_(r.value)}`;var r}).join(", ")}]`),Sl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+vb(n.startAt)),n.endAt&&(e+=", endAt: "+vb(n.endAt)),`Target(${e})`}(Hs(n))}; limitType=${n.limitType})`}function lg(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):st.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!rC(t.startAt,sg(t),r)||t.endAt&&rC(t.endAt,sg(t),r)));var t,r}function WI(n){return(e,t)=>{let r=!1;for(const i of sg(n)){const a=qI(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function qI(n,e,t){const r=n.field.isKeyField()?st.comparator(e.key,t.key):function(i,a,u){const p=a.data.field(i),_=u.data.field(i);return null!==p&&null!==_?ng(p,_):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function oC(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eg(e)?"-0":e}}function aC(n){return{integerValue:""+n}}function lC(n,e){return JE(e)?aC(e):oC(n,e)}class Y_{constructor(){this._=void 0}}function zI(n,e,t){return n instanceof ug?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Zh?ZI(n,e):n instanceof Yh?YI(n,e):function(r,i){const a=uC(r,i),u=QI(a)+QI(r.N);return pb(a)&&pb(r.N)?aC(u):oC(r.k,u)}(n,e)}function KI(n,e,t){return n instanceof Zh?ZI(n,e):n instanceof Yh?YI(n,e):t}function uC(n,e){return n instanceof Qh?pb(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ug extends Y_{}class Zh extends Y_{constructor(e){super(),this.elements=e}}function ZI(n,e){const t=JI(e);for(const r of n.elements)t.some(i=>ka(i,r))||t.push(r);return{arrayValue:{values:t}}}class Yh extends Y_{constructor(e){super(),this.elements=e}}function YI(n,e){let t=JI(e);for(const r of n.elements)t=t.filter(i=>!ka(i,r));return{arrayValue:{values:t}}}class Qh extends Y_{constructor(e,t){super(),this.k=e,this.N=t}}function QI(n){return gr(n.integerValue||n.doubleValue)}function JI(n){return XE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Q_{constructor(e,t){this.field=e,this.transform=t}}class s{constructor(e,t){this.version=e,this.transformResults=t}}class o{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new o}static exists(e){return new o(void 0,e)}static updateTime(e){return new o(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function l(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class c{}function h(n,e,t){n instanceof N?function(r,i,a){const u=r.value.clone(),p=$(r.fieldTransforms,i,a.transformResults);u.setAll(p),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof R?function(r,i,a){if(!l(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=$(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll(L(r)),p.setAll(u),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function m(n,e,t){var i;n instanceof N?function(r,i,a){if(!l(r.precondition,i))return;const u=r.value.clone(),p=Y(r.fieldTransforms,a,i);u.setAll(p),i.convertToFoundDocument(E(i),u).setHasLocalMutations()}(n,e,t):n instanceof R?function(r,i,a){if(!l(r.precondition,i))return;const u=Y(r.fieldTransforms,a,i),p=i.data;p.setAll(L(r)),p.setAll(u),i.convertToFoundDocument(E(i),p).setHasLocalMutations()}(n,e,t):l(n.precondition,i=e)&&i.convertToNoDocument(Mt.min())}function v(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=uC(r.transform,i||null);null!=a&&(null==t&&(t=Ai.empty()),t.set(r.field,a))}return t||null}function D(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&rd(t,r,(i,a)=>function GM(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Zh&&r instanceof Zh||t instanceof Yh&&r instanceof Yh?rd(t.elements,r.elements,ka):t instanceof Qh&&r instanceof Qh?ka(t.N,r.N):t instanceof ug&&r instanceof ug);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function E(n){return n.isFoundDocument()?n.version:Mt.min()}class N extends c{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class R extends c{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function L(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,p=e.data.field(a.field);r.set(a.field,KI(u,p,t[i]))}return r}function Y(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,zI(a,u,e))}return r}class pe extends c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Pe extends c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ge{constructor(e){this.count=e}}var Be,se;function ft(n){switch(n){default:return lt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function Vt(n){if(void 0===n)return kr("GRPC error has no .code"),de.UNKNOWN;switch(n){case Be.OK:return de.OK;case Be.CANCELLED:return de.CANCELLED;case Be.UNKNOWN:return de.UNKNOWN;case Be.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Be.INTERNAL:return de.INTERNAL;case Be.UNAVAILABLE:return de.UNAVAILABLE;case Be.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Be.NOT_FOUND:return de.NOT_FOUND;case Be.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Be.ABORTED:return de.ABORTED;case Be.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Be.DATA_LOSS:return de.DATA_LOSS;default:return lt()}}(se=Be||(Be={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";class wt{constructor(e,t){this.comparator=e,this.root=t||Wn.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ni(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ni(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ni(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ni(this.root,e,this.comparator,!0)}}class Ni{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Wn.RED,this.left=null!=i?i:Wn.EMPTY,this.right=null!=a?a:Wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Wn(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Wn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1,Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Wn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new J_(this.data.getIterator())}getIteratorFrom(e){return new J_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vn(this.comparator);return t.data=e,t}}class J_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Eb=new wt(st.comparator);function Ds(){return Eb}const Cb=new wt(st.comparator);function cg(){return Cb}const Tb=new wt(st.comparator);function X_(){return Tb}const Ib=new Vn(st.comparator);function wn(...n){let e=Ib;for(const t of n)e=e.add(t);return e}const wF=new Vn(Gt);function cC(){return wF}class Sb{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Ab.createSynthesizedTargetChangeForCurrentChange(e,t)),new Sb(Mt.min(),r,cC(),Ds(),wn())}}class Ab{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ab(Pr.EMPTY_BYTE_STRING,t,wn(),wn(),wn())}}class dC{constructor(e,t,r,i){this.$=e,this.removedTargetIds=t,this.key=r,this.O=i}}class HM{constructor(e,t){this.targetId=e,this.M=t}}class $M{constructor(e,t,r=Pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class WM{constructor(){this.F=0,this.L=zM(),this.B=Pr.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.F}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=wn(),t=wn(),r=wn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new Ab(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=zM()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class DF{constructor(e){this.et=e,this.nt=new Map,this.st=Ds(),this.it=qM(),this.rt=new Vn(Gt)}ot(e){for(const t of e.$)e.O&&e.O.isFoundDocument()?this.ct(t,e.O):this.at(t,e.key,e.O);for(const t of e.removedTargetIds)this.at(t,e.key,e.O)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,i)=>{this.lt(i)&&t(i)})}dt(e){const t=e.targetId,r=e.M.count,i=this.wt(t);if(i){const a=i.target;if(zh(a))if(0===r){const u=new st(a.path);this.at(t,u,Ln.newNoDocument(u,Mt.min()))}else Dt(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((a,u)=>{const p=this.wt(u);if(p){if(a.current&&zh(p.target)){const _=new st(p.target.path);null!==this.st.get(_)||this.yt(u,_)||this.at(u,_,Ln.newNoDocument(_,e))}a.j&&(t.set(u,a.G()),a.H())}});let r=wn();this.it.forEach((a,u)=>{let p=!0;u.forEachWhile(_=>{const w=this.wt(_);return!w||2===w.purpose||(p=!1,!1)}),p&&(r=r.add(a))});const i=new Sb(e,t,this.rt,this.st,r);return this.st=Ds(),this.it=qM(),this.rt=new Vn(Gt),i}ct(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}at(e,t,r){if(!this.lt(e))return;const i=this.ht(e);this.yt(e,t)?i.J(t,1):i.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new WM,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new Vn(Gt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new WM),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function qM(){return new wt(st.comparator)}function zM(){return new wt(st.comparator)}const EF={asc:"ASCENDING",desc:"DESCENDING"},CF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class TF{constructor(e,t){this.databaseId=e,this.C=t}}function Nb(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KM(n,e){return n.C?e.toBase64():e.toUint8Array()}function IF(n,e){return Nb(n,e.toTimestamp())}function Mi(n){return Dt(!!n),Mt.fromTimestamp(function(e){const t=Tl(e);return new ei(t.seconds,t.nanos)}(n))}function XI(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ZM(n){const e=an.fromString(n);return Dt(aR(e)),e}function Mb(n,e){return XI(n.databaseId,e.path)}function Lu(n,e){const t=ZM(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new st(QM(t))}function eS(n,e){return XI(n.databaseId,e)}function YM(n){const e=ZM(n);return 4===e.length?an.emptyPath():QM(e)}function Rb(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QM(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function JM(n,e,t){return{name:Mb(n,e),fields:t.value.mapValue.fields}}function XM(n,e,t){const r=Lu(n,e.name),i=Mi(e.updateTime),a=new Ai({mapValue:{fields:e.fields}}),u=Ln.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function hC(n,e){let t;if(e instanceof N)t={update:JM(n,e.key,e.value)};else if(e instanceof pe)t={delete:Mb(n,e.key)};else if(e instanceof R)t={update:JM(n,e.key,e.data),updateMask:PF(e.fieldMask)};else{if(!(e instanceof Pe))return lt();t={verify:Mb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof ug)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Zh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Yh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Qh)return{fieldPath:a.field.canonicalString(),increment:u.N};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:IF(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function eR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?o.updateTime(Mi(i.updateTime)):void 0!==i.exists?o.exists(i.exists):o.none():o.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let p=null;"setToServerValue"in u?(Dt("REQUEST_TIME"===u.setToServerValue),p=new ug):"appendMissingElements"in u?p=new Zh(u.appendMissingElements.values||[]):"removeAllFromArray"in u?p=new Yh(u.removeAllFromArray.values||[]):"increment"in u?p=new Qh(a,u.increment):lt();const _=_i.fromServerFormat(u.fieldPath);return new Q_(_,p)}(n,i)):[];var i;if(e.update){const i=Lu(n,e.update.name),a=new Ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new $h((e.updateMask.fieldPaths||[]).map(w=>_i.fromServerFormat(w)));return new R(i,a,u,t,r)}return new N(i,a,t,r)}if(e.delete){const i=Lu(n,e.delete);return new pe(i,t)}if(e.verify){const i=Lu(n,e.verify);return new Pe(i,t)}return lt()}function tR(n,e){return{documents:[eS(n,e.path)]}}function nR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=eS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=eS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const _=p.map(w=>function(T){if("=="===T.op){if(jI(T.value))return{unaryFilter:{field:ey(T.field),op:"IS_NAN"}};if(UI(T.value))return{unaryFilter:{field:ey(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(jI(T.value))return{unaryFilter:{field:ey(T.field),op:"IS_NOT_NAN"}};if(UI(T.value))return{unaryFilter:{field:ey(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ey(T.field),op:OF(T.op),value:T.value}}}(w));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(p){if(0!==p.length)return p.map(_=>{return{field:ey((w=_).field),direction:RF(w.dir)};var w})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(_=e.limit,n.C||Sl(_)?_:{value:_});var _;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=sR(e.startAt)),e.endAt&&(t.structuredQuery.endAt=sR(e.endAt)),t}function rR(n){let e=YM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=iR(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(T=>{return new id(ty((A=T).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let p=null;t.limit&&(p=function(T){let A;return A="object"==typeof T?T.value:T,Sl(A)?null:A}(t.limit));let _=null;t.startAt&&(_=oR(t.startAt));let w=null;return t.endAt&&(w=oR(t.endAt)),bb(e,i,u,a,p,"F",_,w)}function iR(n){return n?void 0!==n.unaryFilter?[kF(n)]:void 0!==n.fieldFilter?[xF(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>iR(e)).reduce((e,t)=>e.concat(t)):lt():[]}function sR(n){return{before:n.before,values:n.position}}function oR(n){return new z_(n.values||[],!!n.before)}function RF(n){return EF[n]}function OF(n){return CF[n]}function ey(n){return{fieldPath:n.canonicalString()}}function ty(n){return _i.fromServerFormat(n.fieldPath)}function xF(n){return Xi.create(ty(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function kF(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ty(n.unaryFilter.field);return Xi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ty(n.unaryFilter.field);return Xi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ty(n.unaryFilter.field);return Xi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ty(n.unaryFilter.field);return Xi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function PF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function aR(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Nl(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lR(e)),e=FF(n.get(t),e);return lR(e)}function FF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function lR(n){return n+"\x01\x01"}function od(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&lt(),n.charAt(u+1)){case"\x01":const p=n.substring(a,u);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:lt()}a=u+2}return new an(r)}class LF{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Yo{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Yo.store="owner",Yo.key="owner";class Jh{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Jh.store="mutationQueues",Jh.keyPath="userId";class qn{constructor(e,t,r,i,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}}qn.store="mutations",qn.keyPath="batchId",qn.userMutationsIndex="userMutationsIndex",qn.userMutationsKeyPath=["userId","batchId"];class Es{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Nl(t)]}static key(e,t,r){return[e,Nl(t),r]}}Es.store="documentMutations",Es.PLACEHOLDER=new Es;class VF{constructor(e,t){this.path=e,this.readTime=t}}class BF{constructor(e,t){this.path=e,this.version=t}}class Ir{constructor(e,t,r,i,a,u){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=u}}Ir.store="remoteDocuments",Ir.readTimeIndex="readTimeIndex",Ir.readTimeIndexPath="readTime",Ir.collectionReadTimeIndex="collectionReadTimeIndex",Ir.collectionReadTimeIndexPath=["parentPath","readTime"];class Vu{constructor(e){this.byteSize=e}}Vu.store="remoteDocumentGlobal",Vu.key="remoteDocumentGlobalKey";class yo{constructor(e,t,r,i,a,u,p){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=u,this.query=p}}yo.store="targets",yo.keyPath="targetId",yo.queryTargetsIndexName="queryTargetsIndex",yo.queryTargetsKeyPath=["canonicalId","targetId"];class es{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}es.store="targetDocuments",es.keyPath=["targetId","path"],es.documentTargetsIndex="documentTargetsIndex",es.documentTargetsKeyPath=["path","targetId"];class Qo{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}Qo.key="targetGlobalKey",Qo.store="targetGlobal";class dg{constructor(e,t){this.collectionId=e,this.parent=t}}dg.store="collectionParents",dg.keyPath=["collectionId","parent"];class ad{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}ad.store="clientMetadata",ad.keyPath="clientId";class ny{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}ny.store="bundles",ny.keyPath="bundleId";class ry{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}ry.store="namedQueries",ry.keyPath="name";const UF=[Jh.store,qn.store,Es.store,Ir.store,yo.store,Yo.store,Qo.store,es.store,ad.store,Vu.store,dg.store,ny.store,ry.store],uR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Re((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Re?t:Re.resolve(t)}catch(t){return Re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Re.reject(t)}static resolve(e){return new Re((t,r)=>{t(e)})}static reject(e){return new Re((t,r)=>{r(e)})}static waitFor(e){return new Re((t,r)=>{let i=0,a=0,u=!1;e.forEach(p=>{++i,p.next(()=>{++a,u&&a===i&&t()},_=>r(_))}),u=!0,a===i&&t()})}static or(e){let t=Re.resolve(!1);for(const r of e)t=t.next(i=>i?Re.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class fC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Xr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new Ob(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const i=tS(r.target.error);this.It.reject(new Ob(e,i))}}static open(e,t,r,i){try{return new fC(t,e.transaction(i,r))}catch(a){throw new Ob(t,a)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new GF(t)}}class Ml{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===Ml.bt((0,k.z$)())&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),fg(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if(!(0,k.hl)())return!1;if(Ml.vt())return!0;const e=(0,k.z$)(),t=Ml.bt(e),r=0<t&&t<10,i=Ml.Vt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static bt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,fe.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new Ob(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const p=u.target.error;i("VersionError"===p.name?new Me(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Me(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Ob(e,p))},a.onupgradeneeded=u=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Rt.Nt(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,fe.Z)(function*(){const u="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.Ct(e);const _=fC.open(a.db,e,u?"readonly":"readwrite",r),w=i(_).catch(T=>(_.abort(T),Re.reject(T))).toPromise();return w.catch(()=>{}),yield _.At,w}catch(_){const w="FirebaseError"!==_.name&&p<3;if(Le("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),a.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jF{constructor(e){this.$t=e,this.Ot=!1,this.Mt=null}get isDone(){return this.Ot}get Ft(){return this.Mt}set cursor(e){this.$t=e}done(){this.Ot=!0}Lt(e){this.Mt=e}delete(){return fg(this.$t.delete())}}class Ob extends Me{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function hg(n){return"IndexedDbTransactionError"===n.name}class GF{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fg(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),fg(this.store.add(e))}get(e){return fg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),fg(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),fg(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),i=[];return this.Ut(r,(a,u)=>{i.push(u)}).next(()=>i)}qt(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const i=this.cursor(r);return this.Ut(i,(a,u,p)=>p.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Ut(i,t)}Qt(e){const t=this.cursor({});return new Re((r,i)=>{t.onerror=a=>{const u=tS(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(p=>{p?u.continue():r()}):r()}})}Ut(e,t){const r=[];return new Re((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const p=u.target.result;if(!p)return void i();const _=new jF(p),w=t(p.primaryKey,p.value,_);if(w instanceof Re){const T=w.catch(A=>(_.done(),Re.reject(A)));r.push(T)}_.isDone?i():null===_.Ft?p.continue():p.continue(_.Ft)}}).next(()=>Re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fg(n){return new Re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=tS(r.target.error);t(i)}})}let dR=!1;function tS(n){const e=Ml.bt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dR||(dR=!0,setTimeout(()=>{throw r},0)),r}}return n}class hR extends cR{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function vo(n,e){const t=We(n);return Ml.Dt(t.Wt,e)}class nS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&h(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&m(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&m(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Mt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),wn())}isEqual(e){return this.batchId===e.batchId&&rd(this.mutations,e.mutations,(t,r)=>D(t,r))&&rd(this.baseMutations,e.baseMutations,(t,r)=>D(t,r))}}class rS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=X_();const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new rS(e,t,r,i)}}class Xh{constructor(e,t,r,i,a=Mt.min(),u=Mt.min(),p=Pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p}withSequenceNumber(e){return new Xh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class fR{constructor(e){this.Gt=e}}function iS(n,e){if(e.document)return XM(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=st.fromSegments(e.noDocument.path),r=sy(e.noDocument.readTime),i=Ln.newNoDocument(t,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){const t=st.fromSegments(e.unknownDocument.path),r=sy(e.unknownDocument.version);return Ln.newUnknownDocument(t,r)}return lt()}function pR(n,e,t){const r=sS(t),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const a={name:Mb(p=n.Gt,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:Nb(p,_.version.toTimestamp())};return new Ir(null,null,a,e.hasCommittedMutations,r,i)}var p,_;if(e.isNoDocument()){const a=e.key.path.toArray(),u=iy(e.version),p=e.hasCommittedMutations;return new Ir(null,new VF(a,u),null,p,r,i)}if(e.isUnknownDocument()){const a=e.key.path.toArray(),u=iy(e.version);return new Ir(new BF(a,u),null,null,!0,r,i)}return lt()}function sS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function gR(n){const e=new ei(n[0],n[1]);return Mt.fromTimestamp(e)}function iy(n){const e=n.toTimestamp();return new LF(e.seconds,e.nanoseconds)}function sy(n){const e=new ei(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function oy(n,e){const t=(e.baseMutations||[]).map(a=>eR(n.Gt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>eR(n.Gt,a)),i=ei.fromMillis(e.localWriteTimeMs);return new nS(e.batchId,i,t,r)}function xb(n){const e=sy(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?sy(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var i;return void 0!==n.query.documents?(Dt(1===(i=n.query).documents.length),r=Hs(sd(YM(i.documents[0])))):r=Hs(rR(n.query)),new Xh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Pr.fromBase64String(n.resumeToken))}function mR(n,e){const t=iy(e.snapshotVersion),r=iy(e.lastLimboFreeSnapshotVersion);let i;i=zh(e.target)?tR(n.Gt,e.target):nR(n.Gt,e.target);const a=e.resumeToken.toBase64();return new yo(e.targetId,Zo(e.target),t,a,e.sequenceNumber,r,i)}function oS(n){const e=rR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?og(e,e.limit,"L"):e}class HF{getBundleMetadata(e,t){return _R(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:sy(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return _R(e).put({bundleId:(r=t).id,createTime:iy(Mi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return yR(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:oS(i.bundledQuery),readTime:sy(i.readTime)};var i})}saveNamedQuery(e,t){return yR(e).put({name:(r=t).name,readTime:iy(Mi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function _R(n){return vo(n,ny.store)}function yR(n){return vo(n,ry.store)}class $F{constructor(){this.zt=new aS}addToCollectionParentIndex(e,t){return this.zt.add(t),Re.resolve()}getCollectionParents(e,t){return Re.resolve(this.zt.getEntries(t))}}class aS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Vn(an.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vn(an.comparator)).toArray()}}class WF{constructor(){this.Ht=new aS}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const a={collectionId:r,parent:Nl(i)};return vR(e).put(a)}return Re.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[cb(t),""],!1,!0);return vR(e).Bt(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(od(u.parent))}return r})}}function vR(n){return vo(n,dg.store)}const bR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new bo(e,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wR(n,e,t){const r=n.store(qn.store),i=n.store(Es.store),a=[],u=IDBKeyRange.only(t.batchId);let p=0;const _=r.jt({range:u},(T,A,x)=>(p++,x.delete()));a.push(_.next(()=>{Dt(1===p)}));const w=[];for(const T of t.mutations){const A=Es.key(e,T.key.path,t.batchId);a.push(i.delete(A)),w.push(T.key)}return Re.waitFor(a).next(()=>w)}function pC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}bo.DEFAULT_COLLECTION_PERCENTILE=10,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bo.DEFAULT=new bo(41943040,bo.DEFAULT_COLLECTION_PERCENTILE,bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bo.DISABLED=new bo(-1,0,0);class lS{constructor(e,t,r,i){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=i,this.Yt={}}static Xt(e,t,r,i){Dt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new lS(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ef(e).jt({index:qn.userMutationsIndex,range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=ay(e),u=ef(e);return u.add({}).next(p=>{Dt("number"==typeof p);const _=new nS(p,t,r,i),w=function(x,V,z){const oe=z.baseMutations.map(ct=>hC(x.Gt,ct)),xe=z.mutations.map(ct=>hC(x.Gt,ct));return new qn(V,z.batchId,z.localWriteTime.toMillis(),oe,xe)}(this.k,this.userId,_),T=[];let A=new Vn((x,V)=>Gt(x.canonicalString(),V.canonicalString()));for(const x of i){const V=Es.key(this.userId,x.key.path,p);A=A.add(x.key.path.popLast()),T.push(u.put(w)),T.push(a.put(V,Es.PLACEHOLDER))}return A.forEach(x=>{T.push(this.Jt.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.Yt[p]=_.keys()}),Re.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return ef(e).get(t).next(r=>r?(Dt(r.userId===this.userId),oy(this.k,r)):null)}Zt(e,t){return this.Yt[t]?Re.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Yt[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return ef(e).jt({index:qn.userMutationsIndex,range:i},(u,p,_)=>{p.userId===this.userId&&(Dt(p.batchId>=r),a=oy(this.k,p)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ef(e).jt({index:qn.userMutationsIndex,range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ef(e).Bt(qn.userMutationsIndex,t).next(r=>r.map(i=>oy(this.k,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Es.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ay(e).jt({range:i},(u,p,_)=>{const[w,T,A]=u,x=od(T);if(w===this.userId&&t.path.isEqual(x))return ef(e).get(A).next(V=>{if(!V)throw lt();Dt(V.userId===this.userId),a.push(oy(this.k,V))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(Gt);const i=[];return t.forEach(a=>{const u=Es.prefixForPath(this.userId,a.path),p=IDBKeyRange.lowerBound(u),_=ay(e).jt({range:p},(w,T,A)=>{const[x,V,z]=w,oe=od(V);x===this.userId&&a.path.isEqual(oe)?r=r.add(z):A.done()});i.push(_)}),Re.waitFor(i).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Es.prefixForPath(this.userId,r),u=IDBKeyRange.lowerBound(a);let p=new Vn(Gt);return ay(e).jt({range:u},(_,w,T)=>{const[A,x,V]=_,z=od(x);A===this.userId&&r.isPrefixOf(z)?z.length===i&&(p=p.add(V)):T.done()}).next(()=>this.te(e,p))}te(e,t){const r=[],i=[];return t.forEach(a=>{i.push(ef(e).get(a).next(u=>{if(null===u)throw lt();Dt(u.userId===this.userId),r.push(oy(this.k,u))}))}),Re.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return wR(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Re.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Re.resolve();const r=IDBKeyRange.lowerBound(Es.prefixForUser(this.userId)),i=[];return ay(e).jt({range:r},(a,u,p)=>{if(a[0]===this.userId){const _=od(a[1]);i.push(_)}else p.done()}).next(()=>{Dt(0===i.length)})})}containsKey(e,t){return DR(e,this.userId,t)}ne(e){return ER(e).get(this.userId).next(t=>t||new Jh(this.userId,-1,""))}}function DR(n,e,t){const r=Es.prefixForPath(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return ay(n).jt({range:a,Kt:!0},(p,_,w)=>{const[T,A,x]=p;T===e&&A===i&&(u=!0),w.done()}).next(()=>u)}function ef(n){return vo(n,qn.store)}function ay(n){return vo(n,Es.store)}function ER(n){return vo(n,Jh.store)}class pg{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new pg(0)}static re(){return new pg(-1)}}class qF{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new pg(t.highestTargetId);return t.highestTargetId=r.next(),this.ce(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>Mt.fromTimestamp(new ei(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.ce(e,i)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ce(e,r))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ly(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.ce(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ly(e).jt((u,p)=>{const _=xb(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>Re.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ly(e).jt((r,i)=>{const a=xb(i);t(a)})}oe(e){return CR(e).get(Qo.key).next(t=>(Dt(null!==t),t))}ce(e,t){return CR(e).put(Qo.key,t)}ae(e,t){return ly(e).put(mR(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Zo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ly(e).jt({range:i,index:yo.queryTargetsIndexName},(u,p,_)=>{const w=xb(p);qh(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=tf(e);return t.forEach(u=>{const p=Nl(u.path);i.push(a.put(new es(r,p))),i.push(this.referenceDelegate.addReference(e,r,u))}),Re.waitFor(i)}removeMatchingKeys(e,t,r){const i=tf(e);return Re.forEach(t,a=>{const u=Nl(a.path);return Re.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=tf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=tf(e);let a=wn();return i.jt({range:r,Kt:!0},(u,p,_)=>{const w=od(u[1]),T=new st(w);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=Nl(t.path),i=IDBKeyRange.bound([r],[cb(r)],!1,!0);let a=0;return tf(e).jt({index:es.documentTargetsIndex,Kt:!0,range:i},([u,p],_,w)=>{0!==u&&(a++,w.done())}).next(()=>a>0)}Et(e,t){return ly(e).get(t).next(r=>r?xb(r):null)}}function ly(n){return vo(n,yo.store)}function CR(n){return vo(n,Qo.store)}function tf(n){return vo(n,es.store)}function gg(n){return uS.apply(this,arguments)}function uS(){return uS=(0,fe.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==uR)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),uS.apply(this,arguments)}function TR([n,e],[t,r]){const i=Gt(n,t);return 0===i?Gt(e,r):i}class zF{constructor(e){this.he=e,this.buffer=new Vn(TR),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KF{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;Le("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,fe.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){hg(i)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield gg(i)}yield t.me(e)}))}}class ZF{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Re.resolve(Ji.I);const r=new zF(t);return this.ge.forEachTarget(e,i=>r.de(i.sequenceNumber)).next(()=>this.ge.pe(e,i=>r.de(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(bR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bR):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,i,a,u,p,_,w;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,u=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,p=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),U_()<=hn.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-T}ms\n\tDetermined least recently used ${i} in `+(p-u)+`ms\n\tRemoved ${a} targets in `+(_-p)+`ms\n\tRemoved ${A} documents in `+(w-_)+`ms\nTotal Duration: ${w-T}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class YF{constructor(e,t){this.db=e,this.garbageCollector=new ZF(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,i)=>t(i))}addReference(e,t,r){return gC(e,r)}removeReference(e,t,r){return gC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gC(e,t)}Ae(e,t){return function(r,i){let a=!1;return ER(r).Qt(u=>DR(r,u,i).next(p=>(p&&(a=!0),Re.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ie(e,(u,p)=>{if(p<=t){const _=this.Ae(e,u).next(w=>{if(!w)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u),tf(e).delete([0,Nl(u.path)])))});i.push(_)}}).next(()=>Re.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gC(e,t)}Ie(e,t){const r=tf(e);let i,a=Ji.I;return r.jt({index:es.documentTargetsIndex},([u,p],{path:_,sequenceNumber:w})=>{0===u?(a!==Ji.I&&t(new st(od(i)),a),a=w,i=_):a=Ji.I}).next(()=>{a!==Ji.I&&t(new st(od(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gC(n,e){return tf(n).put((r=n.currentSequenceNumber,new es(0,Nl(e.path),r)));var r}class uy{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){mi(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return ZE(this.inner)}}class IR{constructor(){this.changes=new uy(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Mt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Ln.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Re.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QF{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return nf(e).put(mC(t),r)}removeEntry(e,t){const r=nf(e),i=mC(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return nf(e).get(mC(t)).next(r=>this.be(t,r))}Pe(e,t){return nf(e).get(mC(t)).next(r=>({document:this.be(t,r),size:pC(r)}))}getEntries(e,t){let r=Ds();return this.ve(e,t,(i,a)=>{const u=this.be(i,a);r=r.insert(i,u)}).next(()=>r)}Ve(e,t){let r=Ds(),i=new wt(st.comparator);return this.ve(e,t,(a,u)=>{const p=this.be(a,u);r=r.insert(a,p),i=i.insert(a,pC(u))}).next(()=>({documents:r,Se:i}))}ve(e,t,r){if(t.isEmpty())return Re.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let u=a.getNext();return nf(e).jt({range:i},(p,_,w)=>{const T=st.fromSegments(p);for(;u&&st.comparator(u,T)<0;)r(u,null),u=a.getNext();u&&u.isEqual(T)&&(r(u,_),u=a.hasNext()?a.getNext():null),u?w.Lt(u.path.toArray()):w.done()}).next(()=>{for(;u;)r(u,null),u=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r){let i=Ds();const a=t.path.length+1,u={};if(r.isEqual(Mt.min())){const p=t.path.toArray();u.range=IDBKeyRange.lowerBound(p)}else{const p=t.path.toArray(),_=sS(r);u.range=IDBKeyRange.lowerBound([p,_],!0),u.index=Ir.collectionReadTimeIndex}return nf(e).jt(u,(p,_,w)=>{if(p.length!==a)return;const T=iS(this.k,_);t.path.isPrefixOf(T.key.path)?lg(t,T)&&(i=i.insert(T.key,T)):w.done()}).next(()=>i)}newChangeBuffer(e){return new JF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return SR(e).get(Vu.key).next(t=>(Dt(!!t),t))}Re(e,t){return SR(e).put(Vu.key,t)}be(e,t){if(t){const r=iS(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return Ln.newInvalidDocument(e)}}class JF extends IR{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new uy(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Vn((a,u)=>Gt(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const p=this.Ce.get(a);if(u.document.isValidDocument()){const _=pR(this.De.k,u.document,this.getReadTime(a));i=i.add(a.path.popLast()),r+=pC(_)-p,t.push(this.De.addEntry(e,a,_))}else if(r-=p,this.trackRemovals){const _=pR(this.De.k,Ln.newNoDocument(a,Mt.min()),this.getReadTime(a));t.push(this.De.addEntry(e,a,_))}else t.push(this.De.removeEntry(e,a))}),i.forEach(a=>{t.push(this.De.Jt.addToCollectionParentIndex(e,a))}),t.push(this.De.updateMetadata(e,r)),Re.waitFor(t)}getFromCache(e,t){return this.De.Pe(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:i})=>(i.forEach((a,u)=>{this.Ce.set(a,u)}),r))}}function SR(n){return vo(n,Vu.store)}function nf(n){return vo(n,Ir.store)}function mC(n){return n.path.toArray()}class XF{constructor(e){this.k=e}Nt(e,t,r,i){Dt(r<i&&r>=0&&i<=11);const a=new fC("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore(Yo.store),(p=e).createObjectStore(Jh.store,{keyPath:Jh.keyPath}),p.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0}),p.createObjectStore(Es.store),AR(e),function(p){p.createObjectStore(Ir.store)}(e));let u=Re.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore(es.store),p.deleteObjectStore(yo.store),p.deleteObjectStore(Qo.store)}(e),AR(e)),u=u.next(()=>function(p){const _=p.store(Qo.store),w=new Qo(0,0,Mt.min().toTimestamp(),0);return _.put(Qo.key,w)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(p,_){return _.store(qn.store).Bt().next(w=>{p.deleteObjectStore(qn.store),p.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0});const T=_.store(qn.store),A=w.map(x=>T.put(x));return Re.waitFor(A)})}(e,a))),u=u.next(()=>{!function(p){p.createObjectStore(ad.store,{keyPath:ad.keyPath})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ne(a))),r<6&&i>=6&&(u=u.next(()=>(function(p){p.createObjectStore(Vu.store)}(e),this.ke(a)))),r<7&&i>=7&&(u=u.next(()=>this.xe(a))),r<8&&i>=8&&(u=u.next(()=>this.$e(e,a))),r<9&&i>=9&&(u=u.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e),function(p){const _=p.objectStore(Ir.store);_.createIndex(Ir.readTimeIndex,Ir.readTimeIndexPath,{unique:!1}),_.createIndex(Ir.collectionReadTimeIndex,Ir.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(u=u.next(()=>this.Oe(a))),r<11&&i>=11&&(u=u.next(()=>{(function(p){p.createObjectStore(ny.store,{keyPath:ny.keyPath})})(e),function(p){p.createObjectStore(ry.store,{keyPath:ry.keyPath})}(e)})),u}ke(e){let t=0;return e.store(Ir.store).jt((r,i)=>{t+=pC(i)}).next(()=>{const r=new Vu(t);return e.store(Vu.store).put(Vu.key,r)})}Ne(e){const t=e.store(Jh.store),r=e.store(qn.store);return t.Bt().next(i=>Re.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.Bt(qn.userMutationsIndex,u).next(p=>Re.forEach(p,_=>{Dt(_.userId===a.userId);const w=oy(this.k,_);return wR(e,a.userId,w).next(()=>{})}))}))}xe(e){const t=e.store(es.store),r=e.store(Ir.store);return e.store(Qo.store).get(Qo.key).next(i=>{const a=[];return r.jt((u,p)=>{const _=new an(u),w=[0,Nl(_)];a.push(t.get(w).next(T=>T?Re.resolve():t.put(new es(0,Nl(_),i.highestListenSequenceNumber))))}).next(()=>Re.waitFor(a))})}$e(e,t){e.createObjectStore(dg.store,{keyPath:dg.keyPath});const r=t.store(dg.store),i=new aS,a=u=>{if(i.add(u)){const p=u.lastSegment(),_=u.popLast();return r.put({collectionId:p,parent:Nl(_)})}};return t.store(Ir.store).jt({Kt:!0},(u,p)=>{const _=new an(u);return a(_.popLast())}).next(()=>t.store(Es.store).jt({Kt:!0},([u,p,_],w)=>{const T=od(p);return a(T.popLast())}))}Oe(e){const t=e.store(yo.store);return t.jt((r,i)=>{const a=xb(i),u=mR(this.k,a);return t.put(u)})}}function AR(n){n.createObjectStore(es.store,{keyPath:es.keyPath}).createIndex(es.documentTargetsIndex,es.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(yo.store,{keyPath:yo.keyPath}).createIndex(yo.queryTargetsIndexName,yo.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Qo.store)}const cS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dS{constructor(e,t,r,i,a,u,p,_,w,T){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Me=a,this.window=u,this.document=p,this.Fe=w,this.Le=T,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=A=>Promise.resolve(),!dS.Pt())throw new Me(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YF(this,i),this.Ge=t+"main",this.k=new fR(_),this.ze=new Ml(this.Ge,11,new XF(this.k)),this.He=new qF(this.referenceDelegate,this.k),this.Jt=new WF,this.Je=new QF(this.k,this.Jt),this.Ye=new HF,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===T&&kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(de.FAILED_PRECONDITION,cS);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new Ji(e,this.Fe)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,fe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_C(e).put(new ad(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.cn(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(hg(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Me.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return kb(e).get(Yo.key).next(t=>Re.resolve(this.un(t)))}hn(e){return _C(e).delete(this.clientId)}ln(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=vo(r,ad.store);return i.Bt().next(a=>{const u=e.dn(a,18e5),p=a.filter(_=>-1===u.indexOf(_));return Re.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Re.resolve(!0):kb(e).get(Yo.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Me(de.FAILED_PRECONDITION,cS);return!1}}return!(!this.networkEnabled||!this.inForeground)||_C(e).Bt().next(r=>void 0===this.dn(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Yo.store,ad.store],t=>{const r=new hR(t,Ji.I);return e.cn(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>_C(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return lS.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let a;return Le("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",UF,u=>(a=new hR(u,this.Be?this.Be.next():Ji.I),"readwrite-primary"===t?this.rn(a).next(p=>!!p||this.on(a)).next(p=>{if(!p)throw kr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)),new Me(de.FAILED_PRECONDITION,uR);return r(a)}).next(p=>this.an(a).next(()=>p)):this.En(a).next(()=>r(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}En(e){return kb(e).get(Yo.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(de.FAILED_PRECONDITION,cS)})}an(e){const t=new Yo(this.clientId,this.allowTabSynchronization,Date.now());return kb(e).put(Yo.key,t)}static Pt(){return Ml.Pt()}cn(e){const t=kb(e);return t.get(Yo.key).next(r=>this.un(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete(Yo.key)):Re.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(kr(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Me.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Me.enterRestrictedMode(!0),this.Me.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){kr("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kb(n){return vo(n,Yo.store)}function _C(n){return vo(n,ad.store)}function hS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class eL{constructor(e,t){this.progress=e,this.In=t}}class NR{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.bn(e,t,r))}bn(e,t,r){return this.Je.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Pn(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Pn(t,r))}getDocumentsMatchingQuery(e,t,r){return st.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Sn(e,t.path):Kh(t)?this.Dn(e,t,r):this.Cn(e,t,r);var i}Sn(e,t){return this.Rn(e,new st(t)).next(r=>{let i=cg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Dn(e,t,r){const i=t.collectionGroup;let a=cg();return this.Jt.getCollectionParents(e,i).next(u=>Re.forEach(u,p=>{const _=(w=t,T=p.child(i),new Al(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,T;return this.Cn(e,_,r).next(w=>{w.forEach((T,A)=>{a=a.insert(T,A)})})}).next(()=>a))}Cn(e,t,r){let i,a;return this.Je.getDocumentsMatchingQuery(e,t,r).next(u=>(i=u,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(u=>(a=u,this.Nn(e,a,i).next(p=>{i=p;for(const _ of a)for(const w of _.mutations){const T=w.key;let A=i.get(T);null==A&&(A=Ln.newInvalidDocument(T),i=i.insert(T,A)),m(w,A,_.localWriteTime),A.isFoundDocument()||(i=i.remove(T))}}))).next(()=>(i.forEach((u,p)=>{lg(t,p)||(i=i.remove(u))}),i))}Nn(e,t,r){let i=wn();for(const u of t)for(const p of u.mutations)p instanceof R&&null===r.get(p.key)&&(i=i.add(p.key));let a=r;return this.Je.getEntries(e,i).next(u=>(u.forEach((p,_)=>{_.isFoundDocument()&&(a=a.insert(p,_))}),a))}}class fS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=i}static $n(e,t){let r=wn(),i=wn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new fS(e,t.fromCache,r,i)}}class MR{On(e){this.Mn=e}getDocumentsMatchingQuery(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Mt.min())?this.Fn(e,t):this.Mn.vn(e,i).next(a=>{const u=this.Ln(t,a);return(ig(t)||K_(t))&&this.Bn(t.limitType,u,i,r)?this.Fn(e,t):(U_()<=hn.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Db(t)),this.Mn.getDocumentsMatchingQuery(e,t,r).next(p=>(u.forEach(_=>{p=p.insert(_.key,_)}),p)))});var a}Ln(e,t){let r=new Vn(WI(e));return t.forEach((i,a)=>{lg(e,a)&&(r=r.add(a))}),r}Bn(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Fn(e,t){return U_()<=hn.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Db(t)),this.Mn.getDocumentsMatchingQuery(e,t,Mt.min())}}class tL{constructor(e,t,r,i){this.persistence=e,this.Un=t,this.k=i,this.qn=new wt(Gt),this.Kn=new uy(a=>Zo(a),qh),this.jn=Mt.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new NR(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function RR(n,e,t,r){return new tL(n,e,t,r)}function OR(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,fe.Z)(function*(n,e){const t=We(n);let r=t.An,i=t.Wn;const a=yield t.persistence.runTransaction("Handle user change","readonly",u=>{let p;return t.An.getAllMutationBatches(u).next(_=>(p=_,r=t.persistence.getMutationQueue(e),i=new NR(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(u))).next(_=>{const w=[],T=[];let A=wn();for(const x of p){w.push(x.batchId);for(const V of x.mutations)A=A.add(V.key)}for(const x of _){T.push(x.batchId);for(const V of x.mutations)A=A.add(V.key)}return i.vn(u,A).next(x=>({Gn:x,removedBatchIds:w,addedBatchIds:T}))})});return t.An=r,t.Wn=i,t.Un.On(t.Wn),a}),pS.apply(this,arguments)}function nL(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Qn.newChangeBuffer({trackRemovals:!0});return function(u,p,_,w){const T=_.batch,A=T.keys();let x=Re.resolve();return A.forEach(V=>{x=x.next(()=>w.getEntry(p,V)).next(z=>{const oe=_.docVersions.get(V);Dt(null!==oe),z.version.compareTo(oe)<0&&(T.applyToRemoteDocument(z,_),z.isValidDocument()&&w.addEntry(z,_.commitVersion))})}),x.next(()=>u.An.removeMutationBatch(p,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,i))})}function xR(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function rL(n,e){const t=We(n),r=e.snapshotVersion;let i=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Qn.newChangeBuffer({trackRemovals:!0});i=t.qn;const p=[];e.targetChanges.forEach((w,T)=>{const A=i.get(T);if(!A)return;p.push(t.He.removeMatchingKeys(a,w.removedDocuments,T).next(()=>t.He.addMatchingKeys(a,w.addedDocuments,T)));let x=A.withSequenceNumber(a.currentSequenceNumber);var V,z,oe;e.targetMismatches.has(T)?x=x.withResumeToken(Pr.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):w.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(w.resumeToken,r)),i=i.insert(T,x),z=x,oe=w,(0===(V=A).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0)&&p.push(t.He.updateTargetData(a,x))});let _=Ds();if(e.documentUpdates.forEach((w,T)=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),p.push(kR(a,u,e.documentUpdates,r,void 0).next(w=>{_=w})),!r.isEqual(Mt.min())){const w=t.He.getLastRemoteSnapshotVersion(a).next(T=>t.He.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(w)}return Re.waitFor(p).next(()=>u.apply(a)).next(()=>t.Wn.Vn(a,_)).next(()=>_)}).then(a=>(t.qn=i,a))}function kR(n,e,t,r,i){let a=wn();return t.forEach(u=>a=a.add(u)),e.getEntries(n,a).next(u=>{let p=Ds();return t.forEach((_,w)=>{const T=u.get(_),A=(null==i?void 0:i.get(_))||r;w.isNoDocument()&&w.version.isEqual(Mt.min())?(e.removeEntry(_,A),p=p.insert(_,w)):!T.isValidDocument()||w.version.compareTo(T.version)>0||0===w.version.compareTo(T.version)&&T.hasPendingWrites?(e.addEntry(w,A),p=p.insert(_,w)):Le("LocalStore","Ignoring outdated watch update for ",_,". Current version:",T.version," Watch version:",w.version)}),p})}function iL(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function cy(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.He.getTargetData(r,e).next(a=>a?(i=a,Re.resolve(i)):t.He.allocateTargetId(r).next(u=>(i=new Xh(e,u,0,r.currentSequenceNumber),t.He.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qn.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function dy(n,e,t){return gS.apply(this,arguments)}function gS(){return gS=(0,fe.Z)(function*(n,e,t){const r=We(n),i=r.qn.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!hg(u))throw u;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.qn=r.qn.remove(e),r.Kn.delete(i.target)}),gS.apply(this,arguments)}function yC(n,e,t){const r=We(n);let i=Mt.min(),a=wn();return r.persistence.runTransaction("Execute query","readonly",u=>function(p,_,w){const T=We(p),A=T.Kn.get(w);return void 0!==A?Re.resolve(T.qn.get(A)):T.He.getTargetData(_,w)}(r,u,Hs(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(u,p.targetId).next(_=>{a=_})}).next(()=>r.Un.getDocumentsMatchingQuery(u,e,t?i:Mt.min(),t?a:wn())).next(p=>({documents:p,zn:a})))}function PR(n,e){const t=We(n),r=We(t.He),i=t.qn.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(u=>u?u.target:null))}function FR(n){const e=We(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,a){const u=We(r);let p=Ds(),_=sS(a);const w=nf(i),T=IDBKeyRange.lowerBound(_,!0);return w.jt({index:Ir.readTimeIndex,range:T},(A,x)=>{const V=iS(u.k,x);p=p.insert(V.key,V),_=x.readTime}).next(()=>({In:p,readTime:gR(_)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function mS(){return mS=(0,fe.Z)(function*(n){const e=We(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=nf(r);let a=Mt.min();return i.jt({index:Ir.readTimeIndex,reverse:!0},(u,p,_)=>{p.readTime&&(a=gR(p.readTime)),_.done()}).next(()=>a)}(t)).then(t=>{e.jn=t})}),mS.apply(this,arguments)}function _S(){return _S=(0,fe.Z)(function*(n,e,t,r){const i=We(n);let a=wn(),u=Ds(),p=X_();for(const T of t){const A=e.Hn(T.metadata.name);T.document&&(a=a.add(A)),u=u.insert(A,e.Jn(T)),p=p.insert(A,e.Yn(T.metadata.readTime))}const _=i.Qn.newChangeBuffer({trackRemovals:!0}),w=yield cy(i,(T=r,Hs(sd(an.fromString(`__bundle__/docs/${T}`)))));var T;return i.persistence.runTransaction("Apply bundle documents","readwrite",T=>kR(T,_,u,Mt.min(),p).next(A=>(_.apply(T),A)).next(A=>i.He.removeMatchingKeysForTargetId(T,w.targetId).next(()=>i.He.addMatchingKeys(T,a,w.targetId)).next(()=>i.Wn.Vn(T,A)).next(()=>A)))}),_S.apply(this,arguments)}function aL(n,e){return yS.apply(this,arguments)}function yS(){return yS=(0,fe.Z)(function*(n,e,t=wn()){const r=yield cy(n,Hs(oS(e.bundledQuery))),i=We(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=Mi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ye.saveNamedQuery(a,e);const p=r.withResumeToken(Pr.EMPTY_BYTE_STRING,u);return i.qn=i.qn.insert(p.targetId,p),i.He.updateTargetData(a,p).next(()=>i.He.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.He.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ye.saveNamedQuery(a,e))})}),yS.apply(this,arguments)}class lL{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Re.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:Mi(r.createTime)}),Re.resolve()}getNamedQuery(e,t){return Re.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:oS(r.bundledQuery),readTime:Mi(r.readTime)}),Re.resolve();var r}}class vS{constructor(){this.ts=new Vn(Ri.es),this.ns=new Vn(Ri.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new Ri(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new Ri(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new st(new an([])),r=new Ri(t,e),i=new Ri(t,e+1),a=[];return this.ns.forEachInRange([r,i],u=>{this.os(u),a.push(u.key)}),a}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new st(new an([])),r=new Ri(t,e),i=new Ri(t,e+1);let a=wn();return this.ns.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Ri(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ri{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return st.comparator(e.key,t.key)||Gt(e.fs,t.fs)}static ss(e,t){return Gt(e.fs,t.fs)||st.comparator(e.key,t.key)}}class uL{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new Vn(Ri.es)}checkEmpty(e){return Re.resolve(0===this.An.length)}addMutationBatch(e,t,r,i){const a=this.ds;this.ds++;const u=new nS(a,t,r,i);this.An.push(u);for(const p of i)this.ws=this.ws.add(new Ri(p.key,a)),this.Jt.addToCollectionParentIndex(e,p.key.path.popLast());return Re.resolve(u)}lookupMutationBatch(e,t){return Re.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.gs(t+1),a=i<0?0:i;return Re.resolve(this.An.length>a?this.An[a]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Re.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ri(t,0),i=new Ri(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],u=>{const p=this._s(u.fs);a.push(p)}),Re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(Gt);return t.forEach(i=>{const a=new Ri(i,0),u=new Ri(i,Number.POSITIVE_INFINITY);this.ws.forEachInRange([a,u],p=>{r=r.add(p.fs)})}),Re.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;st.isDocumentKey(a)||(a=a.child(""));const u=new Ri(new st(a),0);let p=new Vn(Gt);return this.ws.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(p=p.add(_.fs)),!0)},u),Re.resolve(this.ys(p))}ys(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return Re.forEach(t.mutations,i=>{const a=new Ri(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new Ri(t,0),i=this.ws.firstAfterOrEqual(r);return Re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Re.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class cL{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new wt(st.comparator),this.size=0}addEntry(e,t,r){const i=t.key,a=this.docs.get(i),u=a?a.size:0,p=this.Ts(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:p,readTime:r}),this.size+=p-u,this.Jt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Re.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=Ds();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ln.newInvalidDocument(i))}),Re.resolve(r)}getDocumentsMatchingQuery(e,t,r){let i=Ds();const a=new st(t.path.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:p,value:{document:_,readTime:w}}=u.getNext();if(!t.path.isPrefixOf(p.path))break;w.compareTo(r)<=0||lg(t,_)&&(i=i.insert(_.key,_.mutableCopy()))}return Re.resolve(i)}Es(e,t){return Re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dL(this)}getSize(e){return Re.resolve(this.size)}}class dL extends IR{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?t.push(this.De.addEntry(e,i.document,this.getReadTime(r))):this.De.removeEntry(r)}),Re.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class hL{constructor(e){this.persistence=e,this.Is=new uy(t=>Zo(t),qh),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.As=0,this.Rs=new vS,this.targetCount=0,this.bs=pg.ie()}forEachTarget(e,t){return this.Is.forEach((r,i)=>t(i)),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),Re.resolve()}ae(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new pg(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Re.resolve()}updateTargetData(e,t){return this.ae(t),Re.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Is.forEach((u,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Is.delete(u),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),Re.waitFor(a).next(()=>i)}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return Re.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),Re.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),Re.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return Re.resolve(r)}containsKey(e,t){return Re.resolve(this.Rs.containsKey(t))}}class fL{constructor(e,t){this.Ps={},this.Be=new Ji(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new hL(this),this.Jt=new $F,this.Je=new cL(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new fR(t),this.Ye=new lL(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new uL(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new pL(this.Be.next());return this.referenceDelegate.Vs(),r(i).next(a=>this.referenceDelegate.Ss(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ds(e,t){return Re.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class pL extends cR{constructor(e){super(),this.currentSequenceNumber=e}}class bS{constructor(e){this.persistence=e,this.Cs=new vS,this.Ns=null}static ks(e){return new bS(e)}get xs(){if(this.Ns)return this.Ns;throw lt()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),Re.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),Re.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Re.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(i=>this.xs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.xs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.xs,r=>{const i=st.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Re.or([()=>Re.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function LR(n,e){return`firestore_clients_${n}_${e}`}function VR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wS(n,e){return`firestore_targets_${n}_${e}`}class vC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Os(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Me(i.error.code,i.error.message))),u?new vC(e,t,i.state,a):(kr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pb{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Os(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Me(r.error.code,r.error.message))),a?new Pb(e,r.state,i):(kr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Os(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=cC();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=JE(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new bC(e,a):(kr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class DS{constructor(e,t){this.clientId=e,this.onlineState=t}static Os(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new DS(t.clientId,t.onlineState):(kr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ES{constructor(){this.activeTargetIds=cC()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ms(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CS{constructor(e,t,r,i,a){this.window=e,this.Me=t,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new wt(Gt),this.started=!1,this.js=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=LR(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new ES),this.Gs=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(p){return`firestore_bundle_loaded_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static Pt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.Tn();for(const i of t){if(i===e.Bs)continue;const a=e.getItem(LR(e.persistenceKey,i));if(a){const u=bC.Os(i,a);u&&(e.Ks=e.Ks.insert(u.clientId,u))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const i=e.Zs(r);i&&e.ti(i)}for(const i of e.js)e.qs(i);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(wS(this.persistenceKey,e));if(r){const i=Pb.Os(e,r);i&&(t=i.state)}}return this.ii.Fs(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wS(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.si(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ci()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const i=t.ai(r.key);return t.ui(i,null)}{const i=t.hi(r.key,r.newValue);if(i)return t.ui(i.clientId,i)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const i=t.li(r.key,r.newValue);if(i)return t.fi(i)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const i=t.di(r.key,r.newValue);if(i)return t.wi(i)}}else if(r.key===t.Js){if(null!==r.newValue){const i=t.Zs(r.newValue);if(i)return t.ti(i)}}else if(r.key===t.Ws){const i=function(a){let u=Ji.I;if(null!=a)try{const p=JSON.parse(a);Dt("number"==typeof p),u=p}catch(p){kr("SharedClientState","Failed to read sequence number from WebStorage",p)}return u}(r.newValue);i!==Ji.I&&t.sequenceNumberHandler(i)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Ms())}ni(e,t,r){const i=new vC(this.currentUser,e,t,r),a=VR(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ms())}si(e){const t=VR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const i=wS(this.persistenceKey,e),a=new Pb(e,t,r);this.setItem(i,a.Ms())}ci(){this.setItem(this.Ys,"value-not-used")}ai(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ai(e);return bC.Os(r,t)}li(e,t){const r=this.zs.exec(e),i=Number(r[1]);return vC.Os(new gi(void 0!==r[2]?r[2]:null),i,t)}di(e,t){const r=this.Hs.exec(e),i=Number(r[1]);return Pb.Os(i,t)}Zs(e){return DS.Os(e)}fi(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),u=[],p=[];return a.forEach(_=>{i.has(_)||u.push(_)}),i.forEach(_=>{a.has(_)||p.push(_)}),this.syncEngine.yi(u,p).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=cC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class BR{constructor(){this.pi=new ES,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new ES,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class gL{Ei(e){}shutdown(){}}class UR{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const mL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class _L{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Mi(e){this.xi(e)}}class yL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,i,a){const u=this.Ui(e,t);Le("RestConnection","Sending: ",u,r);const p={};return this.qi(p,i,a),this.Ki(e,u,p,r).then(_=>(Le("RestConnection","Received: ",_),_),_=>{throw Gh("RestConnection",`${e} failed with error: `,_,"url: ",u,"request:",r),_})}ji(e,t,r,i,a){return this.Bi(e,t,r,i,a)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+jh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Ui(e,t){return`${this.Fi}/v1/${t}:${mL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,i){return new Promise((a,u)=>{const p=new Uh;p.listenOnce(OM.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case qE.NO_ERROR:const w=p.getResponseJson();Le("Connection","XHR received:",JSON.stringify(w)),a(w);break;case qE.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),u(new Me(de.DEADLINE_EXCEEDED,"Request time out"));break;case qE.HTTP_ERROR:const T=p.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',T,"response text:",p.getResponseText()),T>0){const A=p.getResponseJson().error;if(A&&A.status&&A.message){const x=function(V){const z=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(z)>=0?z:de.UNKNOWN}(A.status);u(new Me(x,A.message))}else u(new Me(de.UNKNOWN,"Server responded with status "+p.getStatus()))}else u(new Me(de.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}Qi(e,t,r){const i=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=MM(),u=RM(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new kM({})),this.qi(p.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Le("Connection","Creating WebChannel: "+_,p);const w=a.createWebChannel(_,p);let T=!1,A=!1;const x=new _L({Vi:z=>{A?Le("Connection","Not sending because WebChannel is closed:",z):(T||(Le("Connection","Opening WebChannel transport."),w.open(),T=!0),Le("Connection","WebChannel sending:",z),w.send(z))},Si:()=>w.close()}),V=(z,oe,xe)=>{z.listen(oe,ct=>{try{xe(ct)}catch(dt){setTimeout(()=>{throw dt},0)}})};return V(w,Bh.EventType.OPEN,()=>{A||Le("Connection","WebChannel transport opened.")}),V(w,Bh.EventType.CLOSE,()=>{A||(A=!0,Le("Connection","WebChannel transport closed"),x.Oi())}),V(w,Bh.EventType.ERROR,z=>{A||(A=!0,Gh("Connection","WebChannel transport errored:",z),x.Oi(new Me(de.UNAVAILABLE,"The operation could not be completed")))}),V(w,Bh.EventType.MESSAGE,z=>{var oe;if(!A){const xe=z.data[0];Dt(!!xe);const ct=xe,dt=ct.error||(null===(oe=ct[0])||void 0===oe?void 0:oe.error);if(dt){Le("Connection","WebChannel received error:",dt);const Wt=dt.status;let Rt=function(wo){const kg=Be[wo];if(void 0!==kg)return Vt(kg)}(Wt),yn=dt.message;void 0===Rt&&(Rt=de.INTERNAL,yn="Unknown error status: "+Wt+" with message "+dt.message),A=!0,x.Oi(new Me(Rt,yn)),w.close()}else Le("Connection","WebChannel received:",xe),x.Mi(xe)}}),V(u,xM.STAT_EVENT,z=>{z.stat===Xp.PROXY?Le("Connection","Detected buffering proxy"):z.stat===Xp.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.$i()},0),x}}function jR(){return"undefined"!=typeof window?window:null}function wC(){return"undefined"!=typeof document?document:null}function Fb(n){return new TF(n,!0)}class TS{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Me=e,this.timerId=t,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,i,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class GR{constructor(e,t,r,i,a,u,p,_){this.Me=e,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new TS(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,fe.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,fe.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(kr(t.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.rr===t&&this.Ir(r,i)},r=>{e(()=>{const i=new Me(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(i)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(i=>{r(()=>this.Ar(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}dr(){var e=this;this.state=5,this.ur.Zi((0,fe.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Me.enqueueAndForget(()=>this.rr===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vL extends GR{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.k=a}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function AF(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:lt(),i=e.targetChange.targetIds||[],a=function(_,w){return _.C?(Dt(void 0===w||"string"==typeof w),Pr.fromBase64String(w||"")):(Dt(void 0===w||w instanceof Uint8Array),Pr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&function(_){const w=void 0===_.code?de.UNKNOWN:Vt(_.code);return new Me(w,_.message||"")}(u);t=new $M(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Lu(n,r.document.name),a=Mi(r.document.updateTime),u=new Ai({mapValue:{fields:r.document.fields}}),p=Ln.newFoundDocument(i,a,u);t=new dC(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Lu(n,r.document),a=r.readTime?Mi(r.readTime):Mt.min(),u=Ln.newNoDocument(i,a);t=new dC([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Lu(n,r.document);t=new dC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,a=new Ge(r.count||0);t=new HM(r.targetId,a)}}var _;return t}(this.k,e),r=function(i){if(!("targetChange"in i))return Mt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Mt.min():a.readTime?Mi(a.readTime):Mt.min()}(e);return this.listener.br(t,r)}Pr(e){const t={};t.database=Rb(this.k),t.addTarget=function(i,a){let u;const p=a.target;return u=zh(p)?{documents:tR(i,p)}:{query:nR(i,p)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=KM(i,a.resumeToken):a.snapshotVersion.compareTo(Mt.min())>0&&(u.readTime=Nb(i,a.snapshotVersion.toTimestamp())),u}(this.k,e);const r=function MF(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=Rb(this.k),t.removeTarget=e,this.gr(t)}}class bL extends GR{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.k=a,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function NF(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,i){let a=Mi(r.updateTime?r.updateTime:i);return a.isEqual(Mt.min())&&(a=Mi(i)),new s(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Mi(e.commitTime);return this.listener.Cr(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Rb(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hC(this.k,r))};this.gr(t)}}class wL extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=i,this.$r=!1}Or(){if(this.$r)throw new Me(de.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.ir.Bi(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(de.UNKNOWN,i.toString())})}ji(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.ir.ji(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(de.UNKNOWN,i.toString())})}terminate(){this.$r=!0}}class DL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(kr(t),this.Lr=!1):Le("OnlineStateTracker",t)}jr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class EL{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei(p=>{r.enqueueAndForget((0,fe.Z)(function*(){var _;rf(u)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,fe.Z)(function*(w){const T=We(w);T.Gr.add(4),yield hy(T),T.Jr.set("Unknown"),T.Gr.delete(4),yield Lb(T)}),function(w){return _.apply(this,arguments)})(u))}))}),this.Jr=new DL(r,i)}}function Lb(n){return IS.apply(this,arguments)}function IS(){return IS=(0,fe.Z)(function*(n){if(rf(n))for(const e of n.zr)yield e(!0)}),IS.apply(this,arguments)}function hy(n){return SS.apply(this,arguments)}function SS(){return SS=(0,fe.Z)(function*(n){for(const e of n.zr)yield e(!1)}),SS.apply(this,arguments)}function DC(n,e){const t=We(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),MS(t)?NS(t):py(t).lr()&&AS(t,e))}function Vb(n,e){const t=We(n),r=py(t);t.Wr.delete(e),r.lr()&&HR(t,e),0===t.Wr.size&&(r.lr()?r._r():rf(t)&&t.Jr.set("Unknown"))}function AS(n,e){n.Yr.X(e.targetId),py(n).Pr(e)}function HR(n,e){n.Yr.X(e),py(n).vr(e)}function NS(n){n.Yr=new DF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),py(n).start(),n.Jr.Br()}function MS(n){return rf(n)&&!py(n).hr()&&n.Wr.size>0}function rf(n){return 0===We(n).Gr.size}function $R(n){n.Yr=void 0}function CL(n){return RS.apply(this,arguments)}function RS(){return RS=(0,fe.Z)(function*(n){n.Wr.forEach((e,t)=>{AS(n,e)})}),RS.apply(this,arguments)}function TL(n,e){return OS.apply(this,arguments)}function OS(){return OS=(0,fe.Z)(function*(n,e){$R(n),MS(n)?(n.Jr.Kr(e),NS(n)):n.Jr.set("Unknown")}),OS.apply(this,arguments)}function IL(n,e,t){return xS.apply(this,arguments)}function xS(){return xS=(0,fe.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof $M&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(i,a){const u=a.cause;for(const p of a.targetIds)i.Wr.has(p)&&(yield i.remoteSyncer.rejectListen(p,u),i.Wr.delete(p),i.Yr.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield EC(n,r)}else if(e instanceof dC?n.Yr.ot(e):e instanceof HM?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(Mt.min()))try{const r=yield xR(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.Yr.gt(a);return u.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const w=i.Wr.get(_);w&&i.Wr.set(_,w.withResumeToken(p.resumeToken,a))}}),u.targetMismatches.forEach(p=>{const _=i.Wr.get(p);if(!_)return;i.Wr.set(p,_.withResumeToken(Pr.EMPTY_BYTE_STRING,_.snapshotVersion)),HR(i,p);const w=new Xh(_.target,p,1,_.sequenceNumber);AS(i,w)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield EC(n,r)}var r}),xS.apply(this,arguments)}function EC(n,e,t){return kS.apply(this,arguments)}function kS(){return kS=(0,fe.Z)(function*(n,e,t){if(!hg(e))throw e;n.Gr.add(1),yield hy(n),n.Jr.set("Offline"),t||(t=()=>xR(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield Lb(n)}))}),kS.apply(this,arguments)}function WR(n,e){return e().catch(t=>EC(n,t,e))}function fy(n){return PS.apply(this,arguments)}function PS(){return PS=(0,fe.Z)(function*(n){const e=We(n),t=sf(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;SL(e);)try{const i=yield iL(e.localStore,r);if(null===i){0===e.Qr.length&&t._r();break}r=i.batchId,AL(e,i)}catch(i){yield EC(e,i)}qR(e)&&zR(e)}),PS.apply(this,arguments)}function SL(n){return rf(n)&&n.Qr.length<10}function AL(n,e){n.Qr.push(e);const t=sf(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function qR(n){return rf(n)&&!sf(n).hr()&&n.Qr.length>0}function zR(n){sf(n).start()}function NL(n){return FS.apply(this,arguments)}function FS(){return FS=(0,fe.Z)(function*(n){sf(n).kr()}),FS.apply(this,arguments)}function ML(n){return LS.apply(this,arguments)}function LS(){return LS=(0,fe.Z)(function*(n){const e=sf(n);for(const t of n.Qr)e.Dr(t.mutations)}),LS.apply(this,arguments)}function RL(n,e,t){return VS.apply(this,arguments)}function VS(){return VS=(0,fe.Z)(function*(n,e,t){const r=n.Qr.shift(),i=rS.from(r,e,t);yield WR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield fy(n)}),VS.apply(this,arguments)}function OL(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,fe.Z)(function*(n,e){var t;e&&sf(n).Sr&&(yield(t=(0,fe.Z)(function*(r,i){if(ft(a=i.code)&&a!==de.ABORTED){const u=r.Qr.shift();sf(r).wr(),yield WR(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield fy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),qR(n)&&zR(n)}),BS.apply(this,arguments)}function US(n,e){return jS.apply(this,arguments)}function jS(){return jS=(0,fe.Z)(function*(n,e){const t=We(n);e?(t.Gr.delete(2),yield Lb(t)):e||(t.Gr.add(2),yield hy(t),t.Jr.set("Unknown"))}),jS.apply(this,arguments)}function py(n){return n.Xr||(n.Xr=function(e,t,r){const i=We(e);return i.Or(),new vL(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)}(n.datastore,n.asyncQueue,{Di:CL.bind(null,n),Ni:TL.bind(null,n),br:IL.bind(null,n)}),n.zr.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Xr.wr(),MS(n)?NS(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),$R(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function sf(n){return n.Zr||(n.Zr=function(e,t,r){const i=We(e);return i.Or(),new bL(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)}(n.datastore,n.asyncQueue,{Di:NL.bind(null,n),Ni:OL.bind(null,n),Nr:ML.bind(null,n),Cr:RL.bind(null,n)}),n.zr.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Zr.wr(),yield fy(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class GS{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,p=new GS(e,t,u,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gy(n,e){if(kr("AsyncQueue",`${e}: ${n}`),hg(n))return new Me(de.UNAVAILABLE,`${e}: ${n}`);throw n}class my{constructor(e){this.comparator=e?(t,r)=>e(t,r)||st.comparator(t.key,r.key):(t,r)=>st.comparator(t.key,r.key),this.keyedMap=cg(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new my(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof my)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new my;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class KR{constructor(){this.eo=new wt(st.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):lt():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class _y{constructor(e,t,r,i,a,u,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new _y(e,t,my.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ag(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class xL{constructor(){this.so=void 0,this.listeners=[]}}class kL{constructor(){this.queries=new uy(e=>sC(e),ag),this.onlineState="Unknown",this.io=new Set}}function HS(n,e){return $S.apply(this,arguments)}function $S(){return $S=(0,fe.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new xL),i)try{a.so=yield t.onListen(r)}catch(u){const p=gy(u,`Initialization of query '${Db(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.ro(t.onlineState),a.so&&e.oo(a.so)&&zS(t)}),$S.apply(this,arguments)}function WS(n,e){return qS.apply(this,arguments)}function qS(){return qS=(0,fe.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),qS.apply(this,arguments)}function PL(n,e){const t=We(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const p of u.listeners)p.oo(i)&&(r=!0);u.so=i}}r&&zS(t)}function FL(n,e,t){const r=We(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function zS(n){n.io.forEach(e=>{e.next()})}class KS{constructor(e,t,r){this.query=e,this.co=t,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new _y(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.ao?this.ho(e)&&(this.co.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.co.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=_y.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}class LL{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class ZR{constructor(e){this.k=e}Hn(e){return Lu(this.k,e)}Jn(e){return e.metadata.exists?XM(this.k,e.document,!1):Ln.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return Mi(e)}}class VL{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=YR(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new ZR(this.k);for(const i of e)if(i.metadata.queries){const a=r.Hn(i.metadata.name);for(const u of i.metadata.queries){const p=(t.get(u)||wn()).add(a);t.set(u,p)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function oL(n,e,t,r){return _S.apply(this,arguments)}(e.localStore,new ZR(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const i of e.queries)yield aL(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new eL(Object.assign({},e.progress),t)})()}}function YR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class QR{constructor(e){this.key=e}}class JR{constructor(e){this.key=e}}class XR{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=wn(),this.mutatedKeys=wn(),this.Ao=WI(e),this.Ro=new my(this.Ao)}get bo(){return this.To}Po(e,t){const r=t?t.vo:new KR,i=t?t.Ro:this.Ro;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,p=!1;const _=ig(this.query)&&i.size===this.query.limit?i.last():null,w=K_(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,A)=>{const x=i.get(T),V=lg(this.query,A)?A:null,z=!!x&&this.mutatedKeys.has(x.key),oe=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let xe=!1;x&&V?x.data.isEqual(V.data)?z!==oe&&(r.track({type:3,doc:V}),xe=!0):this.Vo(x,V)||(r.track({type:2,doc:V}),xe=!0,(_&&this.Ao(V,_)>0||w&&this.Ao(V,w)<0)&&(p=!0)):!x&&V?(r.track({type:0,doc:V}),xe=!0):x&&!V&&(r.track({type:1,doc:x}),xe=!0,(_||w)&&(p=!0)),xe&&(V?(u=u.add(V),a=oe?a.add(T):a.delete(T)):(u=u.delete(T),a=a.delete(T)))}),ig(this.query)||K_(this.query))for(;u.size>this.query.limit;){const T=ig(this.query)?u.last():u.first();u=u.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{Ro:u,vo:r,Bn:p,mutatedKeys:a}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const a=e.vo.no();a.sort((w,T)=>function(A,x){const V=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return V(A)-V(x)}(w.type,T.type)||this.Ao(w.doc,T.doc)),this.So(r);const u=t?this.Do():[],p=0===this.Io.size&&this.current?1:0,_=p!==this.Eo;return this.Eo=p,0!==a.length||_?{snapshot:new _y(this.query,e.Ro,i,a,e.mutatedKeys,0===p,_,!1),Co:u}:{Co:u}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new KR,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=wn(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new JR(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new QR(r))}),t}ko(e){this.To=e.zn,this.Io=wn();const t=this.Po(e.documents);return this.applyChanges(t,!0)}xo(){return _y.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class BL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UL{constructor(e){this.key=e,this.$o=!1}}class jL{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Oo={},this.Mo=new uy(p=>sC(p),ag),this.Fo=new Map,this.Lo=new Set,this.Bo=new wt(st.comparator),this.Uo=new Map,this.qo=new vS,this.Ko={},this.jo=new Map,this.Qo=pg.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function GL(n,e){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,fe.Z)(function*(n,e){const t=yA(n);let r,i;const a=t.Mo.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.xo();else{const u=yield cy(t.localStore,Hs(e)),p=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield YS(t,e,r,"current"===p),t.isPrimaryClient&&DC(t.remoteStore,u)}return i}),ZS.apply(this,arguments)}function YS(n,e,t,r){return QS.apply(this,arguments)}function QS(){return QS=(0,fe.Z)(function*(n,e,t,r){n.Go=(T,A,x)=>{return(V=(0,fe.Z)(function*(z,oe,xe,ct){let dt=oe.view.Po(xe);dt.Bn&&(dt=yield yC(z.localStore,oe.query,!1).then(({documents:yn})=>oe.view.Po(yn,dt)));const Wt=ct&&ct.targetChanges.get(oe.targetId),Rt=oe.view.applyChanges(dt,z.isPrimaryClient,Wt);return aA(z,oe.targetId,Rt.Co),Rt.snapshot}),function(z,oe,xe,ct){return V.apply(this,arguments)})(n,T,A,x);var V};const i=yield yC(n.localStore,e,!0),a=new XR(e,i.zn),u=a.Po(i.documents),p=Ab.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(u,n.isPrimaryClient,p);aA(n,t,_.Co);const w=new BL(e,t,a);return n.Mo.set(e,w),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),_.snapshot}),QS.apply(this,arguments)}function HL(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,fe.Z)(function*(n,e){const t=We(n),r=t.Mo.get(e),i=t.Fo.get(r.targetId);if(i.length>1)return t.Fo.set(r.targetId,i.filter(a=>!ag(a,e))),void t.Mo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield dy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Vb(t.remoteStore,r.targetId),yy(t,r.targetId)}).catch(gg))):(yy(t,r.targetId),yield dy(t.localStore,r.targetId,!0))}),JS.apply(this,arguments)}function XS(){return XS=(0,fe.Z)(function*(n,e,t){const r=vA(n);try{const i=yield function(a,u){const p=We(a),_=ei.now(),w=u.reduce((A,x)=>A.add(x.key),wn());let T;return p.persistence.runTransaction("Locally write mutations","readwrite",A=>p.Wn.vn(A,w).next(x=>{T=x;const V=[];for(const z of u){const oe=v(z,T.get(z.key));null!=oe&&V.push(new R(z.key,oe,rg(oe.value.mapValue),o.exists(!0)))}return p.An.addMutationBatch(A,_,V,u)})).then(A=>(A.applyToLocalDocumentSet(T),{batchId:A.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,p){let _=a.Ko[a.currentUser.toKey()];_||(_=new wt(Gt)),_=_.insert(u,p),a.Ko[a.currentUser.toKey()]=_}(r,i.batchId,t),yield ld(r,i.changes),yield fy(r.remoteStore)}catch(i){const a=gy(i,"Failed to persist write");t.reject(a)}}),XS.apply(this,arguments)}function eO(n,e){return eA.apply(this,arguments)}function eA(){return eA=(0,fe.Z)(function*(n,e){const t=We(n);try{const r=yield rL(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.Uo.get(a);u&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.$o=!0:i.modifiedDocuments.size>0?Dt(u.$o):i.removedDocuments.size>0&&(Dt(u.$o),u.$o=!1))}),yield ld(t,r,e)}catch(r){yield gg(r)}}),eA.apply(this,arguments)}function tO(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Mo.forEach((a,u)=>{const p=u.view.ro(e);p.snapshot&&i.push(p.snapshot)}),function(a,u){const p=We(a);p.onlineState=u;let _=!1;p.queries.forEach((w,T)=>{for(const A of T.listeners)A.ro(u)&&(_=!0)}),_&&zS(p)}(r.eventManager,e),i.length&&r.Oo.br(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WL(n,e,t){return tA.apply(this,arguments)}function tA(){return tA=(0,fe.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Uo.get(e),a=i&&i.key;if(a){let u=new wt(st.comparator);u=u.insert(a,Ln.newNoDocument(a,Mt.min()));const p=wn().add(a),_=new Sb(Mt.min(),new Map,new Vn(Gt),u,p);yield eO(r,_),r.Bo=r.Bo.remove(a),r.Uo.delete(e),lA(r)}else yield dy(r.localStore,e,!1).then(()=>yy(r,e,t)).catch(gg)}),tA.apply(this,arguments)}function qL(n,e){return nA.apply(this,arguments)}function nA(){return nA=(0,fe.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const i=yield nL(t.localStore,e);oA(t,r,null),sA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ld(t,i)}catch(i){yield gg(i)}}),nA.apply(this,arguments)}function zL(n,e,t){return rA.apply(this,arguments)}function rA(){return rA=(0,fe.Z)(function*(n,e,t){const r=We(n);try{const i=yield function(a,u){const p=We(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return p.An.lookupMutationBatch(_,u).next(T=>(Dt(null!==T),w=T.keys(),p.An.removeMutationBatch(_,T))).next(()=>p.An.performConsistencyCheck(_)).next(()=>p.Wn.vn(_,w))})}(r.localStore,e);oA(r,e,t),sA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ld(r,i)}catch(i){yield gg(i)}}),rA.apply(this,arguments)}function iA(){return iA=(0,fe.Z)(function*(n,e){const t=We(n);rf(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=We(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>u.An.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.jo.get(r)||[];i.push(e),t.jo.set(r,i)}catch(r){const i=gy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),iA.apply(this,arguments)}function sA(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function oA(n,e,t){const r=We(n);let i=r.Ko[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ko[r.currentUser.toKey()]=i}}function yy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fo.get(e))n.Mo.delete(r),t&&n.Oo.zo(r,t);n.Fo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||nO(n,r)})}function nO(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(Vb(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),lA(n))}function aA(n,e,t){for(const r of t)r instanceof QR?(n.qo.addReference(r.key,e),ZL(n,r)):r instanceof JR?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||nO(n,r.key)):lt()}function ZL(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.Lo.add(r),lA(n))}function lA(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new st(an.fromString(e)),r=n.Qo.next();n.Uo.set(r,new UL(t)),n.Bo=n.Bo.insert(t,r),DC(n.remoteStore,new Xh(Hs(sd(t.path)),r,2,Ji.I))}}function ld(n,e,t){return uA.apply(this,arguments)}function uA(){return uA=(0,fe.Z)(function*(n,e,t){const r=We(n),i=[],a=[],u=[];var p;r.Mo.isEmpty()||(r.Mo.forEach((p,_)=>{u.push(r.Go(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const T=fS.$n(_.targetId,w);a.push(T)}}))}),yield Promise.all(u),r.Oo.br(i),yield(p=(0,fe.Z)(function*(_,w){const T=We(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Re.forEach(w,x=>Re.forEach(x.kn,V=>T.persistence.referenceDelegate.addReference(A,x.targetId,V)).next(()=>Re.forEach(x.xn,V=>T.persistence.referenceDelegate.removeReference(A,x.targetId,V)))))}catch(A){if(!hg(A))throw A;Le("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const x=A.targetId;if(!A.fromCache){const V=T.qn.get(x),oe=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);T.qn=T.qn.insert(x,oe)}}}),function(_,w){return p.apply(this,arguments)})(r.localStore,a))}),uA.apply(this,arguments)}function YL(n,e){return cA.apply(this,arguments)}function cA(){return cA=(0,fe.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield OR(t.localStore,e);t.currentUser=e,(i=t).jo.forEach(u=>{u.forEach(p=>{p.reject(new Me(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ld(t,r.Gn)}var i}),cA.apply(this,arguments)}function QL(n,e){const t=We(n),r=t.Uo.get(e);if(r&&r.$o)return wn().add(r.key);{let i=wn();const a=t.Fo.get(e);if(!a)return i;for(const u of a){const p=t.Mo.get(u);i=i.unionWith(p.view.bo)}return i}}function JL(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,fe.Z)(function*(n,e){const t=We(n),r=yield yC(t.localStore,e.query,!0),i=e.view.ko(r);return t.isPrimaryClient&&aA(t,e.targetId,i.Co),i}),dA.apply(this,arguments)}function XL(n){return hA.apply(this,arguments)}function hA(){return hA=(0,fe.Z)(function*(n){const e=We(n);return FR(e.localStore).then(t=>ld(e,t))}),hA.apply(this,arguments)}function eV(n,e,t,r){return fA.apply(this,arguments)}function fA(){return fA=(0,fe.Z)(function*(n,e,t,r){const i=We(n),a=yield function(u,p){const _=We(u),w=We(_.An);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>w.Zt(T,p).next(A=>A?_.Wn.vn(T,A):Re.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield fy(i.remoteStore):"acknowledged"===t||"rejected"===t?(oA(i,e,r||null),sA(i,e),p=e,We(We(i.localStore).An).ee(p)):lt(),yield ld(i,a)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),fA.apply(this,arguments)}function pA(){return pA=(0,fe.Z)(function*(n,e){const t=We(n);if(yA(t),vA(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield rO(t,r.toArray());t.Wo=!0,yield US(t.remoteStore,!0);for(const a of i)DC(t.remoteStore,a)}else if(!1===e&&!1!==t.Wo){const r=[];let i=Promise.resolve();t.Fo.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(yy(t,u),dy(t.localStore,u,!0))),Vb(t.remoteStore,u)}),yield i,yield rO(t,r),function(a){const u=We(a);u.Uo.forEach((p,_)=>{Vb(u.remoteStore,_)}),u.qo.hs(),u.Uo=new Map,u.Bo=new wt(st.comparator)}(t),t.Wo=!1,yield US(t.remoteStore,!1)}}),pA.apply(this,arguments)}function rO(n,e,t){return gA.apply(this,arguments)}function gA(){return gA=(0,fe.Z)(function*(n,e,t){const r=We(n),i=[],a=[];for(const u of e){let p;const _=r.Fo.get(u);if(_&&0!==_.length){p=yield cy(r.localStore,Hs(_[0]));for(const w of _){const T=r.Mo.get(w),A=yield JL(r,T);A.snapshot&&a.push(A.snapshot)}}else{const w=yield PR(r.localStore,u);p=yield cy(r.localStore,w),yield YS(r,iO(w),u,!1)}i.push(p)}return r.Oo.br(a),i}),gA.apply(this,arguments)}function iO(n){return bb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function nV(n){const e=We(n);return We(We(e.localStore).persistence).Tn()}function rV(n,e,t,r){return mA.apply(this,arguments)}function mA(){return mA=(0,fe.Z)(function*(n,e,t,r){const i=We(n);if(i.Wo)Le("SyncEngine","Ignoring unexpected query state notification.");else if(i.Fo.has(e))switch(t){case"current":case"not-current":{const a=yield FR(i.localStore),u=Sb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ld(i,a,u);break}case"rejected":yield dy(i.localStore,e,!0),yy(i,e,r);break;default:lt()}}),mA.apply(this,arguments)}function iV(n,e,t){return _A.apply(this,arguments)}function _A(){return _A=(0,fe.Z)(function*(n,e,t){const r=yA(n);if(r.Wo){for(const i of e){if(r.Fo.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const a=yield PR(r.localStore,i),u=yield cy(r.localStore,a);yield YS(r,iO(a),u.targetId,!1),DC(r.remoteStore,u)}for(const i of t)r.Fo.has(i)&&(yield dy(r.localStore,i,!1).then(()=>{Vb(r.remoteStore,i),yy(r,i)}).catch(gg))}}),_A.apply(this,arguments)}function yA(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WL.bind(null,e),e.Oo.br=PL.bind(null,e.eventManager),e.Oo.zo=FL.bind(null,e.eventManager),e}function vA(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zL.bind(null,e),e}class sO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.k=Fb(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return RR(this.persistence,new MR,e.initialUser,this.k)}Yo(e){return new fL(bS.ks,this.k)}Jo(e){return new BR}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class oO extends sO{constructor(e,t,r){super(),this.tc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield function sL(n){return mS.apply(this,arguments)}(r.localStore),yield r.tc.initialize(r,e),yield vA(r.tc.syncEngine),yield fy(r.tc.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return RR(this.persistence,new MR,e.initialUser,this.k)}Xo(e){return new KF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=hS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?bo.withCacheSize(this.cacheSizeBytes):bo.DEFAULT;return new dS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jR(),wC(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new BR}}class oV extends oO{constructor(e,t){super(e,t,!1),this.tc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const i=r.tc.syncEngine;r.sharedClientState instanceof CS&&(r.sharedClientState.syncEngine={mi:eV.bind(null,i),gi:rV.bind(null,i),yi:iV.bind(null,i),Tn:nV.bind(null,i),_i:XL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var a=(0,fe.Z)(function*(u){yield function tV(n,e){return pA.apply(this,arguments)}(r.tc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}Jo(e){const t=jR();if(!CS.Pt(t))throw new Me(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=hS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new CS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class bA{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>tO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=YL.bind(null,r.syncEngine),yield US(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new kL}createDatastore(e){const t=Fb(e.databaseInfo.databaseId),r=new yL(e.databaseInfo);return new wL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>tO(this.syncEngine,p,0),u=UR.Pt()?new UR:new gL,new EL(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,p,_,w){const T=new jL(r,i,a,u,p,_);return w&&(T.Wo=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=We(t);Le("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield hy(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function aO(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class CC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ec(this.observer.next,e)}error(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}nc(){this.muted=!0}ec(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class aV{constructor(e,t){this.sc=e,this.k=t,this.metadata=new Xr,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.rc()})()}rc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.oc();if(null===t)return null;const r=e.ic.decode(t),i=Number(r);isNaN(i)&&e.cc(`length string (${r}) is not valid number`);const a=yield e.ac(i);return new LL(JSON.parse(a),t.length+i)})()}uc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oc(){var e=this;return(0,fe.Z)(function*(){for(;e.uc()<0&&!(yield e.hc()););if(0===e.buffer.length)return null;const t=e.uc();t<0&&e.cc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ac(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.hc())&&t.cc("Reached the end of bundle when more is expected.");const r=t.ic.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}cc(e){throw this.sc.cancel(),new Error(`Invalid bundle format: ${e}`)}hc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.sc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class lV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,fe.Z)(function*(a,u){const p=We(a),_=Rb(p.k)+"/documents",w={documents:u.map(V=>Mb(p.k,V))},T=yield p.ji("BatchGetDocuments",_,w),A=new Map;T.forEach(V=>{const z=function SF(n,e){return"found"in e?function(t,r){Dt(!!r.found);const i=Lu(t,r.found.name),a=Mi(r.found.updateTime),u=new Ai({mapValue:{fields:r.found.fields}});return Ln.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const i=Lu(t,r.missing),a=Mi(r.readTime);return Ln.newNoDocument(i,a)}(n,e):lt()}(p.k,V);A.set(z.key.toString(),z)});const x=[];return u.forEach(V=>{const z=A.get(V.toString());Dt(!!z),x.push(z)}),x}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pe(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=st.fromPath(i);e.mutations.push(new Pe(a,e.precondition(a)))}),yield(r=(0,fe.Z)(function*(i,a){const u=We(i),p=Rb(u.k)+"/documents",_={writes:a.map(w=>hC(u.k,w))};yield u.Bi("Commit",p,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?o.updateTime(t):o.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new Me(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return o.updateTime(t)}return o.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uV{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.lc=5,this.ur=new TS(this.asyncQueue,"transaction_retry")}run(){this.lc-=1,this.fc()}fc(){var e=this;this.ur.Zi((0,fe.Z)(function*(){const t=new lV(e.datastore),r=e.dc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.wc(a)}))}).catch(i=>{e.wc(i)})}))}dc(e){try{const t=this.updateFunction(e);return!Sl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wc(e){this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget(()=>(this.fc(),Promise.resolve()))):this.deferred.reject(e)}_c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ft(t)}return!1}}class cV{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gi.UNAUTHENTICATED,this.clientId=ub.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,fe.Z)(function*(p){Le("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=gy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function lO(n,e){return wA.apply(this,arguments)}function wA(){return wA=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,fe.Z)(function*(a){r.isEqual(a)||(yield OR(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),wA.apply(this,arguments)}function uO(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield EA(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>{return(a=(0,fe.Z)(function*(u,p){const _=We(u);_.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const w=rf(_);_.Gr.add(3),yield hy(_),w&&_.Jr.set("Unknown"),yield _.remoteSyncer.handleCredentialChange(p),_.Gr.delete(3),yield Lb(_)}),function(u,p){return a.apply(this,arguments)})(e.remoteStore,i);var a}),n.onlineComponents=e}),DA.apply(this,arguments)}function EA(n){return CA.apply(this,arguments)}function CA(){return CA=(0,fe.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield lO(n,new sO)),n.offlineComponents}),CA.apply(this,arguments)}function TC(n){return TA.apply(this,arguments)}function TA(){return TA=(0,fe.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield uO(n,new bA)),n.onlineComponents}),TA.apply(this,arguments)}function cO(n){return EA(n).then(e=>e.persistence)}function IA(n){return EA(n).then(e=>e.localStore)}function dO(n){return TC(n).then(e=>e.remoteStore)}function SA(n){return TC(n).then(e=>e.syncEngine)}function vy(n){return AA.apply(this,arguments)}function AA(){return AA=(0,fe.Z)(function*(n){const e=yield TC(n),t=e.eventManager;return t.onListen=GL.bind(null,e.syncEngine),t.onUnlisten=HL.bind(null,e.syncEngine),t}),AA.apply(this,arguments)}function hO(n,e,t={}){const r=new Xr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,a,u,p,_){const w=new CC({next:A=>{a.enqueueAndForget(()=>WS(i,T));const x=A.docs.has(u);!x&&A.fromCache?_.reject(new Me(de.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&A.fromCache&&p&&"server"===p.source?_.reject(new Me(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),T=new KS(sd(u.path),w,{includeMetadataChanges:!0,wo:!0});return HS(i,T)}(yield vy(n),n.asyncQueue,e,t,r)})),r.promise}function fO(n,e,t={}){const r=new Xr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,a,u,p,_){const w=new CC({next:A=>{a.enqueueAndForget(()=>WS(i,T)),A.fromCache&&"server"===p.source?_.reject(new Me(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),T=new KS(u,w,{includeMetadataChanges:!0,wo:!0});return HS(i,T)}(yield vy(n),n.asyncQueue,e,t,r)})),r.promise}class vV{constructor(e,t,r,i,a,u,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class by{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof by&&e.projectId===this.projectId&&e.database===this.database}}const pO=new Map;function NA(n,e,t){if(!t)throw new Me(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gO(n,e,t,r){if(!0===e&&!0===r)throw new Me(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mO(n){if(!st.isDocumentKey(n))throw new Me(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _O(n){if(st.isDocumentKey(n))throw new Me(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function IC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=IC(n);throw new Me(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function yO(n,e){if(e<=0)throw new Me(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class vO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,gO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bb{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vO({}),this._settingsFrozen=!1,e instanceof by?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Me(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new by(i.options.projectId)}(e))}get app(){if(!this._app)throw new Me(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new PI;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new LI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pO.get(e);t&&(Le("ComponentProvider","Removing Datastore"),pO.delete(e),t.terminate())}(this),Promise.resolve()}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class Cs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cs(this.firestore,e,this._query)}}class Bu extends Cs{constructor(e,t,r){super(e,t,sd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new st(e))}withConverter(e){return new Bu(this.firestore,e,this._path)}}function bO(n,e,...t){if(n=(0,k.m9)(n),NA("collection","path",e),n instanceof Bb){const r=an.fromString(e,...t);return _O(r),new Bu(n,null,r)}{if(!(n instanceof zn||n instanceof Bu))throw new Me(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return _O(r),new Bu(n.firestore,null,r)}}function SC(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=ub.A()),NA("doc","path",e),n instanceof Bb){const r=an.fromString(e,...t);return mO(r),new zn(n,null,new st(r))}{if(!(n instanceof zn||n instanceof Bu))throw new Me(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return mO(r),new zn(n.firestore,n instanceof Bu?n.converter:null,new st(r))}}function wO(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof zn||n instanceof Bu)&&(e instanceof zn||e instanceof Bu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function DO(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof Cs&&e instanceof Cs&&n.firestore===e.firestore&&ag(n._query,e._query)&&n.converter===e.converter}class DV{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new TS(this,"async_queue_retry"),this.bc=()=>{const t=wC();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=wC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pc(),this.vc(e)}enterRestrictedMode(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;const t=wC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}enqueue(e){if(this.Pc(),this.yc)return new Promise(()=>{});const t=new Xr;return this.vc(()=>this.yc&&this.Ac?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.gc.push(e),this.Vc()))}Vc(){var e=this;return(0,fe.Z)(function*(){if(0!==e.gc.length){try{yield e.gc[0](),e.gc.shift(),e.ur.reset()}catch(t){if(!hg(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.gc.length>0&&e.ur.Zi(()=>e.Vc())}})()}vc(e){const t=this.mc.then(()=>(this.Ic=!0,e().catch(r=>{throw this.Ec=r,this.Ic=!1,kr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Ic=!1,r))));return this.mc=t,t}enqueueAfterDelay(e,t,r){this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);const i=GS.createAndSchedule(this,e,t,r,a=>this.Sc(a));return this.Tc.push(i),i}Pc(){this.Ec&&lt()}verifyOperationInProgress(){}Dc(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.mc,yield t}while(t!==e.mc)})()}Cc(e){for(const t of this.Tc)if(t.timerId===e)return!0;return!1}Nc(e){return this.Dc().then(()=>{this.Tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Dc()})}kc(e){this.Rc.push(e)}Sc(e){const t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}function MA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class EV{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mr extends Bb{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new DV,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||EO(this),this._firestoreClient.terminate()}}function yi(n){return n._firestoreClient||EO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function EO(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new vV(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new cV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function CO(n,e,t){const r=new Xr;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield lO(n,t),yield uO(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===de.FAILED_PRECONDITION||a.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function TO(n){if(n._initialized||n._terminated)throw new Me(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ud{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uu(Pr.fromBase64String(e))}catch(t){throw new Me(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Uu(Pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class mg{constructor(e){this._methodName=e}}class AC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const xV=/^__.*__$/;class kV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new R(e,this.data,this.fieldMask,t,this.fieldTransforms):new N(e,this.data,t,this.fieldTransforms)}}class IO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new R(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function SO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class NC{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.xc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(e){return new NC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Oc({path:r,Fc:!1});return i.Lc(e),i}Bc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Oc({path:r,Fc:!1});return i.xc(),i}Uc(e){return this.Oc({path:void 0,Fc:!0})}qc(e){return RC(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}Lc(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(SO(this.$c)&&xV.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}class PV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||Fb(e)}Qc(e,t,r,i=!1){return new NC({$c:e,methodName:t,jc:r,path:_i.emptyPath(),Fc:!1,Kc:i},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function _g(n){const e=n._freezeSettings(),t=Fb(n._databaseId);return new PV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function MC(n,e,t,r,i,a={}){const u=n.Qc(a.merge||a.mergeFields?2:0,e,t,i);kA("Data must be an object, but it was:",u,r);const p=MO(r,u);let _,w;if(a.merge)_=new $h(u.fieldMask),w=u.fieldTransforms;else if(a.mergeFields){const T=[];for(const A of a.mergeFields){const x=PA(e,A,t);if(!u.contains(x))throw new Me(de.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);OO(T,x)||T.push(x)}_=new $h(T),w=u.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,w=u.fieldTransforms;return new kV(new Ai(p),_,w)}class Ub extends mg{_toFieldTransform(e){if(2!==e.$c)throw e.qc(1===e.$c?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ub}}function AO(n,e,t){return new NC({$c:3,jc:e.settings.jc,methodName:n._methodName,Fc:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class RA extends mg{_toFieldTransform(e){return new Q_(e.path,new ug)}isEqual(e){return e instanceof RA}}class FV extends mg{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=AO(this,e,!0),r=this.Wc.map(a=>yg(a,t)),i=new Zh(r);return new Q_(e.path,i)}isEqual(e){return this===e}}class LV extends mg{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=AO(this,e,!0),r=this.Wc.map(a=>yg(a,t)),i=new Yh(r);return new Q_(e.path,i)}isEqual(e){return this===e}}class VV extends mg{constructor(e,t){super(e),this.Gc=t}_toFieldTransform(e){const t=new Qh(e.k,lC(e.k,this.Gc));return new Q_(e.path,t)}isEqual(e){return this===e}}function OA(n,e,t,r){const i=n.Qc(1,e,t);kA("Data must be an object, but it was:",i,r);const a=[],u=Ai.empty();mi(r,(_,w)=>{const T=FA(e,_,t);w=(0,k.m9)(w);const A=i.Bc(T);if(w instanceof Ub)a.push(T);else{const x=yg(w,A);null!=x&&(a.push(T),u.set(T,x))}});const p=new $h(a);return new IO(u,p,i.fieldTransforms)}function xA(n,e,t,r,i,a){const u=n.Qc(1,e,t),p=[PA(e,r,t)],_=[i];if(a.length%2!=0)throw new Me(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)p.push(PA(e,a[x])),_.push(a[x+1]);const w=[],T=Ai.empty();for(let x=p.length-1;x>=0;--x)if(!OO(w,p[x])){const V=p[x];let z=_[x];z=(0,k.m9)(z);const oe=u.Bc(V);if(z instanceof Ub)w.push(V);else{const xe=yg(z,oe);null!=xe&&(w.push(V),T.set(V,xe))}}const A=new $h(w);return new IO(T,A,u.fieldTransforms)}function NO(n,e,t,r=!1){return yg(t,n.Qc(r?4:3,e))}function yg(n,e){if(RO(n=(0,k.m9)(n)))return kA("Unsupported field value:",e,n),MO(n,e);if(n instanceof mg)return function(t,r){if(!SO(r.$c))throw r.qc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.$c)throw e.qc("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let p=yg(u,r.Uc(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return lC(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ei.fromDate(t);return{timestampValue:Nb(r.k,i)}}if(t instanceof ei){const i=new ei(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Nb(r.k,i)}}if(t instanceof AC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Uu)return{bytesValue:KM(r.k,t._byteString)};if(t instanceof zn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.qc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:XI(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.qc(`Unsupported field value: ${IC(t)}`)}(n,e)}function MO(n,e){const t={};return ZE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mi(n,(r,i)=>{const a=yg(i,e.Mc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function RO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ei||n instanceof AC||n instanceof Uu||n instanceof zn||n instanceof mg)}function kA(n,e,t){if(!RO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=IC(t);throw e.qc("an object"===r?n+" a custom object":n+" "+r)}var r}function PA(n,e,t){if((e=(0,k.m9)(e))instanceof ud)return e._internalPath;if("string"==typeof e)return FA(n,e);throw RC("Field path arguments must be of type string or ",n,!1,void 0,t)}const BV=new RegExp("[~\\*/\\[\\]]");function FA(n,e,t){if(e.search(BV)>=0)throw RC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ud(...e.split("."))._internalPath}catch(r){throw RC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function RC(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||u)&&(_+=" (found",a&&(_+=` in field ${r}`),u&&(_+=` in document ${i}`),_+=")"),new Me(de.INVALID_ARGUMENT,p+n+_)}function OO(n,e){return n.some(t=>t.isEqual(e))}class jb{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new UV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(OC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class UV extends jb{data(){return super.data()}}function OC(n,e){return"string"==typeof e?FA(n,e):e instanceof ud?e._internalPath:e._delegate._internalPath}class vg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cd extends jb{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(OC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Gb extends cd{data(e={}){return super.data(e)}}class af{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Gb(this._firestore,this._userDataWriter,r.key,r,new vg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Gb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new vg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const p=new Gb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new vg(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==u.type&&(_=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),w=a.indexOf(u.doc.key)),{type:jV(u.type),doc:p,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function xO(n,e){return n instanceof cd&&e instanceof cd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof af&&e instanceof af&&n._firestore===e._firestore&&DO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function kO(n){if(K_(n)&&0===n.explicitOrderBy.length)throw new Me(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hb{}function lf(n,...e){for(const t of e)n=t._apply(n);return n}class GV extends Hb{constructor(e,t,r){super(),this.zc=e,this.Hc=t,this.Jc=r,this.type="where"}_apply(e){const t=_g(e.firestore),r=function(i,a,u,p,_,w,T){let A;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){UO(T,w);const V=[];for(const z of T)V.push(BO(p,i,z));A={arrayValue:{values:V}}}else A=BO(p,i,T)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||UO(T,w),A=NO(u,"where",T,"in"===w||"not-in"===w);const x=Xi.create(_,w,A);return function(V,z){if(z.V()){const xe=Z_(V);if(null!==xe&&!xe.isEqual(z.field))throw new Me(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xe.toString()}' and '${z.field.toString()}'`);const ct=wb(V);null!==ct&&jO(0,z.field,ct)}const oe=function(xe,ct){for(const dt of xe.filters)if(ct.indexOf(dt.op)>=0)return dt.op;return null}(V,function(xe){switch(xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==oe)throw new Me(de.INVALID_ARGUMENT,oe===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${oe.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new Cs(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new Al(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class $V extends Hb{constructor(e,t){super(),this.zc=e,this.Yc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Me(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new id(i,a);return function(p,_){if(null===wb(p)){const w=Z_(p);null!==w&&jO(0,w,_.field)}}(r,u),u}(e._query,this.zc,this.Yc);return new Cs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Al(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class PO extends Hb{constructor(e,t,r){super(),this.type=e,this.Xc=t,this.Zc=r}_apply(e){return new Cs(e.firestore,e.converter,og(e._query,this.Xc,this.Zc))}}class FO extends Hb{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=VO(e,this.type,this.ta,this.ea);return new Cs(e.firestore,e.converter,(i=t,new Al((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class LO extends Hb{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=VO(e,this.type,this.ta,this.ea);return new Cs(e.firestore,e.converter,(i=t,new Al((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function VO(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof jb)return function(i,a,u,p,_){if(!p)throw new Me(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const w=[];for(const T of sg(i))if(T.field.isKeyField())w.push(W_(a,p.key));else{const A=p.data.field(T.field);if(db(A))throw new Me(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const x=T.field.canonicalString();throw new Me(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}w.push(A)}return new z_(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=_g(n.firestore);return function(a,u,p,_,w,T){const A=a.explicitOrderBy;if(w.length>A.length)throw new Me(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let V=0;V<w.length;V++){const z=w[V];if(A[V].field.isKeyField()){if("string"!=typeof z)throw new Me(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof z}`);if(!Kh(a)&&-1!==z.indexOf("/"))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${z}' contains a slash.`);const oe=a.path.child(an.fromString(z));if(!st.isDocumentKey(oe))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${oe}' is not because it contains an odd number of segments.`);const xe=new st(oe);x.push(W_(u,xe))}else{const oe=NO(p,_,z);x.push(oe)}}return new z_(x,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function BO(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Me(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kh(e)&&-1!==t.indexOf("/"))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!st.isDocumentKey(r))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return W_(n,new st(r))}if(t instanceof zn)return W_(n,t._key);throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${IC(t)}.`)}function UO(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function jO(n,e,t){if(!t.isEqual(e))throw new Me(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class LA{convertValue(e,t="none"){switch(Fu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return mi(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new AC(gr(e.latitude),gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Il(e));default:return null}}convertTimestamp(e){const t=Tl(e);return new ei(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);Dt(aR(r));const i=new by(r.get(1),r.get(3)),a=new st(r.popFirst(5));return i.isEqual(t)||kr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function xC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class JV extends LA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class GO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_g(e)}set(e,t,r){this._verifyNotCommitted();const i=uf(e,this._firestore),a=xC(i.converter,t,r),u=MC(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,o.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=uf(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof ud?xA(this._dataReader,"WriteBatch.update",a._key,t,r,i):OA(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,o.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=uf(e,this._firestore);return this._mutations=this._mutations.concat(new pe(t._key,o.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uf(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Me(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bg extends LA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function HO(n,e,t){n=sn(n,zn);const r=sn(n.firestore,mr),i=xC(n.converter,e,t);return wy(r,[MC(_g(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,o.none())])}function $O(n,e,t,...r){n=sn(n,zn);const i=sn(n.firestore,mr),a=_g(i);let u;return u="string"==typeof(e=(0,k.m9)(e))||e instanceof ud?xA(a,"updateDoc",n._key,e,t,r):OA(a,"updateDoc",n._key,e),wy(i,[u.toMutation(n._key,o.exists(!0))])}function WO(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||MA(e[u])||(a=e[u],u++);const p={includeMetadataChanges:a.includeMetadataChanges};if(MA(e[u])){const A=e[u];e[u]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[u+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[u+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let _,w,T;if(n instanceof zn)w=sn(n.firestore,mr),T=sd(n._key.path),_={next:A=>{e[u]&&e[u](VA(w,n,A))},error:e[u+1],complete:e[u+2]};else{const A=sn(n,Cs);w=sn(A.firestore,mr),T=A._query;const x=new bg(w);_={next:V=>{e[u]&&e[u](new af(w,x,A,V))},error:e[u+1],complete:e[u+2]},kO(n._query)}return function(A,x,V,z){const oe=new CC(z),xe=new KS(x,oe,V);return A.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return HS(yield vy(A),xe)})),()=>{oe.nc(),A.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return WS(yield vy(A),xe)}))}}(yi(w),T,p,_)}function wy(n,e){return function(t,r){const i=new Xr;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function $L(n,e,t){return XS.apply(this,arguments)}(yield SA(t),r,i)})),i.promise}(yi(n),e)}function VA(n,e,t){const r=t.docs.get(e._key),i=new bg(n);return new cd(n,i,e._key,r,new vg(t.hasPendingWrites,t.fromCache),e.converter)}class u2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_g(e)}get(e){const t=uf(e,this._firestore),r=new JV(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const a=i[0];if(a.isFoundDocument())return new jb(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new jb(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=uf(e,this._firestore),a=xC(i.converter,t,r),u=MC(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=uf(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof ud?xA(this._dataReader,"Transaction.update",a._key,t,r,i):OA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=uf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=uf(e,this._firestore),r=new bg(this._firestore);return super.get(e).then(i=>new cd(this._firestore,r,t._key,i._document,new vg(!1,!1),t.converter))}}function BA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qO(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function zO(){if(!function QE(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){jh=Mr.SDK_VERSION,(0,Mr._registerComponent)(new Wi.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new mr(i,new FI(t.getProvider("auth-internal")),new VI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Mr.registerVersion)(ab,"3.4.3",n),(0,Mr.registerVersion)(ab,"3.4.3","esm2017")}();class $b{constructor(e){this._delegate=e}static fromBase64String(e){return zO(),new $b(Uu.fromBase64String(e))}static fromUint8Array(e){return qO(),new $b(Uu.fromUint8Array(e))}toBase64(){return zO(),this._delegate.toBase64()}toUint8Array(){return qO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function UA(n){return function y2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class v2{enableIndexedDbPersistence(e,t){return function TV(n,e){TO(n=sn(n,mr));const t=yi(n),r=n._freezeSettings(),i=new bA;return CO(t,i,new oO(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function IV(n){TO(n=sn(n,mr));const e=yi(n),t=n._freezeSettings(),r=new bA;return CO(e,r,new oV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function SV(n){if(n._initialized&&!n._terminated)throw new Me(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!Ml.Pt())return Promise.resolve();const i=r+"main";yield Ml.delete(i)}),function(r){return t.apply(this,arguments)})(hS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class KO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof by||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Gh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function bV(n,e,t,r={}){var i;const a=(n=sn(n,Bb))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Gh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,p;if("string"==typeof r.mockUserToken)u=r.mockUserToken,p=gi.MOCK_USER;else{u=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Me(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new gi(_)}n._authCredentials=new lb(new kI(u,p))}}(this._delegate,e,t,r)}enableNetwork(){return function NV(n){return function dV(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield cO(n),t=yield dO(n);return e.setNetworkEnabled(!0),function(r){const i=We(r);return i.Gr.delete(0),Lb(i)}(t)}))}(yi(n=sn(n,mr)))}(this._delegate)}disableNetwork(){return function MV(n){return function hV(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield cO(n),t=yield dO(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(i){const a=We(i);a.Gr.add(0),yield hy(a),a.Jr.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(yi(n=sn(n,mr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function AV(n){return function(e){const t=new Xr;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function KL(n,e){return iA.apply(this,arguments)}(yield SA(e),t)})),t.promise}(yi(n=sn(n,mr)))}(this._delegate)}onSnapshotsInSync(e){return function l2(n,e){return function gV(n,e){const t=new CC(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield vy(n),i=t,We(r).io.add(i),void i.next();var r,i})),()=>{t.nc(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield vy(n),i=t,void We(r).io.delete(i);var r,i}))}}(yi(n=sn(n,mr)),MA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dy(this,bO(this._delegate,e))}catch(t){throw $s(t,"collection()","Firestore.collection()")}}doc(e){try{return new Pa(this,SC(this._delegate,e))}catch(t){throw $s(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ws(this,function wV(n,e){if(n=sn(n,Bb),NA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Cs(n,null,(t=e,new Al(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw $s(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function c2(n,e){return function mV(n,e){const t=new Xr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const r=yield(i=n,TC(i).then(a=>a.datastore));var i;new uV(n.asyncQueue,r,e,t).run()})),t.promise}(yi(n=sn(n,mr)),t=>e(new u2(n,t)))}(this._delegate,t=>e(new ZO(this,t)))}batch(){return yi(this._delegate),new YO(new GO(this._delegate,e=>wy(this._delegate,e)))}loadBundle(e){return function RV(n,e){const t=yi(n=sn(n,mr)),r=new EV;return function _V(n,e,t,r){const i=function(a,u){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return aO(_,w);if(_ instanceof ArrayBuffer)return aO(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new aV(_,u);var _}(t,Fb(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function sV(n,e,t){const r=We(n);var i;(i=(0,fe.Z)(function*(a,u,p){try{const _=yield u.getMetadata();if(yield function(x,V){const z=We(x),oe=Mi(V.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",xe=>z.Ye.getBundleMetadata(xe,V.id)).then(xe=>!!xe&&xe.createTime.compareTo(oe)>=0)}(a.localStore,_))return yield u.close(),void p._completeWith((x=_,{taskState:"Success",documentsLoaded:x.totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}));p._updateProgress(YR(_));const w=new VL(_,a.localStore,u.k);let T=yield u.Ho();for(;T;){const x=yield w.yo(T);x&&p._updateProgress(x),T=yield u.Ho()}const A=yield w.complete();yield ld(a,A.In,void 0),yield function(x,V){const z=We(x);return z.persistence.runTransaction("Save bundle","readwrite",oe=>z.Ye.saveBundleMetadata(oe,V))}(a.localStore,_),p._completeWith(A.progress)}catch(_){Gh("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_)}var x}),function(a,u,p){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield SA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function OV(n,e){return function yV(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const i=We(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ye.getNamedQuery(a,r))}(yield IA(n),e)}))}(yi(n=sn(n,mr)),e).then(t=>t?new Cs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ws(this,t):null)}}class kC extends LA{constructor(e){super(),this.firestore=e}convertBytes(e){return new $b(new Uu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Pa.forKey(t,this.firestore,null)}}class ZO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kC(e)}get(e){const t=Dg(e);return this._delegate.get(t).then(r=>new Wb(this._firestore,new cd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Dg(e);return r?(BA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Dg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Dg(e);return this._delegate.delete(t),this}}class YO{constructor(e){this._delegate=e}set(e,t,r){const i=Dg(e);return r?(BA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Dg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Dg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Gb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qb(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=wg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new wg(e,new kC(e),t),i.set(t,a)),a}}wg.INSTANCES=new WeakMap;class Pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Pa(t,new zn(t._delegate,r,new st(e)))}static forKey(e,t,r){return new Pa(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Dy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dy(this.firestore,bO(this._delegate,e))}catch(t){throw $s(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof zn&&wO(this._delegate,e)}set(e,t){t=BA("DocumentReference.set",t);try{return t?HO(this._delegate,e,t):HO(this._delegate,e)}catch(r){throw $s(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$O(this._delegate,e):$O(this._delegate,e,t,...r)}catch(i){throw $s(i,"updateDoc()","DocumentReference.update()")}}delete(){return function o2(n){return wy(sn(n.firestore,mr),[new pe(n._key,o.none())])}(this._delegate)}onSnapshot(...e){const t=QO(e),r=JO(e,i=>new Wb(this.firestore,new cd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WO(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function e2(n){n=sn(n,zn);const e=sn(n.firestore,mr),t=yi(e),r=new bg(e);return function fV(n,e){const t=new Xr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,a,u){try{const p=yield function(_,w){const T=We(_);return T.persistence.runTransaction("read document","readonly",A=>T.Wn.Rn(A,w))}(i,a);p.isFoundDocument()?u.resolve(p):p.isNoDocument()?u.resolve(null):u.reject(new Me(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=gy(p,`Failed to get document '${a} from cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield IA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new cd(e,r,n._key,i,new vg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function t2(n){n=sn(n,zn);const e=sn(n.firestore,mr);return hO(yi(e),n._key,{source:"server"}).then(t=>VA(e,n,t))}(this._delegate):function XV(n){n=sn(n,zn);const e=sn(n.firestore,mr);return hO(yi(e),n._key).then(t=>VA(e,n,t))}(this._delegate),t.then(r=>new Wb(this.firestore,new cd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Pa(this.firestore,this._delegate.withConverter(e?wg.getInstance(this.firestore,e):null))}}function $s(n,e,t){return n.message=n.message.replace(e,t),n}function QO(n){for(const e of n)if("object"==typeof e&&!UA(e))return e;return{}}function JO(n,e){var t,r;let i;return i=UA(n[0])?n[0]:UA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Wb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xO(this._delegate,e._delegate)}}class qb extends Wb{data(e){const t=this._delegate.data(e);return function PM(n,e){n||lt()}(void 0!==t),t}}class Ws{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kC(e)}where(e,t,r){try{return new Ws(this.firestore,lf(this._delegate,function HV(n,e,t){const r=e,i=OC("where",n);return new GV(i,r,t)}(e,t,r)))}catch(i){throw $s(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ws(this.firestore,lf(this._delegate,function WV(n,e="asc"){const t=e,r=OC("orderBy",n);return new $V(r,t)}(e,t)))}catch(r){throw $s(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ws(this.firestore,lf(this._delegate,function qV(n){return yO("limit",n),new PO("limit",n,"F")}(e)))}catch(t){throw $s(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ws(this.firestore,lf(this._delegate,function zV(n){return yO("limitToLast",n),new PO("limitToLast",n,"L")}(e)))}catch(t){throw $s(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ws(this.firestore,lf(this._delegate,function KV(...n){return new FO("startAt",n,!0)}(...e)))}catch(t){throw $s(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ws(this.firestore,lf(this._delegate,function ZV(...n){return new FO("startAfter",n,!1)}(...e)))}catch(t){throw $s(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ws(this.firestore,lf(this._delegate,function YV(...n){return new LO("endBefore",n,!0)}(...e)))}catch(t){throw $s(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ws(this.firestore,lf(this._delegate,function QV(...n){return new LO("endAt",n,!1)}(...e)))}catch(t){throw $s(t,"endAt()","Query.endAt()")}}isEqual(e){return DO(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function r2(n){n=sn(n,Cs);const e=sn(n.firestore,mr),t=yi(e),r=new bg(e);return function pV(n,e){const t=new Xr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,a,u){try{const p=yield yC(i,a,!0),_=new XR(a,p.zn),w=_.Po(p.documents),T=_.applyChanges(w,!1);u.resolve(T.snapshot)}catch(p){const _=gy(p,`Failed to execute query '${a} against cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield IA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new af(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function s2(n){n=sn(n,Cs);const e=sn(n.firestore,mr),t=yi(e),r=new bg(e);return fO(t,n._query,{source:"server"}).then(i=>new af(e,r,n,i))}(this._delegate):function n2(n){n=sn(n,Cs);const e=sn(n.firestore,mr),t=yi(e),r=new bg(e);return kO(n._query),fO(t,n._query).then(i=>new af(e,r,n,i))}(this._delegate),t.then(r=>new jA(this.firestore,new af(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=QO(e),r=JO(e,i=>new jA(this.firestore,new af(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WO(this._delegate,t,r)}withConverter(e){return new Ws(this.firestore,this._delegate.withConverter(e?wg.getInstance(this.firestore,e):null))}}class w2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new qb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new qb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new w2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new qb(this._firestore,r))})}isEqual(e){return xO(this._delegate,e._delegate)}}class Dy extends Ws{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Pa(this.firestore,e):null}doc(e){try{return new Pa(this.firestore,void 0===e?SC(this._delegate):SC(this._delegate,e))}catch(t){throw $s(t,"doc()","CollectionReference.doc()")}}add(e){return function a2(n,e){const t=sn(n.firestore,mr),r=SC(n),i=xC(n.converter,e);return wy(t,[MC(_g(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,o.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Pa(this.firestore,t))}isEqual(e){return wO(this._delegate,e._delegate)}withConverter(e){return new Dy(this.firestore,this._delegate.withConverter(e?wg.getInstance(this.firestore,e):null))}}function Dg(n){return sn(n,zn)}class GA{constructor(...e){this._delegate=new ud(...e)}static documentId(){return new GA(_i.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof ud&&this._delegate._internalPath.isEqual(e._internalPath)}}class Eg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function h2(){return new RA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Eg(e)}static delete(){const e=function d2(){return new Ub("deleteField")}();return e._methodName="FieldValue.delete",new Eg(e)}static arrayUnion(...e){const t=function f2(...n){return new FV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Eg(t)}static arrayRemove(...e){const t=function p2(...n){return new LV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Eg(t)}static increment(e){const t=function g2(n){return new VV("increment",n)}(e);return t._methodName="FieldValue.increment",new Eg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const D2={Firestore:KO,GeoPoint:AC,Timestamp:ei,Blob:$b,Transaction:ZO,WriteBatch:YO,DocumentReference:Pa,DocumentSnapshot:Wb,Query:Ws,QueryDocumentSnapshot:qb,QuerySnapshot:jA,CollectionReference:Dy,FieldPath:GA,FieldValue:Eg,setLogLevel:function b2(n){!function zE(n){xa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function XO(n,e){return function T2(n,e=fa.z){return new Lt.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function HA(n,e){return XO(n,e).pipe((0,it.U)(t=>({payload:t,type:"query"})))}function PC(n,e){return HA(n,e).pipe(Ko(void 0),a0(),(0,it.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,p)=>{const _=i.find(T=>T.doc.ref.isEqual(u.ref)),w=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(u.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(u.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:u}})}),a}))}function ex(n,e,t){return PC(n,t).pipe(Ro((r,i)=>function S2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function A2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return $A(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return $A(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $A(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Oo(),(0,it.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function $A(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function tx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function C2(n){(function E2(n,e){n.INTERNAL.registerComponent(new Wi.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},D2)))})(n,(e,t)=>new KO(e,t,new v2)),n.registerVersion("@firebase/firestore-compat","0.1.12")}(zl.Z);class nx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=PC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,it.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ko(void 0),a0(),Ii(([r,i])=>i.length>0||!r),(0,it.U)(([r,i])=>i),en.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ro((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tx(e);return ex(this.query,t,this.afs.schedulers.outsideAngular).pipe(en.iC)}valueChanges(e={}){return HA(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),en.iC)}get(e){return(0,In.D)(this.query.get(e)).pipe(en.iC)}add(e){return this.ref.add(e)}doc(e){return new rx(this.ref.doc(e),this.afs)}}class rx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=ox(r,t);return new nx(i,a,this.afs)}snapshotChanges(){return function I2(n,e){return XO(n,e).pipe(Ko(void 0),a0(),(0,it.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(en.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,it.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,In.D)(this.ref.get(e)).pipe(en.iC)}}class N2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?PC(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ii(t=>t.length>0),en.iC):PC(this.query,this.afs.schedulers.outsideAngular).pipe(en.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ro((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tx(e);return ex(this.query,t,this.afs.schedulers.outsideAngular).pipe(en.iC)}valueChanges(e={}){return HA(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),en.iC)}get(e){return(0,In.D)(this.query.get(e)).pipe(en.iC)}}const ix=new d.OlP("angularfire2.enableFirestorePersistence"),sx=new d.OlP("angularfire2.firestore.persistenceSettings"),M2=new d.OlP("angularfire2.firestore.settings"),R2=new d.OlP("angularfire2.firestore.use-emulator");function ox(n,e=(t=>t)){return{query:e(n),ref:n}}let O2=(()=>{class n{constructor(t,r,i,a,u,p,_,w,T,A,x,V,z,oe,xe,ct,dt){this.schedulers=_;const Wt=(0,br.on)(t,p,r),Rt=T;A&&Sp(Wt,p,x,z,oe,xe,V,ct),[this.firestore,this.persistenceEnabled$]=(0,br.cc)(`${Wt.name}.firestore`,"AngularFirestore",Wt.name,()=>{const yn=p.runOutsideAngular(()=>Wt.firestore());if(a&&yn.settings(a),Rt&&yn.useEmulator(...Rt),i&&!Wa(u)){const wo=()=>{try{return(0,In.D)(yn.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(kg){return"undefined"!=typeof console&&console.warn(kg),at(!1)}};return[yn,p.runOutsideAngular(wo)]}return[yn,at(!1)]},[a,Rt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=ox(i,r),p=this.schedulers.ngZone.run(()=>a);return new nx(p,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new N2(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new rx(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(br.Dh),d.LFG(br.xv,8),d.LFG(ix,8),d.LFG(M2,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(en.HU),d.LFG(sx,8),d.LFG(R2,8),d.LFG(Ap,8),d.LFG(Km,8),d.LFG(Zm,8),d.LFG(Ym,8),d.LFG(Qm,8),d.LFG(Jm,8),d.LFG(Xm,8),d.LFG(qm,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),x2=(()=>{class n{constructor(){zm.Z.registerVersion("angularfire",en.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ix,useValue:!0},{provide:sx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[O2]}),n})();var cf=P(515),Oi=P(5577),k2=P(1144);const{isArray:P2}=Array;function WA(n){return(0,it.U)(e=>function F2(n,e){return P2(e)?n(...e):n(e)}(n,e))}const L2=["addListener","removeListener"],V2=["addEventListener","removeEventListener"],B2=["on","off"];function qs(n,e,t,r){if((0,Aa.m)(t)&&(r=t,t=void 0),r)return qs(n,e,t).pipe(WA(r));const[i,a]=function G2(n){return(0,Aa.m)(n.addEventListener)&&(0,Aa.m)(n.removeEventListener)}(n)?V2.map(u=>p=>n[u](e,p,t)):function U2(n){return(0,Aa.m)(n.addListener)&&(0,Aa.m)(n.removeListener)}(n)?L2.map(ax(n,e)):function j2(n){return(0,Aa.m)(n.on)&&(0,Aa.m)(n.off)}(n)?B2.map(ax(n,e)):[];if(!i&&(0,k2.z)(n))return(0,Oi.z)(u=>qs(u,e,t))((0,$r.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Lt.y(u=>{const p=(..._)=>u.next(1<_.length?_:_[0]);return i(p),()=>a(p)})}function ax(n,e){return t=>r=>n[t](e,r)}var H2=P(3532);function qA(n=0,e,t=fa.P){let r=-1;return null!=e&&((0,H2.K)(e)?t=e:r=e),new Lt.y(i=>{let a=function $2(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},a)})}const{isArray:W2}=Array;function lx(n){return 1===n.length&&W2(n[0])?n[0]:n}function ux(...n){return 1===(n=lx(n)).length?(0,$r.Xf)(n[0]):new Lt.y(function q2(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,$r.Xf)(n[r]).subscribe(new Kt.Q(e,i=>{if(t){for(let a=0;a<t.length;a++)a!==r&&t[a].unsubscribe();t=null}e.next(i)})))}}(n))}class xi extends pr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:z2}=Array,{getPrototypeOf:K2,prototype:Z2,keys:Y2}=Object;var J2=P(9672);function zA(...n){const e=(0,io.yG)(n),t=(0,io.jO)(n),{args:r,keys:i}=function cx(n){if(1===n.length){const e=n[0];if(z2(e))return{args:e,keys:null};if(function Q2(n){return n&&"object"==typeof n&&K2(n)===Z2}(e)){const t=Y2(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,In.D)([],e);const a=new Lt.y(function X2(n,e,t=us.y){return r=>{hx(e,()=>{const{length:i}=n,a=new Array(i);let u=i,p=i;for(let _=0;_<i;_++)hx(e,()=>{const w=(0,In.D)(n[_],e);let T=!1;w.subscribe(new Kt.Q(r,A=>{a[_]=A,T||(T=!0,p--),p||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>function dx(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,u):us.y));return t?a.pipe(WA(t)):a}function hx(n,e,t){n?(0,J2.f)(t,n,e):e()}function FC(...n){const e=(0,io.jO)(n),t=lx(n);return t.length?new Lt.y(r=>{let i=t.map(()=>[]),a=t.map(()=>!1);r.add(()=>{i=a=null});for(let u=0;!r.closed&&u<t.length;u++)(0,$r.Xf)(t[u]).subscribe(new Kt.Q(r,p=>{if(i[u].push(p),i.every(_=>_.length)){const _=i.map(w=>w.shift());r.next(e?e(..._):_),i.some((w,T)=>!w.length&&a[T])&&r.complete()}},()=>{a[u]=!0,!i[u].length&&r.complete()}));return()=>{i=a=null}}):cf.E}function vi(n){return(0,rr.e)((e,t)=>{(0,$r.Xf)(n).subscribe(new Kt.Q(t,()=>t.complete(),$i.Z)),!t.closed&&e.subscribe(t)})}new Lt.y($i.Z);var zs=P(8505);function px(n,e){return e?t=>Mp(e.pipe((0,Yi.q)(1),function tB(){return(0,rr.e)((n,e)=>{n.subscribe(new Kt.Q(e,$i.Z))})}()),t.pipe(px(n))):(0,Oi.z)((t,r)=>n(t,r).pipe((0,Yi.q)(1),function nB(n){return(0,it.U)(()=>n)}(t)))}let nk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),rU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[nk]]}),n})(),iU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rU]}),n})();const hU=["*"],MU=["dialog"];function Tg(n){return null!=n}function Cy(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(n){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(n))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const wk={animation:!0,transitionTimerDelayMs:5},Tj=()=>{},{transitionTimerDelayMs:Ij}=wk,Xb=new Map,Zs=(n,e,t,r)=>{let i=r.context||{};const a=Xb.get(e);if(a)switch(r.runningTransition){case"continue":return cf.E;case"stop":n.run(()=>a.transition$.complete()),i=Object.assign(a.context,i),Xb.delete(e)}const u=t(e,r.animation,i)||Tj;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>u()),at(void 0).pipe(function Ej(n){return e=>new Lt.y(t=>e.subscribe({next:u=>n.run(()=>t.next(u)),error:u=>n.run(()=>t.error(u)),complete:()=>n.run(()=>t.complete())}))}(n));const p=new pr.x,_=new pr.x,w=p.pipe(function eB(...n){return e=>Mp(e,at(...n))}(!0));Xb.set(e,{transition$:p,complete:()=>{_.next(),_.complete()},context:i});const T=function Cj(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const A=qs(e,"transitionend").pipe(vi(w),Ii(({target:V})=>V===e));ux(qA(T+Ij).pipe(vi(w)),A,_).pipe(vi(w)).subscribe(()=>{Xb.delete(e),n.run(()=>{u(),p.next(),p.complete()})})}),p.asObservable()};let qC=(()=>{class n{constructor(){this.animation=wk.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr]]}),n})(),Ak=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr]]}),n})(),Mk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),xk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr]]}),n})(),kk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();var bi=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(bi||(bi={})),bi))();const KC=(n,e)=>!!e&&e.some(t=>t.contains(n)),Pk=(n,e)=>!e||null!=function Dj(n,e){return e&&void 0!==n.closest?n.closest(e):null}(n,e),$j="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function qj(n,e,t,r,i,a,u,p){t&&n.runOutsideAngular((n=>$j?()=>setTimeout(()=>n(),100):n)(()=>{const w=qs(e,"keydown").pipe(vi(i),Ii(x=>x.which===bi.Escape),(0,zs.b)(x=>x.preventDefault())),T=qs(e,"mousedown").pipe((0,it.U)(x=>{const V=x.target;return 2!==x.button&&!KC(V,u)&&("inside"===t?KC(V,a)&&Pk(V,p):"outside"===t?!KC(V,a):Pk(V,p)||!KC(V,a))}),vi(i)),A=qs(e,"mouseup").pipe(xo(T),Ii(([x,V])=>V),function rB(n,e=fa.z){const t=qA(n,e);return px(()=>t)}(0),vi(i));ux([w.pipe((0,it.U)(x=>0)),A.pipe((0,it.U)(x=>1))]).subscribe(x=>n.run(()=>r(x)))}))}const Fk=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Lk(n){const e=Array.from(n.querySelectorAll(Fk)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const Zj=/\s+/,Vk=new class Kj{getAllStyles(e){return window.getComputedStyle(e)}getStyle(e,t){return this.getAllStyles(e)[t]}isStaticPositioned(e){return"static"===(this.getStyle(e,"position")||"static")}offsetParent(e){let t=e.offsetParent||document.documentElement;for(;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement}position(e,t=!0){let r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))r=e.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const a=this.offsetParent(e);r=this.offset(e,!1),a!==document.documentElement&&(i=this.offset(a,!1)),i.top+=a.clientTop,i.left+=a.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,t&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(e,t=!0){const r=e.getBoundingClientRect(),i_top=window.scrollY-document.documentElement.clientTop,i_left=window.scrollX-document.documentElement.clientLeft;let a={height:r.height||e.offsetHeight,width:r.width||e.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return t&&(a.height=Math.round(a.height),a.width=Math.round(a.width),a.top=Math.round(a.top),a.bottom=Math.round(a.bottom),a.left=Math.round(a.left),a.right=Math.round(a.right)),a}positionElements(e,t,r,i){const[a="top",u="center"]=r.split("-"),p=i?this.offset(e,!1):this.position(e,!1),_=this.getAllStyles(t),w=parseFloat(_.marginTop),T=parseFloat(_.marginBottom),A=parseFloat(_.marginLeft),x=parseFloat(_.marginRight);let V=0,z=0;switch(a){case"top":V=p.top-(t.offsetHeight+w+T);break;case"bottom":V=p.top+p.height;break;case"left":z=p.left-(t.offsetWidth+A+x);break;case"right":z=p.left+p.width}switch(u){case"top":V=p.top;break;case"bottom":V=p.top+p.height-t.offsetHeight;break;case"left":z=p.left;break;case"right":z=p.left+p.width-t.offsetWidth;break;case"center":"top"===a||"bottom"===a?z=p.left+p.width/2-t.offsetWidth/2:V=p.top+p.height/2-t.offsetHeight/2}t.style.transform=`translate(${Math.round(z)}px, ${Math.round(V)}px)`;const oe=t.getBoundingClientRect(),xe=document.documentElement,ct=window.innerHeight||xe.clientHeight,dt=window.innerWidth||xe.clientWidth;return oe.left>=0&&oe.top>=0&&oe.right<=dt&&oe.bottom<=ct}};new Date(1882,10,12),new Date(2174,10,25);let $k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr,iU]]}),n})(),sG=(()=>{class n{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),Wk=(()=>{class n{constructor(t){this.elementRef=t,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t}get disabled(){return this._disabled}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("disabled",r.disabled)},inputs:{disabled:"disabled"}}),n})(),IN=(()=>{class n{constructor(t,r){this.dropdown=t,this.placement="bottom",this.isOpen=!1,this.nativeElement=r.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(d.Y36((0,d.Gpc)(()=>rw)),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,Wk,4),2&t){let a;d.iGM(a=d.CRH())&&(r.menuItems=a)}},hostVars:5,hostBindings:function(t,r){1&t&&d.NdJ("keydown.ArrowUp",function(a){return r.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return r.dropdown.onKeyDown(a)})("keydown.Home",function(a){return r.dropdown.onKeyDown(a)})("keydown.End",function(a){return r.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return r.dropdown.onKeyDown(a)})("keydown.Space",function(a){return r.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return r.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return r.dropdown.onKeyDown(a)}),2&t&&(d.uIk("x-placement",r.placement),d.ekj("dropdown-menu",!0)("show",r.dropdown.isOpen()))}}),n})(),JC=(()=>{class n{constructor(t,r){this.dropdown=t,this.nativeElement=r.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(d.Y36((0,d.Gpc)(()=>rw)),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("aria-expanded",r.dropdown.isOpen())}}),n})(),qk=(()=>{class n extends JC{constructor(t,r){super(t,r)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36((0,d.Gpc)(()=>rw)),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.dropdown.toggle()})("keydown.ArrowUp",function(a){return r.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return r.dropdown.onKeyDown(a)})("keydown.Home",function(a){return r.dropdown.onKeyDown(a)})("keydown.End",function(a){return r.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return r.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return r.dropdown.onKeyDown(a)}),2&t&&d.uIk("aria-expanded",r.dropdown.isOpen())},features:[d._Bn([{provide:JC,useExisting:(0,d.Gpc)(()=>n)}]),d.qOj]}),n})(),rw=(()=>{class n{constructor(t,r,i,a,u,p,_){this._changeDetector=t,this._document=i,this._ngZone=a,this._elementRef=u,this._renderer=p,this._closed$=new pr.x,this._bodyContainer=null,this._open=!1,this.openChange=new d.vpe,this.placement=r.placement,this.container=r.container,this.autoClose=r.autoClose,this.display=_?"static":"dynamic",this._zoneSubscription=a.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe((0,Yi.q)(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){if(t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.isFirstChange&&this._applyPlacementClasses(),t.dropdownClass){const{currentValue:r,previousValue:i}=t.dropdownClass;this._applyCustomDropdownClass(r,i)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&this._anchor.nativeElement.focus())}_setCloseHandlers(){qj(this._ngZone,this._document,this.autoClose,t=>{this.close(),0===t&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(t){const r=t.which,i=this._getMenuElements();let a=-1,u=null;const p=this._isEventFromToggle(t);if(!p&&i.length&&i.forEach((_,w)=>{_.contains(t.target)&&(u=_),_===this._document.activeElement&&(a=w)}),r!==bi.Space&&r!==bi.Enter){if(r!==bi.Tab){if(p||u){if(this.open(),i.length){switch(r){case bi.ArrowDown:a=Math.min(a+1,i.length-1);break;case bi.ArrowUp:if(this._isDropup()&&-1===a){a=i.length-1;break}a=Math.max(a-1,0);break;case bi.Home:a=0;break;case bi.End:a=i.length-1}i[a].focus()}t.preventDefault()}}else if(t.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===t.target)return void("body"!==this.container||t.shiftKey?t.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const _=this._menu.nativeElement.querySelectorAll(Fk);t.shiftKey&&t.target===_[0]?(this._anchor.nativeElement.focus(),t.preventDefault()):!t.shiftKey&&t.target===_[_.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else qs(t.target,"focusout").pipe((0,Yi.q)(1)).subscribe(({relatedTarget:_})=>{this._elementRef.nativeElement.contains(_)||this.close()})}}else u&&(!0===this.autoClose||"inside"===this.autoClose)&&qs(u,"click").pipe((0,Yi.q)(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.nativeElement.contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(r=>!r.disabled).map(r=>r.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&this._applyPlacementClasses("dynamic"===this.display?function Yj(n,e,t,r,i){let a=Array.isArray(t)?t:t.split(Zj);const u=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],p=e.classList,_=V=>{const[z,oe]=V.split("-"),xe=[];return i&&(xe.push(`${i}-${z}`),oe&&xe.push(`${i}-${z}-${oe}`),xe.forEach(ct=>{p.add(ct)})),xe};i&&u.forEach(V=>{p.remove(`${i}-${V}`)});let w=a.findIndex(V=>"auto"===V);w>=0&&u.forEach(function(V){null==a.find(z=>-1!==z.search("^"+V))&&a.splice(w++,1,V)});const T=e.style;T.position="absolute",T.top="0",T.left="0",T["will-change"]="transform";let A=null,x=!1;for(A of a){let V=_(A);if(Vk.positionElements(n,e,A,r)){x=!0;break}i&&V.forEach(z=>{p.remove(z)})}return x||(A=a[0],_(A),Vk.positionElements(n,e,A,r)),A}(this._anchor.nativeElement,this._bodyContainer||this._menu.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer;if(this._menu){const i=this._menu.nativeElement;t.appendChild(this._elementRef.nativeElement,i),t.removeStyle(i,"position"),t.removeStyle(i,"transform")}this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const r=this._renderer,i=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||r.createElement("div");r.setStyle(a,"position","absolute"),r.setStyle(i,"position","static"),r.setStyle(a,"z-index","1050"),r.appendChild(a,i),r.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(t,r){const i="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;i&&(r&&this._renderer.removeClass(i,r),t&&this._renderer.addClass(i,t))}_applyPlacementClasses(t){const r=this._menu;if(r){t||(t=this._getFirstPlacement(this.placement));const i=this._renderer,a=this._elementRef.nativeElement;i.removeClass(a,"dropup"),i.removeClass(a,"dropdown"),r.placement="static"===this.display?null:t;const u=-1!==t.search("^top")?"dropup":"dropdown";i.addClass(a,u);const p=this._bodyContainer;p&&(i.removeClass(p,"dropup"),i.removeClass(p,"dropdown"),i.addClass(p,u))}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO),d.Y36(sG),d.Y36(ie),d.Y36(d.R0b),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(TN,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdown",""]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,IN,5),d.Suo(i,JC,5)),2&t){let a;d.iGM(a=d.CRH())&&(r._menu=a.first),d.iGM(a=d.CRH())&&(r._anchor=a.first)}},hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("show",r.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[d.TTD]}),n})(),zk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();class Ng{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let oG=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Yi.q)(1)).subscribe(()=>{Zs(this._zone,this._el.nativeElement,(t,r)=>{r&&Cy(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Zs(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,r){2&t&&(d.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),d.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class Kk{close(e){}dismiss(e){}}class aG{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new pr.x,this._dismissed=new pr.x,this._hidden=new pr.x,e.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,u)=>{this._resolve=a,this._reject=u}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(vi(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(vi(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function wj(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():at(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),FC(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var iw=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(iw||(iw={})),iw))();let lG=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new pr.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new d.vpe,this.shown=new pr.x,this.hidden=new pr.x}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Yi.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},u=FC(Zs(this._zone,t,()=>t.classList.remove("show"),r),Zs(this._zone,this._dialogEl.nativeElement,()=>{},r));return u.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),u}_show(){const t={animation:this.animation,runningTransition:"continue"};FC(Zs(this._zone,this._elRef.nativeElement,(a,u)=>{u&&Cy(a),a.classList.add("show")},t),Zs(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{qs(t,"keydown").pipe(vi(this._closed$),Ii(i=>i.which===bi.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(iw.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;qs(this._dialogEl.nativeElement,"mousedown").pipe(vi(this._closed$),(0,zs.b)(()=>r=!1),Sn(()=>qs(t,"mouseup").pipe(vi(this._closed$),(0,Yi.q)(1))),Ii(({target:i})=>t===i)).subscribe(()=>{r=!0}),qs(t,"click").pipe(vi(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(iw.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=Lk(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Zs(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ie),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&d.Gf(MU,7),2&t){let i;d.iGM(i=d.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(d.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),d.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),d.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:hU,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div",0,1),d.TgZ(2,"div",2),d.Hsn(3),d.qZA(),d.qZA()),2&t&&d.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})();const uG=()=>{};let cG=(()=>{class n{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):uG}_adjustBody(t){const r=this._document.body,i=r.style.paddingRight,a=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${a+t}px`,()=>r.style["padding-right"]=i}_isPresent(t){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(t);const i=t.getBoundingClientRect().width-t.clientWidth;return r.removeChild(t),i}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dG=(()=>{class n{constructor(t,r,i,a,u,p){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=a,this._rendererFactory=u,this._ngZone=p,this._activeWindowCmptHasChanged=new pr.x,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new d.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=qs(e,"focusin").pipe(vi(t),(0,it.U)(a=>a.target));qs(e,"keydown").pipe(vi(t),Ii(a=>a.which===bi.Tab),xo(i)).subscribe(([a,u])=>{const[p,_]=Lk(e);(u===p||u===e)&&a.shiftKey&&(_.focus(),a.preventDefault()),u===_&&!a.shiftKey&&(p.focus(),a.preventDefault())}),r&&qs(e,"click").pipe(vi(t),xo(i),(0,it.U)(a=>a[1])).subscribe(a=>a.focus())})})(0,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}open(t,r,i,a){const u=a.container instanceof HTMLElement?a.container:Tg(a.container)?this._document.querySelector(a.container):this._document.body,p=this._rendererFactory.createRenderer(null,null),_=this._scrollBar.compensate(),w=()=>{this._modalRefs.length||(p.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!u)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const T=new Kk,A=this._getContentRef(t,a.injector||r,i,T,a);let x=!1!==a.backdrop?this._attachBackdrop(t,u):void 0,V=this._attachWindowComponent(t,u,A),z=new aG(V,A,x,a.beforeDismiss);return this._registerModalRef(z),this._registerWindowCmpt(V),z.result.then(_,_),z.result.then(w,w),T.close=oe=>{z.close(oe)},T.dismiss=oe=>{z.dismiss(oe)},this._applyWindowOptions(V.instance,a),1===this._modalRefs.length&&p.addClass(this._document.body,"modal-open"),x&&x.instance&&(this._applyBackdropOptions(x.instance,a),x.changeDetectorRef.detectChanges()),V.changeDetectorRef.detectChanges(),z}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,r){let a=t.resolveComponentFactory(oG).create(this._injector);return this._applicationRef.attachView(a.hostView),r.appendChild(a.location.nativeElement),a}_attachWindowComponent(t,r,i){let u=t.resolveComponentFactory(lG).create(this._injector,i.nodes);return this._applicationRef.attachView(u.hostView),r.appendChild(u.location.nativeElement),u}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{Tg(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{Tg(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,a,u){return i?i instanceof d.Rgc?this._createFromTemplateRef(i,a):function bk(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(t,r,i,a,u):new Ng([])}_createFromTemplateRef(t,r){const a=t.createEmbeddedView({$implicit:r,close(u){r.close(u)},dismiss(u){r.dismiss(u)}});return this._applicationRef.attachView(a),new Ng([a.rootNodes],a)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new Ng([[r]])}_createFromComponent(t,r,i,a,u){const p=t.resolveComponentFactory(i),_=d.zs3.create({providers:[{provide:Kk,useValue:a}],parent:r}),w=p.create(_),T=w.location.nativeElement;return u.scrollable&&T.classList.add("component-host-scrollable"),this._applicationRef.attachView(w.hostView),new Ng([[T]],w.hostView,w)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.z2F),d.LFG(d.zs3),d.LFG(ie),d.LFG(cG),d.LFG(d.FYo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hG=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qC))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fG=(()=>{class n{constructor(t,r,i,a){this._moduleCFR=t,this._injector=r,this._modalStack=i,this._config=a}open(t,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d._Vd),d.LFG(d.zs3),d.LFG(dG),d.LFG(hG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[fG]}),n})(),Xk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr]]}),n})(),aP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr]]}),n})(),uP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr]]}),n})(),cP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr]]}),n})(),dP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr]]}),n})(),hP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr]]}),n})(),fP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr]]}),n})(),pP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();new d.OlP("live announcer delay",{providedIn:"root",factory:function IG(){return 100}});let gP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[vr]]}),n})();const SG=[Sk,Ak,Mk,xk,kk,$k,zk,Zk,Xk,aP,uP,cP,dP,hP,fP,pP,gP];let mP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[SG,Sk,Ak,Mk,xk,kk,$k,zk,Zk,Xk,aP,uP,cP,dP,hP,fP,pP,gP]}),n})();function _P(n){return new Lt.y(e=>{(0,$r.Xf)(n()).subscribe(e)})}var yP=P(727);function vP(){return(0,rr.e)((n,e)=>{let t=null;n._refCount++;const r=new Kt.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class AG extends Lt.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yP.w0;const t=this.getSubject();e.add(this.source.subscribe(new Kt.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yP.w0.EMPTY)}return e}refCount(){return vP()(this)}}function gf(n){return(0,rr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new Kt.Q(t,void 0,void 0,u=>{a=(0,$r.Xf)(n(u,gf(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function sw(n,e){return(0,Aa.m)(e)?(0,Oi.z)(n,e,1):(0,Oi.z)(n,1)}function MN(n){return n<=0?()=>cf.E:(0,rr.e)((e,t)=>{let r=[];e.subscribe(new Kt.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}class hd{constructor(e,t){this.id=e,this.url=t}}class RN extends hd{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ow extends hd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class bP extends hd{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class RG extends hd{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class OG extends hd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xG extends hd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kG extends hd{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class PG extends hd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FG extends hd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wP{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class DP{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class LG{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VG{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BG{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UG{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EP{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ht="primary";class jG{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Iy(n){return new jG(n)}const CP="ngNavigationCancelingError";function ON(n){const e=Error("NavigationCancelingError: "+n);return e[CP]=!0,e}function HG(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],p=n[a];if(u.startsWith(":"))i[u.substring(1)]=p;else if(u!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Gu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!TP(n[i],e[i]))return!1;return!0}function TP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function IP(n){return Array.prototype.concat.apply([],n)}function SP(n){return n.length>0?n[n.length-1]:null}function ts(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Hu(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,In.D)(Promise.resolve(n)):at(n)}const qG={exact:function MP(n,e,t){if(!Rg(n.segments,e.segments)||!XC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!MP(n.children[r],e.children[r],t))return!1;return!0},subset:RP},AP={exact:function zG(n,e){return Gu(n,e)},subset:function KG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>TP(n[t],e[t]))},ignored:()=>!0};function NP(n,e,t){return qG[t.paths](n.root,e.root,t.matrixParams)&&AP[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function RP(n,e,t){return OP(n,e,e.segments,t)}function OP(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Rg(i,t)||e.hasChildren()||!XC(i,t,r))}if(n.segments.length===t.length){if(!Rg(n.segments,t)||!XC(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!RP(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Rg(n.segments,i)&&XC(n.segments,i,r)&&n.children[Ht])&&OP(n.children[Ht],e,a,r)}}function XC(n,e,t){return e.every((r,i)=>AP[t](n[i].parameters,r.parameters))}class Mg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Iy(this.queryParams)),this._queryParamMap}toString(){return QG.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ts(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return e1(this)}}class aw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Iy(this.parameters)),this._parameterMap}toString(){return LP(this)}}function Rg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class xP{}class kP{parse(e){const t=new oH(e);return new Mg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${lw(e.root,!0)}`,r=function eH(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${t1(t)}=${t1(i)}`).join("&"):`${t1(t)}=${t1(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function JG(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const QG=new kP;function e1(n){return n.segments.map(e=>LP(e)).join("/")}function lw(n,e){if(!n.hasChildren())return e1(n);if(e){const t=n.children[Ht]?lw(n.children[Ht],!1):"",r=[];return ts(n.children,(i,a)=>{a!==Ht&&r.push(`${a}:${lw(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function YG(n,e){let t=[];return ts(n.children,(r,i)=>{i===Ht&&(t=t.concat(e(r,i)))}),ts(n.children,(r,i)=>{i!==Ht&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ht?[lw(n.children[Ht],!1)]:[`${i}:${lw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ht]?`${e1(n)}/${t[0]}`:`${e1(n)}/(${t.join("//")})`}}function PP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function t1(n){return PP(n).replace(/%3B/gi,";")}function xN(n){return PP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function n1(n){return decodeURIComponent(n)}function FP(n){return n1(n.replace(/\+/g,"%20"))}function LP(n){return`${xN(n.path)}${function XG(n){return Object.keys(n).map(e=>`;${xN(e)}=${xN(n[e])}`).join("")}(n.parameters)}`}const tH=/^[^\/()?;=#]+/;function r1(n){const e=n.match(tH);return e?e[0]:""}const nH=/^[^=?&#]+/,iH=/^[^&#]+/;class oH{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ht]=new Yt(e,t)),r}parseSegment(){const e=r1(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new aw(n1(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=r1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=r1(this.remaining);i&&(r=i,this.capture(r))}e[n1(t)]=n1(r)}parseQueryParam(e){const t=function rH(n){const e=n.match(nH);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function sH(n){const e=n.match(iH);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=FP(t),a=FP(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=r1(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Ht);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[Ht]:new Yt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class VP{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=kN(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=kN(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=PN(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return PN(e,this._root).map(t=>t.value)}}function kN(n,e){if(n===e.value)return e;for(const t of e.children){const r=kN(n,t);if(r)return r}return null}function PN(n,e){if(n===e.value)return[e];for(const t of e.children){const r=PN(n,t);if(r.length)return r.unshift(e),r}return[]}class fd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Sy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class BP extends VP{constructor(e,t){super(e),this.snapshot=t,FN(this,e)}toString(){return this.snapshot.toString()}}function UP(n,e){const t=function aH(n,e){const u=new i1([],{},{},"",{},Ht,e,null,n.root,-1,{});return new GP("",new fd(u,[]))}(n,e),r=new xi([new aw("",{})]),i=new xi({}),a=new xi({}),u=new xi({}),p=new xi(""),_=new Ay(r,i,u,p,a,Ht,e,t.root);return _.snapshot=t.root,new BP(new fd(_,[]),t)}class Ay{constructor(e,t,r,i,a,u,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(e=>Iy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(e=>Iy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function jP(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function lH(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class i1{constructor(e,t,r,i,a,u,p,_,w,T,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=p,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=T,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Iy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Iy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class GP extends VP{constructor(e,t){super(t),this.url=e,FN(this,t)}toString(){return HP(this._root)}}function FN(n,e){e.value._routerState=n,e.children.forEach(t=>FN(n,t))}function HP(n){const e=n.children.length>0?` { ${n.children.map(HP).join(", ")} } `:"";return`${n.value}${e}`}function LN(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Gu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Gu(e.params,t.params)||n.params.next(t.params),function $G(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Gu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Gu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function VN(n,e){const t=Gu(n.params,e.params)&&function ZG(n,e){return Rg(n,e)&&n.every((t,r)=>Gu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||VN(n.parent,e.parent))}function uw(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function cH(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return uw(n,r,i);return uw(n,r)})}(n,e,t);return new fd(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(p=>uw(n,p)),u}}const r=function dH(n){return new Ay(new xi(n.url),new xi(n.params),new xi(n.queryParams),new xi(n.fragment),new xi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>uw(n,a));return new fd(r,i)}}function s1(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function cw(n){return"object"==typeof n&&null!=n&&n.outlets}function BN(n,e,t,r,i){let a={};return r&&ts(r,(u,p)=>{a[p]=Array.isArray(u)?u.map(_=>`${_}`):`${u}`}),new Mg(t.root===n?e:$P(t.root,n,e),a,i)}function $P(n,e,t){const r={};return ts(n.children,(i,a)=>{r[a]=i===e?t:$P(i,e,t)}),new Yt(n.segments,r)}class WP{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&s1(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(cw);if(i&&i!==SP(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class UN{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function qP(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return o1(n,e,t);const r=function _H(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],p=t[r];if(cw(p))break;const _=`${p}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!KP(_,w,u))return a;r+=2}else{if(!KP(_,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Yt(n.segments.slice(0,r.pathIndex),{});return a.children[Ht]=new Yt(n.segments.slice(r.pathIndex),n.children),o1(a,0,i)}return r.match&&0===i.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?jN(n,e,t):r.match?o1(n,0,i):jN(n,e,t)}function o1(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function mH(n){return cw(n[0])?n[0].outlets:{[Ht]:n}}(t),i={};return ts(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=qP(n.children[u],e,a))}),ts(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new Yt(n.segments,i)}}function jN(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(cw(a)){const _=yH(a.outlets);return new Yt(r,_)}if(0===i&&s1(t[0])){r.push(new aw(n.segments[e].path,zP(t[0]))),i++;continue}const u=cw(a)?a.outlets[Ht]:`${a}`,p=i<t.length-1?t[i+1]:null;u&&p&&s1(p)?(r.push(new aw(u,zP(p))),i+=2):(r.push(new aw(u,{})),i++)}return new Yt(r,{})}function yH(n){const e={};return ts(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=jN(new Yt([],{}),0,t))}),e}function zP(n){const e={};return ts(n,(t,r)=>e[r]=`${t}`),e}function KP(n,e,t){return n==t.path&&Gu(e,t.parameters)}class bH{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),LN(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Sy(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),ts(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Sy(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Sy(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Sy(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new UG(a.value.snapshot))}),e.children.length&&this.forwardEvent(new VG(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(LN(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(p.contexts),u.attachRef=p.componentRef,u.route=p.route.value,u.outlet&&u.outlet.attach(p.componentRef,p.route.value),LN(p.route.value),this.activateChildRoutes(e,null,u.children)}else{const p=function wH(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=_,u.outlet&&u.outlet.activateWith(i,_),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class GN{constructor(e,t){this.routes=e,this.module=t}}function mf(n){return"function"==typeof n}function Og(n){return n instanceof Mg}const dw=Symbol("INITIAL_VALUE");function hw(){return Sn(n=>zA(n.map(e=>e.pipe((0,Yi.q)(1),Ko(dw)))).pipe(Ro((e,t)=>{let r=!1;return t.reduce((i,a,u)=>i!==dw?i:(a===dw&&(r=!0),r||!1!==a&&u!==t.length-1&&!Og(a)?i:a),e)},dw),Ii(e=>e!==dw),(0,it.U)(e=>Og(e)?e:!0===e),(0,Yi.q)(1)))}class SH{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fw,this.attachRef=null}}class fw{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new SH,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let HN=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=a||Ht,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new AH(t,p,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fw),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class AH{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ay?this.route:e===fw?this.childContexts:this.parent.get(e,t)}}let ZP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[HN],encapsulation:2}),n})();function YP(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];NH(r,MH(e,r))}}function NH(n,e){n.children&&YP(n.children,e)}function MH(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function $N(n){const e=n.children&&n.children.map($N),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ht&&(t.component=ZP),t}function La(n){return n.outlet||Ht}function QP(n,e){const t=n.filter(r=>La(r)===e);return t.push(...n.filter(r=>La(r)!==e)),t}const JP={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function a1(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},JP):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||HG)(t,n,e);if(!a)return Object.assign({},JP);const u={};ts(a.posParams,(_,w)=>{u[w]=_.path});const p=a.consumed.length>0?Object.assign(Object.assign({},u),a.consumed[a.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:p,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function l1(n,e,t,r,i="corrected"){if(t.length>0&&function xH(n,e,t){return t.some(r=>u1(n,e,r)&&La(r)!==Ht)}(n,t,r)){const u=new Yt(e,function OH(n,e,t,r){const i={};i[Ht]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&La(a)!==Ht){const u=new Yt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[La(a)]=u}return i}(n,e,r,new Yt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function kH(n,e,t){return t.some(r=>u1(n,e,r))}(n,t,r)){const u=new Yt(n.segments,function RH(n,e,t,r,i,a){const u={};for(const p of r)if(u1(n,t,p)&&!i[La(p)]){const _=new Yt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[La(p)]=_}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new Yt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function u1(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function XP(n,e,t,r){return!!(La(n)===r||r!==Ht&&u1(e,t,n))&&("**"===n.path||a1(e,n,t).matched)}function eF(n,e,t){return 0===e.length&&!n.children[t]}class pw{constructor(e){this.segmentGroup=e||null}}class tF{constructor(e){this.urlTree=e}}function c1(n){return new Lt.y(e=>e.error(new pw(n)))}function nF(n){return new Lt.y(e=>e.error(new tF(n)))}function PH(n){return new Lt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class VH{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=l1(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ht).pipe((0,it.U)(a=>this.createUrlTree(WN(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(gf(a=>{if(a instanceof tF)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof pw?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ht).pipe((0,it.U)(i=>this.createUrlTree(WN(i),e.queryParams,e.fragment))).pipe(gf(i=>{throw i instanceof pw?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Yt([],{[Ht]:e}):e;return new Mg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,it.U)(a=>new Yt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,In.D)(i).pipe(sw(a=>{const u=r.children[a],p=QP(t,a);return this.expandSegmentGroup(e,p,u,a).pipe((0,it.U)(_=>({segment:_,outlet:a})))}),Ro((a,u)=>(a[u.outlet]=u.segment,a),{}),function NG(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ii((i,a)=>n(i,a,r)):us.y,MN(1),t?pT(e):ED(()=>new Pv))}())}expandSegment(e,t,r,i,a,u){return(0,In.D)(r).pipe(sw(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,a,u).pipe(gf(w=>{if(w instanceof pw)return at(null);throw w}))),qc(p=>!!p),gf((p,_)=>{if(p instanceof Pv||"EmptyError"===p.name){if(eF(t,i,a))return at(new Yt([],{}));throw new pw(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,a,u,p){return XP(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):c1(t):c1(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?nF(a):this.lineralizeSegments(r,a).pipe((0,Oi.z)(u=>{const p=new Yt(u,{});return this.expandSegment(e,p,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:p,consumedSegments:_,lastChild:w,positionalParamSegments:T}=a1(t,i,a);if(!p)return c1(t);const A=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?nF(A):this.lineralizeSegments(i,A).pipe((0,Oi.z)(x=>this.expandSegment(e,t,r,x.concat(a.slice(w)),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?at(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,it.U)(x=>(r._loadedConfig=x,new Yt(i,{})))):at(new Yt(i,{}));const{matched:u,consumedSegments:p,lastChild:_}=a1(t,r,i);if(!u)return c1(t);const w=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,Oi.z)(A=>{const x=A.module,V=A.routes,{segmentGroup:z,slicedSegments:oe}=l1(t,p,w,V),xe=new Yt(z.segments,z.children);if(0===oe.length&&xe.hasChildren())return this.expandChildren(x,V,xe).pipe((0,it.U)(Rt=>new Yt(p,Rt)));if(0===V.length&&0===oe.length)return at(new Yt(p,{}));const ct=La(r)===a;return this.expandSegment(x,xe,V,oe,ct?Ht:a,!0).pipe((0,it.U)(Wt=>new Yt(p.concat(Wt.segments),Wt.children)))}))}getChildConfig(e,t,r){return t.children?at(new GN(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?at(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Oi.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,it.U)(a=>(t._loadedConfig=a,a))):function FH(n){return new Lt.y(e=>e.error(ON(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):at(new GN([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return at(!0);const a=i.map(u=>{const p=e.get(u);let _;if(function EH(n){return n&&mf(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!mf(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return Hu(_)});return at(a).pipe(hw(),(0,zs.b)(u=>{if(!Og(u))return;const p=ON(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw p.url=u,p}),(0,it.U)(u=>!0===u))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return at(r);if(i.numberOfChildren>1||!i.children[Ht])return PH(e.redirectTo);i=i.children[Ht]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Mg(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ts(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[a]=t[p]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return ts(t.children,(p,_)=>{u[_]=this.createSegmentGroup(e,p,r,i)}),new Yt(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function WN(n){const e={};for(const r of Object.keys(n.children)){const a=WN(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function BH(n){if(1===n.numberOfChildren&&n.children[Ht]){const e=n.children[Ht];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}class rF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class d1{constructor(e,t){this.component=e,this.route=t}}function jH(n,e,t){const r=n._root;return gw(r,e?e._root:null,t,[r.value])}function h1(n,e,t){const r=function HH(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function gw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Sy(e);return n.children.forEach(u=>{(function $H(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const _=function WH(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Rg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rg(n.url,e.url)||!Gu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!VN(n,e)||!Gu(n.queryParams,e.queryParams);default:return!VN(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new rF(r)):(a.data=u.data,a._resolvedData=u._resolvedData),gw(n,e,a.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new d1(p.outlet.component,u))}else u&&mw(e,p,i),i.canActivateChecks.push(new rF(r)),gw(n,null,a.component?p?p.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),ts(a,(u,p)=>mw(u,t.getContext(p),i)),i}function mw(n,e,t){const r=Sy(n),i=n.value;ts(r,(a,u)=>{mw(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new d1(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class e${}function iF(n){return new Lt.y(e=>e.error(n))}class n${constructor(e,t,r,i,a,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u}recognize(){const e=l1(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ht);if(null===t)return null;const r=new i1([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new fd(r,t),a=new GP(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=jP(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const u=t.children[a],p=QP(e,a),_=this.processSegmentGroup(p,u,a);if(null===_)return null;r.push(..._)}const i=sF(r);return function r$(n){n.sort((e,t)=>e.value.outlet===Ht?-1:t.value.outlet===Ht?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const u=this.processSegmentAgainstRoute(a,t,r,i);if(null!==u)return u}return eF(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!XP(e,t,r,i))return null;let a,u=[],p=[];if("**"===e.path){const V=r.length>0?SP(r).parameters:{};a=new i1(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,lF(e),La(e),e.component,e,oF(t),aF(t)+r.length,uF(e))}else{const V=a1(t,e,r);if(!V.matched)return null;u=V.consumedSegments,p=r.slice(V.lastChild),a=new i1(u,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,lF(e),La(e),e.component,e,oF(t),aF(t)+u.length,uF(e))}const _=function i$(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:T}=l1(t,u,p,_.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===T.length&&w.hasChildren()){const V=this.processChildren(_,w);return null===V?null:[new fd(a,V)]}if(0===_.length&&0===T.length)return[new fd(a,[])];const A=La(e)===i,x=this.processSegment(_,w,T,A?Ht:i);return null===x?null:[new fd(a,x)]}}function s$(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function sF(n){const e=[],t=new Set;for(const r of n){if(!s$(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=sF(r.children);e.push(new fd(r.value,i))}return e.filter(r=>!t.has(r))}function oF(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function aF(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function lF(n){return n.data||{}}function uF(n){return n.resolve||{}}function qN(n){return Sn(e=>{const t=n(e);return t?(0,In.D)(t).pipe((0,it.U)(()=>e)):at(e)})}class f$ extends class h${shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const zN=new d.OlP("ROUTES");class cF{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,it.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=a.create(e);return new GN(IP(u.injector.get(zN,void 0,d.XFs.Self|d.XFs.Optional)).map($N),u)}),gf(a=>{throw t._loader$=void 0,a}));return t._loader$=new AG(i,()=>new pr.x).pipe(vP()),t._loader$}loadModuleFactory(e){return Hu(e()).pipe((0,Oi.z)(t=>t instanceof d.YKP?at(t):(0,In.D)(this.compiler.compileModuleAsync(t))))}}class g${shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function m$(n){throw n}function _$(n,e,t){return e.parse("/")}function dF(n,e){return at(null)}const y$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},v$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jo=(()=>{class n{constructor(t,r,i,a,u,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new pr.x,this.errorHandler=m$,this.malformedUriErrorHandler=_$,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:dF,afterPreactivation:dF},this.urlHandlingStrategy=new g$,this.routeReuseStrategy=new f$,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(d.h0i),this.console=u.get(d.c2e);const A=u.get(d.R0b);this.isNgZoneEnabled=A instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function WG(){return new Mg(new Yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new cF(u,p,x=>this.triggerEvent(new wP(x)),x=>this.triggerEvent(new DP(x))),this.routerState=UP(this.currentUrlTree,this.rootComponentType),this.transitions=new xi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ii(i=>0!==i.id),(0,it.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Sn(i=>{let a=!1,u=!1;return at(i).pipe((0,zs.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Sn(p=>{const _=this.browserUrlTree.toString(),w=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return f1(p.source)&&(this.browserUrlTree=p.extractedUrl),at(p).pipe(Sn(A=>{const x=this.transitions.getValue();return r.next(new RN(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),x!==this.transitions.getValue()?cf.E:Promise.resolve(A)}),function UH(n,e,t,r){return Sn(i=>function LH(n,e,t,r,i){return new VH(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,it.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,zs.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function o$(n,e,t,r,i){return(0,Oi.z)(a=>function t$(n,e,t,r,i="emptyOnly",a="legacy"){try{const u=new n$(n,e,t,r,i,a).recognize();return null===u?iF(new e$):at(u)}catch(u){return iF(u)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,it.U)(u=>Object.assign(Object.assign({},a),{targetSnapshot:u}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,zs.b)(A=>{if("eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(V,A)}this.browserUrlTree=A.urlAfterRedirects}const x=new OG(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(x)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:V,source:z,restoredState:oe,extras:xe}=p,ct=new RN(x,this.serializeUrl(V),z,oe);r.next(ct);const dt=UP(V,this.rootComponentType).snapshot;return at(Object.assign(Object.assign({},p),{targetSnapshot:dt,urlAfterRedirects:V,extras:Object.assign(Object.assign({},xe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),cf.E}),qN(p=>{const{targetSnapshot:_,id:w,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:x,replaceUrl:V}}=p;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!x,replaceUrl:!!V})}),(0,zs.b)(p=>{const _=new xG(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,it.U)(p=>Object.assign(Object.assign({},p),{guards:jH(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function qH(n,e){return(0,Oi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?at(Object.assign(Object.assign({},t),{guardsResult:!0})):function zH(n,e,t,r){return(0,In.D)(n).pipe((0,Oi.z)(i=>function XH(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?at(a.map(p=>{const _=h1(p,e,i);let w;if(function IH(n){return n&&mf(n.canDeactivate)}(_))w=Hu(_.canDeactivate(n,e,t,r));else{if(!mf(_))throw new Error("Invalid CanDeactivate guard");w=Hu(_(n,e,t,r))}return w.pipe(qc())})).pipe(hw()):at(!0)}(i.component,i.route,t,e,r)),qc(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Oi.z)(p=>p&&function DH(n){return"boolean"==typeof n}(p)?function KH(n,e,t,r){return(0,In.D)(e).pipe(sw(i=>Mp(function YH(n,e){return null!==n&&e&&e(new LG(n)),at(!0)}(i.route.parent,r),function ZH(n,e){return null!==n&&e&&e(new BG(n)),at(!0)}(i.route,r),function JH(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function GH(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>_P(()=>at(u.guards.map(_=>{const w=h1(_,u.node,t);let T;if(function TH(n){return n&&mf(n.canActivateChild)}(w))T=Hu(w.canActivateChild(r,n));else{if(!mf(w))throw new Error("Invalid CanActivateChild guard");T=Hu(w(r,n))}return T.pipe(qc())})).pipe(hw())));return at(a).pipe(hw())}(n,i.path,t),function QH(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const i=r.map(a=>_P(()=>{const u=h1(a,e,t);let p;if(function CH(n){return n&&mf(n.canActivate)}(u))p=Hu(u.canActivate(e,n));else{if(!mf(u))throw new Error("Invalid CanActivate guard");p=Hu(u(e,n))}return p.pipe(qc())}));return at(i).pipe(hw())}(n,i.route,t))),qc(i=>!0!==i,!0))}(r,a,n,e):at(p)),(0,it.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,zs.b)(p=>{if(Og(p.guardsResult)){const w=ON(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw w.url=p.guardsResult,w}const _=new kG(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),Ii(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),qN(p=>{if(p.guards.canActivateChecks.length)return at(p).pipe((0,zs.b)(_=>{const w=new PG(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),Sn(_=>{let w=!1;return at(_).pipe(function a$(n,e){return(0,Oi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return at(t);let a=0;return(0,In.D)(i).pipe(sw(u=>function l$(n,e,t,r){return function u$(n,e,t,r){const i=Object.keys(n);if(0===i.length)return at({});const a={};return(0,In.D)(i).pipe((0,Oi.z)(u=>function c$(n,e,t,r){const i=h1(n,e,r);return Hu(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,zs.b)(p=>{a[u]=p}))),MN(1),(0,Oi.z)(()=>Object.keys(a).length===i.length?at(a):cf.E))}(n._resolve,n,e,r).pipe((0,it.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),jP(n,t).resolve),null)))}(u.route,r,n,e)),(0,zs.b)(()=>a++),MN(1),(0,Oi.z)(u=>a===i.length?at(t):cf.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,zs.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,zs.b)(_=>{const w=new FG(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),qN(p=>{const{targetSnapshot:_,id:w,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:x,replaceUrl:V}}=p;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!x,replaceUrl:!!V})}),(0,it.U)(p=>{const _=function uH(n,e,t){const r=uw(n,e._root,t?t._root:void 0);return new BP(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,zs.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,it.U)(r=>(new bH(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,zs.b)({next(){a=!0},complete(){a=!0}}),function MG(n){return(0,rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;a||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),gf(p=>{if(u=!0,function GG(n){return n&&n[CP]}(p)){const _=Og(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new bP(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(w),_?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),A={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||f1(i.source)};this.scheduleNavigation(T,"imperative",null,A,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new RG(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(w){i.reject(w)}}return cf.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},u=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(u){const _=Object.assign({},u);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,u,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){YP(t),this.config=t.map($N),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:p,preserveFragment:_}=r,w=i||this.routerState.root,T=_?this.currentUrlTree.fragment:u;let A=null;switch(p){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),function hH(n,e,t,r,i){if(0===t.length)return BN(e.root,e.root,e,r,i);const a=function fH(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new WP(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return ts(a.outlets,(_,w)=>{p[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,a]},[]);return new WP(t,e,r)}(t);if(a.toRoot())return BN(e.root,new Yt([],{}),e,r,i);const u=function pH(n,e,t){if(n.isAbsolute)return new UN(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new UN(a,a===e.root,0)}const r=s1(n.commands[0])?0:1;return function gH(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new UN(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),p=u.processChildren?o1(u.segmentGroup,u.index,a.commands):qP(u.segmentGroup,u.index,a.commands);return BN(u.segmentGroup,p,e,r,i)}(w,this.currentUrlTree,t,A,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Og(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function b$(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},y$):!1===r?Object.assign({},v$):r,Og(t))return NP(this.currentUrlTree,t,i);const a=this.parseUrl(t);return NP(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ow(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){var p,_,w;if(this.disposed)return Promise.resolve(!1);const T=this.transitions.value,A=f1(r)&&T&&!f1(T.source),x=T.rawUrl.toString()===t.toString(),V=T.id===(null===(p=this.currentNavigation)||void 0===p?void 0:p.id);if(A&&x&&V)return Promise.resolve(!0);let oe,xe,ct;u?(oe=u.resolve,xe=u.reject,ct=u.promise):ct=new Promise((Rt,yn)=>{oe=Rt,xe=yn});const dt=++this.navigationId;let Wt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Wt=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Wt=0,this.setTransition({id:dt,targetPageId:Wt,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:oe,reject:xe,promise:ct,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ct.catch(Rt=>Promise.reject(Rt))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new bP(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function f1(n){return"imperative"!==n}let p1=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new pr.x,this.subscription=t.events.subscribe(a=>{a instanceof ow&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,u){if(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:Ny(this.skipLocationChange),replaceUrl:Ny(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ny(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jo),d.Y36(Ay),d.Y36(Z))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function Ny(n){return""===n||!!n}class hF{}class fF{preload(e,t){return at(null)}}let pF=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new cF(i,r,_=>t.triggerEvent(new wP(_)),_=>t.triggerEvent(new DP(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ii(t=>t instanceof ow),sw(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const u=a._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,In.D)(i).pipe((0,r_.J)(),(0,it.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?at(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Oi.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Jo),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(hF))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ZN=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof RN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ow&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof EP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new EP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const xg=new d.OlP("ROUTER_CONFIGURATION"),gF=new d.OlP("ROUTER_FORROOT_GUARD"),C$=[je,{provide:xP,useClass:kP},{provide:Jo,useFactory:function M$(n,e,t,r,i,a,u={},p,_){const w=new Jo(null,n,e,t,r,i,IP(a));return p&&(w.urlHandlingStrategy=p),_&&(w.routeReuseStrategy=_),function R$(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,w),u.enableTracing&&w.events.subscribe(T=>{var A,x;null===(A=console.group)||void 0===A||A.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(x=console.groupEnd)||void 0===x||x.call(console)}),w},deps:[xP,fw,je,d.zs3,d.Sil,zN,xg,[class p${},new d.FiY],[class d${},new d.FiY]]},fw,{provide:Ay,useFactory:function O$(n){return n.routerState.root},deps:[Jo]},pF,fF,class E${preload(e,t){return t().pipe(gf(()=>at(null)))}},{provide:xg,useValue:{enableTracing:!1}}];function T$(){return new d.PXZ("Router",Jo)}let I$=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[C$,mF(t),{provide:gF,useFactory:N$,deps:[[Jo,new d.FiY,new d.tp0]]},{provide:xg,useValue:r||{}},{provide:Z,useFactory:A$,deps:[le,[new d.tBr(_e),new d.FiY],xg]},{provide:ZN,useFactory:S$,deps:[Jo,Qu,xg]},{provide:hF,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:fF},{provide:d.PXZ,multi:!0,useFactory:T$},[YN,{provide:d.ip1,multi:!0,useFactory:x$,deps:[YN]},{provide:_F,useFactory:k$,deps:[YN]},{provide:d.tb,multi:!0,useExisting:_F}]]}}static forChild(t){return{ngModule:n,providers:[mF(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gF,8),d.LFG(Jo,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function S$(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new ZN(n,e,t)}function A$(n,e,t={}){return t.useHash?new ye(n,e):new Te(n,e)}function N$(n){return"guarded"}function mF(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:zN,multi:!0,useValue:n}]}let YN=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new pr.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),a=this.injector.get(Jo),u=this.injector.get(xg);return"disabled"===u.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?at(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(xg),i=this.injector.get(pF),a=this.injector.get(ZN),u=this.injector.get(Jo),p=this.injector.get(d.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),a.init(),u.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function x$(n){return n.appInitializer.bind(n)}function k$(n){return n.bootstrapListener.bind(n)}const _F=new d.OlP("Router Initializer");let F$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["bs-navbar"]],decls:27,vars:0,consts:[[1,"navbar","navbar-expand-md","navbar-light","fixed-top","bg-light"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-md-0"],[1,"nav-item"],["routerLink","/shopping-cart",1,"nav-link"],["ngbDropdown","",1,"nav-item","dropdown"],["ngbDropdownToggle","","id","dropdown01","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["ngbDropdownMenu","","ngbDropdownToggle","","aria-labelledby","dropdown01",1,"dropdown-menu"],["routerLink","/my/orders",1,"dropdown-item"],["routerLink","/admin/orders",1,"dropdown-item"],["routerLink","/admin/products",1,"dropdown-item"],[1,"dropdown-item"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0),d.TgZ(1,"div",1),d.TgZ(2,"a",2),d._uU(3,"O"),d.qZA(),d.TgZ(4,"button",3),d._UZ(5,"span",4),d.qZA(),d.TgZ(6,"div",5),d.TgZ(7,"ul",6),d.TgZ(8,"li",7),d.TgZ(9,"a",8),d._uU(10,"Shopping Cart"),d.qZA(),d.qZA(),d.TgZ(11,"li",9),d.TgZ(12,"a",10),d._uU(13,"Username"),d.qZA(),d.TgZ(14,"ul",11),d.TgZ(15,"li"),d.TgZ(16,"a",12),d._uU(17,"My Orders"),d.qZA(),d.qZA(),d.TgZ(18,"li"),d.TgZ(19,"a",13),d._uU(20,"Manage Orders"),d.qZA(),d.qZA(),d.TgZ(21,"li"),d.TgZ(22,"a",14),d._uU(23,"Manage Products"),d.qZA(),d.qZA(),d.TgZ(24,"li"),d.TgZ(25,"a",15),d._uU(26,"Log Out"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA())},directives:[TN,p1,rw,qk,IN],styles:[".dropdown-toggle[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),L$=(()=>{class n{constructor(){this.title="oshop"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(d._UZ(0,"bs-navbar"),d.TgZ(1,"main",0),d._UZ(2,"router-outlet"),d.qZA())},directives:[F$,HN],styles:[""]}),n})();const yF_firebaseConfig={apiKey:"AIzaSyCKqKNgzoHIpsH6gck6zIsGrfKBTELPHaE",authDomain:"oshop-9ff1b.firebaseapp.com",projectId:"oshop-9ff1b",storageBucket:"oshop-9ff1b.appspot.com",messagingSenderId:"707186752558",appId:"1:707186752558:web:48ffed94d43c3e674973bf",measurementId:"G-KDVHK53V3Z"};let V$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"home works!"),d.qZA())},styles:[""]}),n})(),B$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-products"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"products works!"),d.qZA())},styles:[""]}),n})(),U$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-shopping-cart"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"shopping-cart works!"),d.qZA())},styles:[""]}),n})(),j$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-check-out"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"check-out works!"),d.qZA())},styles:[""]}),n})(),G$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-order-success"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"order-success works!"),d.qZA())},styles:[""]}),n})(),H$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-my-orders"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"my-orders works!"),d.qZA())},styles:[""]}),n})(),$$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-admin-products"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"admin-products works!"),d.qZA())},styles:[""]}),n})(),W$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-admin-orders"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"admin-orders works!"),d.qZA())},styles:[""]}),n})(),q$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"login works!"),d.qZA())},styles:[""]}),n})(),z$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[L$]}),n.\u0275inj=d.cJS({providers:[],imports:[[ec,br.hO.initializeApp(yF_firebaseConfig),x2.enablePersistence(),cE,zc,mP,I$.forRoot([{path:"",component:V$},{path:"products",component:B$},{path:"shopping-cart",component:U$},{path:"check-out",component:j$},{path:"order-success",component:G$},{path:"my/orders",component:H$},{path:"login",component:q$},{path:"admin/products",component:$$},{path:"admin/orders",component:W$}]),mP]]}),n})();(0,d.G48)(),Qa().bootstrapModule(z$).catch(n=>console.error(n))},5867:(nt,Ee,P)=>{"use strict";P.d(Ee,{Mq:()=>d.getApp,C6:()=>d.getApps});var d=P(9681);(0,d.registerVersion)("firebase","9.6.4","app")},127:(nt,Ee,P)=>{"use strict";P.d(Ee,{Z:()=>d.Z});var d=P(3942);d.Z.registerVersion("firebase","9.6.4","app-compat")},5735:(nt,Ee,P)=>{"use strict";P.r(Ee);var d=P(5861),Q=P(3942),F=P(2090),ae=P(9681);function le(y,f){var g={};for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&f.indexOf(b)<0&&(g[b]=y[b]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var S=0;for(b=Object.getOwnPropertySymbols(y);S<b.length;S++)f.indexOf(b[S])<0&&Object.prototype.propertyIsEnumerable.call(y,b[S])&&(g[b[S]]=y[b[S]])}return g}var ke=P(1877),he=P(4859);const Sr=function Fr(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Qt=function ln(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ki=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rn=new ke.Yd("@firebase/auth");function Pi(y,...f){Rn.logLevel<=ke.in.ERROR&&Rn.error(`Auth (${ae.SDK_VERSION}): ${y}`,...f)}function jt(y,...f){throw Is(y,...f)}function Dn(y,...f){return Is(y,...f)}function Do(y,f,g){const b=Object.assign(Object.assign({},Qt()),{[f]:g});return new F.LL("auth","Firebase",b).create(f,{appName:y.name})}function ti(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&jt(y,"argument-error"),Do(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Is(y,...f){if("string"!=typeof y){const g=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(g,...b)}return ki.create(y,...f)}function Ae(y,f,...g){if(!y)throw Is(f,...g)}function _r(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Pi(f),new Error(f)}function Xe(y,f){y||_r(f)}const wi=new Map;function qt(y){Xe(y instanceof Function,"Expected a class definition");let f=wi.get(y);return f?(Xe(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,wi.set(y,f),f)}function ht(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function tt(){return"http:"===St()||"https:"===St()}function St(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class At{constructor(f,g){this.shortDelay=f,this.longDelay=g,Xe(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function fn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(tt()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function et(y,f){Xe(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class ut{static initialize(f,g,b){this.fetchImpl=f,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $u={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Eo=new At(3e4,6e4);function gt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function En(y,f,g,b){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,d.Z)(function*(y,f,g,b,S={}){return Ss(y,S,(0,d.Z)(function*(){let M={},U={};b&&("GET"===f?U=b:M={body:JSON.stringify(b)});const ee=(0,F.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),ut.fetch()(we(y,y.config.apiHost,g,ee),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function Ss(y,f,g){return j.apply(this,arguments)}function j(){return(j=(0,d.Z)(function*(y,f,g){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},$u),f);try{const S=new te(y),M=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const U=yield M.json();if("needConfirmation"in U)throw He(y,"account-exists-with-different-credential",U);if(M.ok&&!("errorMessage"in U))return U;{const ee=M.ok?U.errorMessage:U.error.message,[Fe,ve]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw He(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===Fe)throw He(y,"email-already-in-use",U);const ze=b[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(ve)throw Do(y,ze,ve);jt(y,ze)}}catch(S){if(S instanceof F.ZR)throw S;jt(y,"network-request-failed")}})).apply(this,arguments)}function W(y,f,g,b){return q.apply(this,arguments)}function q(){return(q=(0,d.Z)(function*(y,f,g,b,S={}){const M=yield En(y,f,g,b,S);return"mfaPendingCredential"in M&&jt(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function we(y,f,g,b){const S=`${f}${g}?${b}`;return y.config.emulator?et(y.config,S):`${y.config.apiScheme}://${S}`}class te{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(Dn(this.auth,"network-request-failed")),Eo.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function He(y,f,g){const b={appName:y.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const S=Dn(y,f,b);return S.customData._tokenResponse=g,S}function pn(){return(pn=(0,d.Z)(function*(y,f){return En(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Yn(y,f){return On.apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(y,f){return En(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Br(y,f){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(y,f){return En(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function yr(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Xo(){return(Xo=(0,d.Z)(function*(y,f=!1){const g=(0,F.m9)(y),b=yield g.getIdToken(f),S=Co(b);Ae(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const M="object"==typeof S.firebase?S.firebase:void 0,U=null==M?void 0:M.sign_in_provider;return{claims:S,token:b,authTime:yr(Ol(S.auth_time)),issuedAtTime:yr(Ol(S.iat)),expirationTime:yr(Ol(S.exp)),signInProvider:U||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Ol(y){return 1e3*Number(y)}function Co(y){const[f,g,b]=y.split(".");if(void 0===f||void 0===g||void 0===b)return Pi("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,F.tV)(g);return S?JSON.parse(S):(Pi("Failed to decode base64 JWT payload"),null)}catch(S){return Pi("Caught error parsing JWT payload as JSON",S),null}}function Qn(y,f){return rs.apply(this,arguments)}function rs(){return(rs=(0,d.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(b){throw b instanceof F.ZR&&lr(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function lr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Js{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),b)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class qu{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=yr(this.lastLoginAt),this.creationTime=yr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fi(y){return To.apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(y){var f;const g=y.auth,b=yield y.getIdToken(),S=yield Qn(y,Br(g,{idToken:b}));Ae(null==S?void 0:S.users.length,g,"internal-error");const M=S.users[0];y._notifyReloadListener(M);const U=(null===(f=M.providerUserInfo)||void 0===f?void 0:f.length)?ni(M.providerUserInfo):[],ee=Va(y.providerData,U),ze=!!y.isAnonymous&&!(y.email&&M.passwordHash||(null==ee?void 0:ee.length)),Ke={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ee,metadata:new qu(M.createdAt,M.lastLoginAt),isAnonymous:ze};Object.assign(y,Ke)})).apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*(y){const f=(0,F.m9)(y);yield Fi(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Va(y,f){return[...y.filter(b=>!f.some(S=>S.providerId===b.providerId)),...f]}function ni(y){return y.map(f=>{var{providerId:g}=f,b=le(f,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Nt(){return(Nt=(0,d.Z)(function*(y,f){const g=yield Ss(y,{},(0,d.Z)(function*(){const b=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:M}=y.config,U=we(y,S,"/v1/token",`key=${M}`),ee=yield y._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",ut.fetch()(U,{method:"POST",headers:ee,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class zt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Ae(f.idToken,"internal-error"),Ae(void 0!==f.idToken,"internal-error"),Ae(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function ar(y){const f=Co(y);return Ae(f,"internal-error"),Ae(void 0!==f.exp,"internal-error"),Ae(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var b=this;return(0,d.Z)(function*(){return Ae(!b.accessToken||b.refreshToken,f,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var b=this;return(0,d.Z)(function*(){const{accessToken:S,refreshToken:M,expiresIn:U}=yield function $e(y,f){return Nt.apply(this,arguments)}(f,g);b.updateTokensAndExpiration(S,M,Number(U))})()}updateTokensAndExpiration(f,g,b){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,g){const{refreshToken:b,accessToken:S,expirationTime:M}=g,U=new zt;return b&&(Ae("string"==typeof b,"internal-error",{appName:f}),U.refreshToken=b),S&&(Ae("string"==typeof S,"internal-error",{appName:f}),U.accessToken=S),M&&(Ae("number"==typeof M,"internal-error",{appName:f}),U.expirationTime=M),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new zt,this.toJSON())}_performRefresh(){return _r("not implemented")}}function xn(y,f){Ae("string"==typeof y||void 0===y,"internal-error",{appName:f})}class Ar{constructor(f){var{uid:g,auth:b,stsTokenManager:S}=f,M=le(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Js(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.metadata=new qu(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,d.Z)(function*(){const b=yield Qn(g,g.stsTokenManager.getToken(g.auth,f));return Ae(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(f){return function Wu(y){return Xo.apply(this,arguments)}(this,f)}reload(){return function Io(y){return Jn.apply(this,arguments)}(this)}_assign(f){this!==f&&(Ae(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Ar(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var b=this;return(0,d.Z)(function*(){let S=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),S=!0),g&&(yield Fi(b)),yield b.auth._persistUserIfCurrent(b),S&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,d.Z)(function*(){const g=yield f.getIdToken();return yield Qn(f,function _t(y,f){return pn.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var b,S,M,U,ee,Fe,ve,ze;const Ke=null!==(b=g.displayName)&&void 0!==b?b:void 0,Pt=null!==(S=g.email)&&void 0!==S?S:void 0,sr=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,fo=null!==(U=g.photoURL)&&void 0!==U?U:void 0,Ki=null!==(ee=g.tenantId)&&void 0!==ee?ee:void 0,nh=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,po=null!==(ve=g.createdAt)&&void 0!==ve?ve:void 0,xc=null!==(ze=g.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:Ho,emailVerified:kc,isAnonymous:_u,providerData:yu,stsTokenManager:Pc}=g;Ae(Ho&&Pc,f,"internal-error");const tm=zt.fromJSON(this.name,Pc);Ae("string"==typeof Ho,f,"internal-error"),xn(Ke,f.name),xn(Pt,f.name),Ae("boolean"==typeof kc,f,"internal-error"),Ae("boolean"==typeof _u,f,"internal-error"),xn(sr,f.name),xn(fo,f.name),xn(Ki,f.name),xn(nh,f.name),xn(po,f.name),xn(xc,f.name);const Fc=new Ar({uid:Ho,auth:f,email:Pt,emailVerified:kc,displayName:Ke,isAnonymous:_u,photoURL:fo,phoneNumber:sr,tenantId:Ki,stsTokenManager:tm,createdAt:po,lastLoginAt:xc});return yu&&Array.isArray(yu)&&(Fc.providerData=yu.map(nm=>Object.assign({},nm))),nh&&(Fc._redirectEventId=nh),Fc}static _fromIdTokenResponse(f,g,b=!1){return(0,d.Z)(function*(){const S=new zt;S.updateFromServerResponse(g);const M=new Ar({uid:g.localId,auth:f,stsTokenManager:S,isAnonymous:b});return yield Fi(M),M})()}}const Ur=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,b){var S=this;return(0,d.Z)(function*(){S.storage[g]=b})()}_get(g){var b=this;return(0,d.Z)(function*(){const S=b.storage[g];return void 0===S?null:S})()}_remove(g){var b=this;return(0,d.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return y.type="NONE",y})();function $t(y,f,g){return`firebase:${y}:${f}:${g}`}class Li{constructor(f,g,b){this.persistence=f,this.auth=g,this.userKey=b;const{config:S,name:M}=this.auth;this.fullUserKey=$t(this.userKey,S.apiKey,M),this.fullPersistenceKey=$t("persistence",S.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Ar._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,d.Z)(function*(){if(g.persistence===f)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,b="authUser"){return(0,d.Z)(function*(){if(!g.length)return new Li(qt(Ur),f,b);const S=(yield Promise.all(g.map(function(){var ve=(0,d.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return ve.apply(this,arguments)}}()))).filter(ve=>ve);let M=S[0]||qt(Ur);const U=$t(b,f.config.apiKey,f.name);let ee=null;for(const ve of g)try{const ze=yield ve._get(U);if(ze){const Ke=Ar._fromJSON(f,ze);ve!==M&&(ee=Ke),M=ve;break}}catch(ze){}const Fe=S.filter(ve=>ve._shouldAllowMigration);return M._shouldAllowMigration&&Fe.length?(M=Fe[0],ee&&(yield M._set(U,ee.toJSON())),yield Promise.all(g.map(function(){var ve=(0,d.Z)(function*(ze){if(ze!==M)try{yield ze._remove(U)}catch(Ke){}});return function(ze){return ve.apply(this,arguments)}}())),new Li(M,f,b)):new Li(M,f,b)})()}}function kn(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ba(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ct(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(An(f))return"Blackberry";if(ta(f))return"Webos";if(ea(f))return"Safari";if((f.includes("chrome/")||So(f))&&!f.includes("edge/"))return"Chrome";if(is(f))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Ct(y=(0,F.z$)()){return/firefox\//i.test(y)}function ea(y=(0,F.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function So(y=(0,F.z$)()){return/crios\//i.test(y)}function Ba(y=(0,F.z$)()){return/iemobile/i.test(y)}function is(y=(0,F.z$)()){return/android/i.test(y)}function An(y=(0,F.z$)()){return/blackberry/i.test(y)}function ta(y=(0,F.z$)()){return/webos/i.test(y)}function ss(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)}function na(y=(0,F.z$)()){return ss(y)||is(y)||ta(y)||An(y)||/windows phone/i.test(y)||Ba(y)}function Bi(y,f=[]){let g;switch(y){case"Browser":g=kn((0,F.z$)());break;case"Worker":g=`${kn((0,F.z$)())}-${y}`;break;default:g=y}const b=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${b}`}class gd{constructor(f,g){this.app=f,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new As(this),this.idTokenSubscription=new As(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ki,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(f,g){var b=this;return g&&(this._popupRedirectResolver=qt(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var S,M;if(!b._deleted&&(b.persistenceManager=yield Li.create(b,f),!b._deleted)){if(null===(S=b._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(U){}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(M=b.currentUser)||void 0===M?void 0:M.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,d.Z)(function*(){var b;let S=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const M=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,U=null==S?void 0:S._redirectEventId,ee=yield g.tryRedirectSignIn(f);(!M||M===U)&&(null==ee?void 0:ee.user)&&(S=ee.user)}return S?S._redirectEventId?(Ae(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===S._redirectEventId?g.directlySetCurrentUser(S):g.reloadAndSetCurrentUserOrClear(S)):g.reloadAndSetCurrentUserOrClear(S):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,d.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(S){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,d.Z)(function*(){try{yield Fi(f)}catch(b){if("auth/network-request-failed"!==b.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Lr(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){const b=f?(0,F.m9)(f):null;return b&&Ae(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){if(!g._deleted)return f&&Ae(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,d.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(qt(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,g,b){return this.registerStateListener(this.authStateSubscription,f,g,b)}onIdTokenChanged(f,g,b){return this.registerStateListener(this.idTokenSubscription,f,g,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var b=this;return(0,d.Z)(function*(){const S=yield b.getOrInitRedirectPersistenceManager(g);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const b=f&&qt(f)||g._popupRedirectResolver;Ae(b,g,"argument-error"),g.redirectPersistenceManager=yield Li.create(g,[qt(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,d.Z)(function*(){var b,S;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===f?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,d.Z)(function*(){if(f===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,b,S){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),U=this._isInitialized?Promise.resolve():this._initializationPromise;return Ae(U,this,"internal-error"),U.then(()=>M(this.currentUser)),"function"==typeof g?f.addObserver(g,b,S):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Bi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){const g={"X-Client-Version":f.clientVersion};return f.app.options.appId&&(g["X-Firebase-gmpid"]=f.app.options.appId),g})()}}function Bn(y){return(0,F.m9)(y)}class As{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function md(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function yf(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Ua{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return _r("not implemented")}_getIdTokenResponse(f){return _r("not implemented")}_linkToIdToken(f,g){return _r("not implemented")}_getReauthenticationResolver(f){return _r("not implemented")}}function vf(y,f){return _d.apply(this,arguments)}function _d(){return(_d=(0,d.Z)(function*(y,f){return En(y,"POST","/v1/accounts:resetPassword",gt(y,f))})).apply(this,arguments)}function bf(y,f){return yd.apply(this,arguments)}function yd(){return(yd=(0,d.Z)(function*(y,f){return En(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Pg(y,f){return ja.apply(this,arguments)}function ja(){return(ja=(0,d.Z)(function*(y,f){return En(y,"POST","/v1/accounts:update",gt(y,f))})).apply(this,arguments)}function vd(){return(vd=(0,d.Z)(function*(y,f){return W(y,"POST","/v1/accounts:signInWithPassword",gt(y,f))})).apply(this,arguments)}function zu(y,f){return bd.apply(this,arguments)}function bd(){return(bd=(0,d.Z)(function*(y,f){return En(y,"POST","/v1/accounts:sendOobCode",gt(y,f))})).apply(this,arguments)}function Fg(y,f){return wd.apply(this,arguments)}function wd(){return(wd=(0,d.Z)(function*(y,f){return zu(y,f)})).apply(this,arguments)}function Lg(y,f){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,d.Z)(function*(y,f){return zu(y,f)})).apply(this,arguments)}function Ga(y,f){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,d.Z)(function*(y,f){return zu(y,f)})).apply(this,arguments)}function Zu(y,f){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,d.Z)(function*(y,f){return zu(y,f)})).apply(this,arguments)}function kl(){return(kl=(0,d.Z)(function*(y,f){return W(y,"POST","/v1/accounts:signInWithEmailLink",gt(y,f))})).apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(y,f){return W(y,"POST","/v1/accounts:signInWithEmailLink",gt(y,f))})).apply(this,arguments)}class $a extends Ua{constructor(f,g,b,S=null){super("password",b),this._email=f,this._password=g,this._tenantId=S}static _fromEmailAndPassword(f,g){return new $a(f,g,"password")}static _fromEmailAndCode(f,g,b=null){return new $a(f,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,d.Z)(function*(){switch(g.signInMethod){case"password":return function ra(y,f){return vd.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ao(y,f){return kl.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:jt(f,"internal-error")}})()}_linkToIdToken(f,g){var b=this;return(0,d.Z)(function*(){switch(b.signInMethod){case"password":return bf(f,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Ha(y,f){return No.apply(this,arguments)}(f,{idToken:g,email:b._email,oobCode:b._password});default:jt(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Xs(y,f){return vr.apply(this,arguments)}function vr(){return(vr=(0,d.Z)(function*(y,f){return W(y,"POST","/v1/accounts:signInWithIdp",gt(y,f))})).apply(this,arguments)}class Nr extends Ua{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Nr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):jt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:S}=g,M=le(g,["providerId","signInMethod"]);if(!b||!S)return null;const U=new Nr(b,S);return U.idToken=M.idToken||void 0,U.accessToken=M.accessToken||void 0,U.secret=M.secret,U.nonce=M.nonce,U.pendingToken=M.pendingToken||null,U}_getIdTokenResponse(f){return Xs(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Xs(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Xs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,F.xO)(g)}return f}}function ji(y,f){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,d.Z)(function*(y,f){return En(y,"POST","/v1/accounts:sendVerificationCode",gt(y,f))})).apply(this,arguments)}function Wa(){return(Wa=(0,d.Z)(function*(y,f){return W(y,"POST","/v1/accounts:signInWithPhoneNumber",gt(y,f))})).apply(this,arguments)}function Pl(){return(Pl=(0,d.Z)(function*(y,f){const g=yield W(y,"POST","/v1/accounts:signInWithPhoneNumber",gt(y,f));if(g.temporaryProof)throw He(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Id={USER_NOT_FOUND:"user-not-found"};function Sd(){return(Sd=(0,d.Z)(function*(y,f){return W(y,"POST","/v1/accounts:signInWithPhoneNumber",gt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Id)})).apply(this,arguments)}class Jt extends Ua{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Jt({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Jt({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function jr(y,f){return Wa.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Td(y,f){return Pl.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Qu(y,f){return Sd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:b,verificationCode:S}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:b,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:b,phoneNumber:S,temporaryProof:M}=f;return b||g||S||M?new Jt({verificationId:g,verificationCode:b,phoneNumber:S,temporaryProof:M}):null}}class cn{constructor(f){var g,b,S,M,U,ee;const Fe=(0,F.zd)((0,F.pd)(f)),ve=null!==(g=Fe.apiKey)&&void 0!==g?g:null,ze=null!==(b=Fe.oobCode)&&void 0!==b?b:null,Ke=function eo(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);Ae(ve&&ze&&Ke,"argument-error"),this.apiKey=ve,this.operation=Ke,this.code=ze,this.continueUrl=null!==(M=Fe.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(U=Fe.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(ee=Fe.tenantId)&&void 0!==ee?ee:null}static parseLink(f){const g=function Ad(y){const f=(0,F.zd)((0,F.pd)(y)).link,g=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,b=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(b?(0,F.zd)((0,F.pd)(b)).link:null)||b||g||f||y}(f);try{return new cn(g)}catch(b){return null}}}let ia=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,b){return $a._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const S=cn.parseLink(b);return Ae(S,"argument-error"),$a._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class er{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Un extends er{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ns extends Un{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Ae("providerId"in g&&"signInMethod"in g,"argument-error"),Nr._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Ae(f.idToken||f.accessToken,"argument-error"),Nr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ns.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ns.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:S,pendingToken:M,nonce:U,providerId:ee}=f;if(!b&&!S&&!g&&!M||!ee)return null;try{return new Ns(ee)._credential({idToken:g,accessToken:b,nonce:U,pendingToken:M})}catch(Fe){return null}}}let sa=(()=>{class y extends Un{constructor(){super("facebook.com")}static credential(g){return Nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),as=(()=>{class y extends Un{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return Nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:S}=g;if(!b&&!S)return null;try{return y.credential(b,S)}catch(M){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Gr=(()=>{class y extends Un{constructor(){super("github.com")}static credential(g){return Nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ls extends Ua{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Xs(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Xs(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Xs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:S,pendingToken:M}=g;return b&&S&&M&&b===S?new ls(b,M):null}static _create(f,g){return new ls(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Hr extends er{constructor(f){Ae(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Hr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Hr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=ls.fromJSON(f);return Ae(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:b}=f;if(!g||!b)return null;try{return ls._create(b,g)}catch(S){return null}}}let to=(()=>{class y extends Un{constructor(){super("twitter.com")}static credential(g,b){return Nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:S}=g;if(!b||!S)return null;try{return y.credential(b,S)}catch(M){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function oa(y,f){return mt.apply(this,arguments)}function mt(){return(mt=(0,d.Z)(function*(y,f){return W(y,"POST","/v1/accounts:signUp",gt(y,f))})).apply(this,arguments)}class cr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,b,S=!1){return(0,d.Z)(function*(){const M=yield Ar._fromIdTokenResponse(f,b,S),U=qa(b);return new cr({user:M,providerId:U,_tokenResponse:b,operationType:g})})()}static _forOperation(f,g,b){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const S=qa(b);return new cr({user:f,providerId:S,_tokenResponse:b,operationType:g})})()}}function qa(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function aa(){return(aa=(0,d.Z)(function*(y){var f;const g=Bn(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new cr({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield oa(g,{returnSecureToken:!0}),S=yield cr._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class la extends F.ZR{constructor(f,g,b,S){var M;super(g.code,g.message),this.operationType=b,this.user=S,Object.setPrototypeOf(this,la.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(f,g,b,S){return new la(f,g,b,S)}}function Xu(y,f,g,b){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?la._fromErrorAndOperation(y,M,f,b):M})}function Fl(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Ot(){return(Ot=(0,d.Z)(function*(y,f){const g=(0,F.m9)(y);yield Mo(!0,g,f);const{providerUserInfo:b}=yield Yn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),S=Fl(b||[]);return g.providerData=g.providerData.filter(M=>S.has(M.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Ll(y,f){return dn.apply(this,arguments)}function dn(){return(dn=(0,d.Z)(function*(y,f,g=!1){const b=yield Qn(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return cr._forOperation(y,"link",b)})).apply(this,arguments)}function Mo(y,f,g){return no.apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(y,f,g){yield Fi(f);const S=!1===y?"provider-already-linked":"no-such-provider";Ae(Fl(f.providerData).has(g)===y,f.auth,S)})).apply(this,arguments)}function ri(y,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,d.Z)(function*(y,f,g=!1){const{auth:b}=y,S="reauthenticate";try{const M=yield Qn(y,Xu(b,S,f,y),g);Ae(M.idToken,b,"internal-error");const U=Co(M.idToken);Ae(U,b,"internal-error");const{sub:ee}=U;return Ae(y.uid===ee,b,"user-mismatch"),cr._forOperation(y,S,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&jt(b,"user-mismatch"),M}})).apply(this,arguments)}function Vl(y,f){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,d.Z)(function*(y,f,g=!1){const b="signIn",S=yield Xu(y,b,f),M=yield cr._fromIdTokenResponse(y,b,S);return g||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Ul(y,f){return ua.apply(this,arguments)}function ua(){return(ua=(0,d.Z)(function*(y,f){return Vl(Bn(y),f)})).apply(this,arguments)}function Ka(y,f){return nr.apply(this,arguments)}function nr(){return(nr=(0,d.Z)(function*(y,f){const g=(0,F.m9)(y);return yield Mo(!1,g,f.providerId),Ll(g,f)})).apply(this,arguments)}function Gi(y,f){return jl.apply(this,arguments)}function jl(){return(jl=(0,d.Z)(function*(y,f){return ri((0,F.m9)(y),f)})).apply(this,arguments)}function Rs(y,f){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,d.Z)(function*(y,f){return W(y,"POST","/v1/accounts:signInWithCustomToken",gt(y,f))})).apply(this,arguments)}function ca(){return(ca=(0,d.Z)(function*(y,f){const g=Bn(y),b=yield Rs(g,{token:f,returnSecureToken:!0}),S=yield cr._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Gl{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Za._fromServerResponse(f,g):jt(f,"internal-error")}}class Za extends Gl{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Za(g)}}function da(y,f,g){var b;Ae((null===(b=g.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),Ae(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Ae(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Ae(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Qa(){return(Qa=(0,d.Z)(function*(y,f,g){const b=(0,F.m9)(y),S={requestType:"PASSWORD_RESET",email:f};g&&da(b,S,g),yield Lg(b,S)})).apply(this,arguments)}function ec(){return(ec=(0,d.Z)(function*(y,f,g){yield vf((0,F.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function ha(){return(ha=(0,d.Z)(function*(y,f){yield Pg((0,F.m9)(y),{oobCode:f})})).apply(this,arguments)}function Md(y,f){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,d.Z)(function*(y,f){const g=(0,F.m9)(y),b=yield vf(g,{oobCode:f}),S=b.requestType;switch(Ae(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ae(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ae(b.mfaInfo,g,"internal-error");default:Ae(b.email,g,"internal-error")}let M=null;return b.mfaInfo&&(M=Gl._fromServerResponse(Bn(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:M},operation:S}})).apply(this,arguments)}function el(){return(el=(0,d.Z)(function*(y,f){const{data:g}=yield Md((0,F.m9)(y),f);return g.email})).apply(this,arguments)}function Rd(){return(Rd=(0,d.Z)(function*(y,f,g){const b=Bn(y),S=yield oa(b,{returnSecureToken:!0,email:f,password:g}),M=yield cr._fromIdTokenResponse(b,"signIn",S);return yield b._updateCurrentUser(M.user),M})).apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(y,f,g){const b=(0,F.m9)(y),S={requestType:"EMAIL_SIGNIN",email:f};Ae(g.handleCodeInApp,b,"argument-error"),g&&da(b,S,g),yield Ga(b,S)})).apply(this,arguments)}function tl(){return(tl=(0,d.Z)(function*(y,f,g){const b=(0,F.m9)(y),S=ia.credentialWithLink(f,g||ht());return Ae(S._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Ul(b,S)})).apply(this,arguments)}function Df(y,f){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,d.Z)(function*(y,f){return En(y,"POST","/v1/accounts:createAuthUri",gt(y,f))})).apply(this,arguments)}function Cf(){return(Cf=(0,d.Z)(function*(y,f){const b={identifier:f,continueUri:tt()?ht():"http://localhost"},{signinMethods:S}=yield Df((0,F.m9)(y),b);return S||[]})).apply(this,arguments)}function ro(){return(ro=(0,d.Z)(function*(y,f){const g=(0,F.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&da(g.auth,S,f);const{email:M}=yield Fg(g.auth,S);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function Wl(){return(Wl=(0,d.Z)(function*(y,f,g){const b=(0,F.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&da(b.auth,M,g);const{email:U}=yield Zu(b.auth,M);U!==y.email&&(yield y.reload())})).apply(this,arguments)}function Tf(y,f){return xd.apply(this,arguments)}function xd(){return(xd=(0,d.Z)(function*(y,f){return En(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const b=(0,F.m9)(y),M={idToken:yield b.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},U=yield Qn(b,Tf(b.auth,M));b.displayName=U.displayName||null,b.photoURL=U.photoUrl||null;const ee=b.providerData.find(({providerId:Fe})=>"password"===Fe);ee&&(ee.displayName=b.displayName,ee.photoURL=b.photoURL),yield b._updateTokensIfNecessary(U)})).apply(this,arguments)}function nl(y,f,g){return ql.apply(this,arguments)}function ql(){return(ql=(0,d.Z)(function*(y,f,g){const{auth:b}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),g&&(M.password=g);const U=yield Qn(y,bf(b,M));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class rl{constructor(f,g,b={}){this.isNewUser=f,this.providerId=g,this.profile=b}}class Pd extends rl{constructor(f,g,b,S){super(f,g,b),this.username=S}}class Ug extends rl{constructor(f,g){super(f,"facebook.com",g)}}class sc extends Pd{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class br extends rl{constructor(f,g){super(f,"google.com",g)}}class fa extends Pd{constructor(f,g,b){super(f,"twitter.com",g,b)}}function Lt(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function kd(y){var f,g;if(!y)return null;const{providerId:b}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&(null==y?void 0:y.idToken)){const U=null===(g=null===(f=Co(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(U)return new rl(M,"anonymous"!==U&&"custom"!==U?U:null)}if(!b)return null;switch(b){case"facebook.com":return new Ug(M,S);case"github.com":return new sc(M,S);case"google.com":return new br(M,S);case"twitter.com":return new fa(M,S,y.screenName||null);case"custom":case"anonymous":return new rl(M,null);default:return new rl(M,b,S)}}(g)}class Kt{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Kt("enroll",f)}static _fromMfaPendingCredential(f){return new Kt("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,b;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Kt._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(b=f.multiFactorSession)||void 0===b?void 0:b.idToken)return Kt._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Sn{constructor(f,g,b){this.session=f,this.hints=g,this.signInResolver=b}static _fromError(f,g){const b=Bn(f),S=g.customData._serverResponse,M=(S.mfaInfo||[]).map(ee=>Gl._fromServerResponse(b,ee));Ae(S.mfaPendingCredential,b,"internal-error");const U=Kt._fromMfaPendingCredential(S.mfaPendingCredential);return new Sn(U,M,function(){var ee=(0,d.Z)(function*(Fe){const ve=yield Fe._process(b,U);delete S.mfaInfo,delete S.mfaPendingCredential;const ze=Object.assign(Object.assign({},S),{idToken:ve.idToken,refreshToken:ve.refreshToken});switch(g.operationType){case"signIn":const Ke=yield cr._fromIdTokenResponse(b,g.operationType,ze);return yield b._updateCurrentUser(Ke.user),Ke;case"reauthenticate":return Ae(g.user,b,"internal-error"),cr._forOperation(g.user,g.operationType,ze);default:jt(b,"internal-error")}});return function(Fe){return ee.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,d.Z)(function*(){return g.signInResolver(f)})()}}function Ro(y,f){return En(y,"POST","/v2/accounts/mfaEnrollment:start",gt(y,f))}class il{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>Gl._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new il(f)}getSession(){var f=this;return(0,d.Z)(function*(){return Kt._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var b=this;return(0,d.Z)(function*(){const S=f,M=yield b.getSession(),U=yield Qn(b.user,S._process(b.user.auth,M,g));return yield b.user._updateTokensIfNecessary(U),b.user.reload()})()}unenroll(f){var g=this;return(0,d.Z)(function*(){const b="string"==typeof f?f:f.uid,S=yield g.user.getIdToken(),M=yield Qn(g.user,function Oo(y,f){return En(y,"POST","/v2/accounts/mfaEnrollment:withdraw",gt(y,f))}(g.user.auth,{idToken:S,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:U})=>U!==b),yield g.user._updateTokensIfNecessary(M);try{yield g.user.reload()}catch(U){if("auth/user-token-expired"!==U.code)throw U}})()}}const $i=new WeakMap,pa="__sak";class en{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(pa,"1"),this.storage.removeItem(pa),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mr=(()=>{class y extends en{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function xs(){const y=(0,F.z$)();return ea(y)||ss(y)}()&&function Vi(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=na(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const S=this.storage.getItem(b),M=this.localCache[b];S!==M&&g(b,M,S)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((ee,Fe,ve)=>{this.notifyListeners(ee,ve)});const S=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(S);if(g.newValue!==ee)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!b)return}const M=()=>{const ee=this.storage.getItem(S);!b&&this.localCache[S]===ee||this.notifyListeners(S,ee)},U=this.storage.getItem(S);!function pd(){return(0,F.w1)()&&10===document.documentMode}()||U===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,b){this.localCache[g]=b;const S=this.listeners[g];if(S)for(const M of Array.from(S))M(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var S=()=>super._set,M=this;return(0,d.Z)(function*(){yield S().call(M,g,b),M.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,S=this;return(0,d.Z)(function*(){const M=yield b().call(S,g);return S.localCache[g]=JSON.stringify(M),M})()}_remove(g){var b=()=>super._remove,S=this;return(0,d.Z)(function*(){yield b().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),hn=(()=>{class y extends en{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return y.type="SESSION",y})();let Fd=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(M=>M.isListeningto(g));if(b)return b;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,d.Z)(function*(){const S=g,{eventId:M,eventType:U,data:ee}=S.data,Fe=b.handlersMap[U];if(!(null==Fe?void 0:Fe.size))return;S.ports[0].postMessage({status:"ack",eventId:M,eventType:U});const ve=Array.from(Fe).map(function(){var Ke=(0,d.Z)(function*(Pt){return Pt(S.origin,ee)});return function(Pt){return Ke.apply(this,arguments)}}()),ze=yield function Kl(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return f.apply(this,arguments)}}()))}(ve);S.ports[0].postMessage({status:"done",eventId:M,eventType:U,response:ze})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function so(y="",f=10){let g="";for(let b=0;b<f;b++)g+=Math.floor(10*Math.random());return y+g}class ko{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,b=50){var S=this;return(0,d.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let U,ee;return new Promise((Fe,ve)=>{const ze=so("",20);M.port1.start();const Ke=setTimeout(()=>{ve(new Error("unsupported_event"))},b);ee={messageChannel:M,onMessage(Pt){const sr=Pt;if(sr.data.eventId===ze)switch(sr.data.status){case"ack":clearTimeout(Ke),U=setTimeout(()=>{ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),Fe(sr.data.response);break;default:clearTimeout(Ke),clearTimeout(U),ve(new Error("invalid_response"))}}},S.handlers.add(ee),M.port1.addEventListener("message",ee.onMessage),S.target.postMessage({eventType:f,eventId:ze,data:g},[M.port2])}).finally(()=>{ee&&S.removeMessageHandler(ee)})})()}}function Pn(){return window}function ga(){return void 0!==Pn().WorkerGlobalScope&&"function"==typeof Pn().importScripts}function cs(){return(cs=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Po="firebaseLocalStorageDb",qi="firebaseLocalStorage",Ld="fbase_key";class on{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Nn(y,f){return y.transaction([qi],f?"readwrite":"readonly").objectStore(qi)}function cc(){const y=indexedDB.open(Po,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(qi,{keyPath:Ld})}catch(S){g(S)}}),y.addEventListener("success",(0,d.Z)(function*(){const b=y.result;b.objectStoreNames.contains(qi)?f(b):(b.close(),yield function ma(){const y=indexedDB.deleteDatabase(Po);return new on(y).toPromise()}(),f(yield cc()))}))})}function ks(y,f,g){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,d.Z)(function*(y,f,g){const b=Nn(y,!0).put({[Ld]:f,value:g});return new on(b).toPromise()})).apply(this,arguments)}function ol(){return(ol=(0,d.Z)(function*(y,f){const g=Nn(y,!1).get(f),b=yield new on(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Fo(y,f){const g=Nn(y,!0).delete(f);return new on(g).toPromise()}const hs=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield cc()),g.db})()}_withRetries(g){var b=this;return(0,d.Z)(function*(){let S=0;for(;;)try{const M=yield b._openDb();return yield g(M)}catch(M){if(S++>3)throw M;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return ga()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=Fd._getInstance(function uc(){return ga()?self:null}()),g.receiver._subscribe("keyChanged",function(){var b=(0,d.Z)(function*(S,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(S,M){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,d.Z)(function*(S,M){return["keyChanged"]});return function(S,M){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var b,S;if(g.activeServiceWorker=yield function Wr(){return cs.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ko(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(b=M[0])||void 0===b?void 0:b.fulfilled)&&(null===(S=M[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,d.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function ii(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield cc();return yield ks(g,pa,"1"),yield Fo(g,pa),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,d.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var S=this;return(0,d.Z)(function*(){return S._withPendingWrite((0,d.Z)(function*(){return yield S._withRetries(M=>ks(M,g,b)),S.localCache[g]=b,S.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,d.Z)(function*(){const S=yield b._withRetries(M=>function My(y,f){return ol.apply(this,arguments)}(M,g));return b.localCache[g]=S,S})()}_remove(g){var b=this;return(0,d.Z)(function*(){return b._withPendingWrite((0,d.Z)(function*(){return yield b._withRetries(S=>Fo(S,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const b=yield g._withRetries(U=>{const ee=Nn(U,!1).getAll();return new on(ee).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const S=[],M=new Set;for(const{fbase_key:U,value:ee}of b)M.add(U),JSON.stringify(g.localCache[U])!==JSON.stringify(ee)&&(g.notifyListeners(U,ee),S.push(U));for(const U of Object.keys(g.localCache))g.localCache[U]&&!M.has(U)&&(g.notifyListeners(U,null),S.push(U));return S})()}notifyListeners(g,b){this.localCache[g]=b;const S=this.listeners[g];if(S)for(const M of Array.from(S))M(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Zl(y,f){return En(y,"POST","/v2/accounts/mfaSignIn:start",gt(y,f))}function nn(){return(nn=(0,d.Z)(function*(y){return(yield En(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function al(y){return new Promise((f,g)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=f,b.onerror=S=>{const M=Dn("internal-error");M.customData=S,g(M)},b.type="text/javascript",b.charset="UTF-8",function hc(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(b)})}function _a(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ya=1e12;class Yl{constructor(f){this.auth=f,this.counter=ya,this._widgets=new Map}render(f,g){const b=this.counter;return this._widgets.set(b,new Ql(f,this.auth.name,g||{})),this.counter++,b}reset(f){var g;const b=f||ya;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(f){var g;return(null===(g=this._widgets.get(f||ya))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,d.Z)(function*(){var b;return null===(b=g._widgets.get(f||ya))||void 0===b||b.execute(),""})()}}class Ql{constructor(f,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;Ae(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Fs(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const wr=_a("rcb"),Ls=new At(3e4,6e4);class Ry{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Pn().grecaptcha}load(f,g=""){return Ae(function ll(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Pn().grecaptcha):new Promise((b,S)=>{const M=Pn().setTimeout(()=>{S(Dn(f,"network-request-failed"))},Ls.get());Pn()[wr]=()=>{Pn().clearTimeout(M),delete Pn()[wr];const ee=Pn().grecaptcha;if(!ee)return void S(Dn(f,"internal-error"));const Fe=ee.render;ee.render=(ve,ze)=>{const Ke=Fe(ve,ze);return this.counter++,Ke},this.hostLanguage=g,b(ee)},al(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:wr,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),S(Dn(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Pn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fc{load(f){return(0,d.Z)(function*(){return new Yl(f)})()}clearedOneInstance(){}}const pc="recaptcha",Bd={theme:"light",type:"image"};class Lo{constructor(f,g=Object.assign({},Bd),b){this.parameters=g,this.type=pc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bn(b),this.isInvisible="invisible"===this.parameters.size,Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;Ae(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fc:new Ry,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(g)||new Promise(M=>{const U=ee=>{!ee||(f.tokenChangeListeners.delete(U),M(ee))};f.tokenChangeListeners.add(U),f.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Ae(!this.parameters.sitekey,this.auth,"argument-error"),Ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof f)f(g);else if("string"==typeof f){const b=Pn()[f];"function"==typeof b&&b(g)}}}assertNotDestroyed(){Ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){Ae(tt()&&!ga(),f.auth,"internal-error"),yield function gc(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function si(y){return nn.apply(this,arguments)}(f.auth);Ae(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ul{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Jt._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Di(){return(Di=(0,d.Z)(function*(y,f,g){const b=Bn(y),S=yield cl(b,f,(0,F.m9)(g));return new ul(S,M=>Ul(b,M))})).apply(this,arguments)}function qr(){return(qr=(0,d.Z)(function*(y,f,g){const b=(0,F.m9)(y);yield Mo(!1,b,"phone");const S=yield cl(b.auth,f,(0,F.m9)(g));return new ul(S,M=>Ka(b,M))})).apply(this,arguments)}function Vo(){return(Vo=(0,d.Z)(function*(y,f,g){const b=(0,F.m9)(y),S=yield cl(b.auth,f,(0,F.m9)(g));return new ul(S,M=>Gi(b,M))})).apply(this,arguments)}function cl(y,f,g){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,d.Z)(function*(y,f,g){var b;const S=yield g.verify();try{let M;if(Ae("string"==typeof S,y,"argument-error"),Ae(g.type===pc,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const U=M.session;if("phoneNumber"in M)return Ae("enroll"===U.type,y,"internal-error"),(yield Ro(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{Ae("signin"===U.type,y,"internal-error");const ee=(null===(b=M.multiFactorHint)||void 0===b?void 0:b.uid)||M.multiFactorUid;return Ae(ee,y,"missing-multi-factor-info"),(yield Zl(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield ji(y,{phoneNumber:M.phoneNumber,recaptchaToken:S});return U}}finally{g._reset()}})).apply(this,arguments)}function dl(){return(dl=(0,d.Z)(function*(y,f){yield Ll((0,F.m9)(y),f)})).apply(this,arguments)}let C=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Bn(g)}verifyPhoneNumber(g,b){return cl(this.auth,g,(0,F.m9)(b))}static credential(g,b){return Jt._fromVerification(g,b)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:S}=g;return b&&S?Jt._fromTokenResponse(b,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function I(y,f){return f?qt(f):(Ae(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class O extends Ua{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Xs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Xs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Xs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function B(y){return Vl(y.auth,new O(y),y.bypassAuthState)}function K(y){const{auth:f,user:g}=y;return Ae(g,f,"internal-error"),ri(g,new O(y),y.bypassAuthState)}function ce(y){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,d.Z)(function*(y){const{auth:f,user:g}=y;return Ae(g,f,"internal-error"),Ll(g,new O(y),y.bypassAuthState)})).apply(this,arguments)}class Ye{constructor(f,g,b,S,M=!1){this.auth=f,this.resolver=b,this.user=S,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,d.Z)(function*(b,S){f.pendingPromise={resolve:b,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(b,S){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,d.Z)(function*(){const{urlResponse:b,sessionId:S,postBody:M,tenantId:U,error:ee,type:Fe}=f;if(ee)return void g.reject(ee);const ve={auth:g.auth,requestUri:b,sessionId:S,tenantId:U||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(ve))}catch(ze){g.reject(ze)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return B;case"linkViaPopup":case"linkViaRedirect":return ce;case"reauthViaPopup":case"reauthViaRedirect":return K;default:jt(this.auth,"internal-error")}}resolve(f){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qe=new At(2e3,1e4);function Xt(){return(Xt=(0,d.Z)(function*(y,f,g){const b=Bn(y);ti(y,f,er);const S=I(b,g);return new fs(b,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(y,f,g){const b=(0,F.m9)(y);ti(b.auth,f,er);const S=I(b.auth,g);return new fs(b.auth,"reauthViaPopup",f,S,b).executeNotNull()})).apply(this,arguments)}function Bo(){return(Bo=(0,d.Z)(function*(y,f,g){const b=(0,F.m9)(y);ti(b.auth,f,er);const S=I(b.auth,g);return new fs(b.auth,"linkViaPopup",f,S,b).executeNotNull()})).apply(this,arguments)}let fs=(()=>{class y extends Ye{constructor(g,b,S,M,U){super(g,b,M,U),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const b=yield g.execute();return Ae(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,d.Z)(function*(){Xe(1===g.filter.length,"Popup operations only handle one event");const b=so();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(Dn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,S;this.pollId=(null===(S=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,qe.get())};g()}}return y.currentPopupAction=null,y})();const Ei=new Map;class lo extends Ye{constructor(f,g,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,d.Z)(function*(){let b=Ei.get(g.auth._key());if(!b){try{const M=(yield function hl(y,f){return jd.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;b=()=>Promise.resolve(M)}catch(S){b=()=>Promise.reject(S)}Ei.set(g.auth._key(),b)}return g.bypassAuthState||Ei.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,b=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(b,f);if("unknown"!==f.type){if(f.eventId){const S=yield b.auth._redirectUserForId(f.eventId);if(S)return b.user=S,g().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function jd(){return(jd=(0,d.Z)(function*(y,f){const g=nu(f),b=tu(y);if(!(yield b._isAvailable()))return!1;const S="true"===(yield b._get(g));return yield b._remove(g),S})).apply(this,arguments)}function ba(y,f){return _c.apply(this,arguments)}function _c(){return(_c=(0,d.Z)(function*(y,f){return tu(y)._set(nu(f),"true")})).apply(this,arguments)}function tu(y){return qt(y._redirectPersistence)}function nu(y){return $t("pendingRedirect",y.config.apiKey,y.name)}function Nf(){return(Nf=(0,d.Z)(function*(y,f,g){const b=Bn(y);ti(y,f,er);const S=I(b,g);return yield ba(S,b),S._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function Mf(){return(Mf=(0,d.Z)(function*(y,f,g){const b=(0,F.m9)(y);ti(b.auth,f,er);const S=I(b.auth,g);yield ba(S,b.auth);const M=yield ru(b);return S._openRedirect(b.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function vc(){return(vc=(0,d.Z)(function*(y,f,g){const b=(0,F.m9)(y);ti(b.auth,f,er);const S=I(b.auth,g);yield Mo(!1,b,f.providerId),yield ba(S,b.auth);const M=yield ru(b);return S._openRedirect(b.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function Of(){return(Of=(0,d.Z)(function*(y,f){return yield Bn(y)._initializationPromise,bc(y,f,!1)})).apply(this,arguments)}function bc(y,f){return xf.apply(this,arguments)}function xf(){return(xf=(0,d.Z)(function*(y,f,g=!1){const b=Bn(y),S=I(b,f),U=yield new lo(b,S,g).execute();return U&&!g&&(delete U.user._redirectEventId,yield b._persistUserIfCurrent(U.user),yield b._setRedirectUser(null,f)),U})).apply(this,arguments)}function ru(y){return iu.apply(this,arguments)}function iu(){return(iu=(0,d.Z)(function*(y){const f=so(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class $d{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(g=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function zd(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qd(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var b;if(f.error&&!qd(f)){const S=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(Dn(this.auth,S))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const b=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wd(f))}saveEventToCache(f){this.cachedEventUids.add(Wd(f)),this.lastProcessedEventTime=Date.now()}}function Wd(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function qd({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function kf(y){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,d.Z)(function*(y,f={}){return En(y,"GET","/v1/projects",f)})).apply(this,arguments)}const rn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zt=/^https?/;function Ci(){return(Ci=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield kf(y);for(const g of f)try{if(gn(g))return}catch(b){}jt(y,"unauthorized-domain")})).apply(this,arguments)}function gn(y){const f=ht(),{protocol:g,hostname:b}=new URL(f);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===b?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&U.hostname===b}if(!Zt.test(g))return!1;if(rn.test(y))return b===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(b)}const Gg=new At(3e4,6e4);function xy(){const y=Pn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Yd=null;function Mn(y){return Yd=Yd||function Zd(y){return new Promise((f,g)=>{var b,S,M;function U(){xy(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{xy(),g(Dn(y,"network-request-failed"))},timeout:Gg.get()})}if(null===(S=null===(b=Pn().gapi)||void 0===b?void 0:b.iframes)||void 0===S?void 0:S.Iframe)f(gapi.iframes.getContext());else{if(!(null===(M=Pn().gapi)||void 0===M?void 0:M.load)){const ee=_a("iframefcb");return Pn()[ee]=()=>{gapi.load?U():g(Dn(y,"network-request-failed"))},al(`https://apis.google.com/js/api.js?onload=${ee}`).catch(Fe=>g(Fe))}U()}}).catch(f=>{throw Yd=null,f})}(y),Yd}const xt=new At(5e3,15e3),Pf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ps=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yw(y){const f=y.config;Ae(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?et(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:y.name,v:ae.SDK_VERSION},S=ps.get(y.config.apiHost);S&&(b.eid=S);const M=y._getFrameworks();return M.length&&(b.fw=M.join(",")),`${g}?${(0,F.xO)(b).slice(1)}`}function su(){return su=(0,d.Z)(function*(y){const f=yield Mn(y),g=Pn().gapi;return Ae(g,y,"internal-error"),f.open({where:document.body,url:yw(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pf,dontclear:!0},b=>new Promise(function(){var S=(0,d.Z)(function*(M,U){yield b.restyle({setHideOnLeave:!1});const ee=Dn(y,"network-request-failed"),Fe=Pn().setTimeout(()=>{U(ee)},xt.get());function ve(){Pn().clearTimeout(Fe),M(b)}b.ping(ve).then(ve,()=>{U(ee)})});return function(M,U){return S.apply(this,arguments)}}()))}),su.apply(this,arguments)}const Ff={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lf{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function au(y,f,g,b,S,M){Ae(y.config.authDomain,y,"auth-domain-config-required"),Ae(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:b,v:ae.SDK_VERSION,eventId:S};if(f instanceof er){f.setDefaultLanguage(y.languageCode),U.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(U.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,ve]of Object.entries(M||{}))U[Fe]=ve}if(f instanceof Un){const Fe=f.getScopes().filter(ve=>""!==ve);Fe.length>0&&(U.scopes=Fe.join(","))}y.tenantId&&(U.tid=y.tenantId);const ee=U;for(const Fe of Object.keys(ee))void 0===ee[Fe]&&delete ee[Fe];return`${function Uo({config:y}){return y.emulator?et(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(ee).slice(1)}`}const kt="webStorageSupport";class gs extends class $g{constructor(f){this.factorId=f}_process(f,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,b);case"signin":return this._finalizeSignIn(f,g.credential);default:return _r("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new gs(f)}_finalizeEnroll(f,g,b){return function us(y,f){return En(y,"POST","/v2/accounts/mfaEnrollment:finalize",gt(y,f))}(f,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function dc(y,f){return En(y,"POST","/v2/accounts/mfaSignIn:finalize",gt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qd=(()=>{class y{constructor(){}static assertion(g){return gs._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var ms="@firebase/auth";class Or{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(b=>{var S;f((null===(S=b)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mn(){return window}function uu(){return(uu=(0,d.Z)(function*(y,f,g){var b;const{BuildInfo:S}=mn();Xe(f.sessionId,"AuthEvent did not contain a session ID");const M=yield bn(f.sessionId),U={};return ss()?U.ibi=S.packageName:is()?U.apn=S.packageName:jt(y,"operation-not-supported-in-this-environment"),S.displayName&&(U.appDisplayName=S.displayName),U.sessionId=M,au(y,g,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,U)})).apply(this,arguments)}function Jd(){return(Jd=(0,d.Z)(function*(y){const{BuildInfo:f}=mn(),g={};ss()?g.iosBundleId=f.packageName:is()?g.androidPackageName=f.packageName:jt(y,"operation-not-supported-in-this-environment"),yield kf(y,g)})).apply(this,arguments)}function jf(){return(jf=(0,d.Z)(function*(y,f,g){const{cordova:b}=mn();let S=()=>{};try{yield new Promise((M,U)=>{let ee=null;function Fe(){var Ke;M();const Pt=null===(Ke=b.plugins.browsertab)||void 0===Ke?void 0:Ke.close;"function"==typeof Pt&&Pt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function ve(){ee||(ee=window.setTimeout(()=>{U(Dn(y,"redirect-cancelled-by-user"))},2e3))}function ze(){"visible"===(null==document?void 0:document.visibilityState)&&ve()}f.addPassiveListener(Fe),document.addEventListener("resume",ve,!1),is()&&document.addEventListener("visibilitychange",ze,!1),S=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",ve,!1),document.removeEventListener("visibilitychange",ze,!1),ee&&window.clearTimeout(ee)}})}finally{S()}})).apply(this,arguments)}function bn(y){return Zg.apply(this,arguments)}function Zg(){return(Zg=(0,d.Z)(function*(y){const f=Dc(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Dc(y){if(Xe(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let b=0;b<y.length;b++)g[b]=y.charCodeAt(b);return g}!function wc(y){(0,ae._registerComponent)(new he.wA("auth",(f,{options:g})=>{const b=f.getProvider("app").getImmediate(),{apiKey:S,authDomain:M}=b.options;return(U=>{Ae(S&&!S.includes(":"),"invalid-api-key",{appName:U.name}),Ae(!(null==M?void 0:M.includes(":")),"argument-error",{appName:U.name});const ee={apiKey:S,authDomain:M,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bi(y)},Fe=new gd(U,ee);return function Ys(y,f){const g=(null==f?void 0:f.persistence)||[],b=(Array.isArray(g)?g:[g]).map(qt);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(b,null==f?void 0:f.popupRedirectResolver)}(Fe,g),Fe})(b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,b)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new he.wA("auth-internal",f=>{const g=Bn(f.getProvider("auth").getImmediate());return new Or(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(ms,"0.19.6",function Ly(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(ms,"0.19.6","esm2017")}("Browser");class Ec extends $d{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function Gn(y){return vt.apply(this,arguments)}function vt(){return(vt=(0,d.Z)(function*(y){const f=yield Hf()._get(_n(y));return f&&(yield Hf()._remove(_n(y))),f})).apply(this,arguments)}function Cc(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*f.length);y.push(f.charAt(b))}return y.join("")}function Hf(){return qt(Mr)}function _n(y){return $t("authEvent",y.config.apiKey,y.name)}function cu(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,F.zd)(g.join("?"))}function Tc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Dn("no-auth-event")}}function jo(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function du(y=(0,F.z$)()){return!("file:"!==jo()&&"ionic:"!==jo()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function hu(){try{const y=self.localStorage,f=so();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Gy(y=(0,F.z$)()){return function qf(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ic(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return zf()&&(0,F.hl)()}return!1}function zf(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kf(){return(function Go(){return"http:"===jo()||"https:"===jo()}()||(0,F.ru)()||du())&&!function jy(){return(0,F.b$)()||(0,F.UG)()}()&&hu()&&!zf()}function em(){return du()&&"undefined"!=typeof document}function eh(){return(eh=(0,d.Z)(function*(){return!!em()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const li={LOCAL:"local",NONE:"none",SESSION:"session"},Sc=Ae,Ac="persistence";function zi(y){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,d.Z)(function*(y){yield y._initializationPromise;const f=fu(),g=$t(Ac,y.config.apiKey,y.name);(null==f?void 0:f.sessionStorage)&&f.sessionStorage.setItem(g,y._getPersistence())})).apply(this,arguments)}function fu(){return"undefined"!=typeof window?window:null}const Mc=Ae;class hr{constructor(){this.browserResolver=qt(class Bf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hn,this._completeRedirectFn=bc}_openPopup(f,g,b,S){var M=this;return(0,d.Z)(function*(){var U;Xe(null===(U=M.eventManagers[f._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const ee=au(f,g,b,ht(),S);return function Fy(y,f,g,b=500,S=600){const M=Math.max((window.screen.availHeight-S)/2,0).toString(),U=Math.max((window.screen.availWidth-b)/2,0).toString();let ee="";const Fe=Object.assign(Object.assign({},Ff),{width:b.toString(),height:S.toString(),top:M,left:U}),ve=(0,F.z$)().toLowerCase();g&&(ee=So(ve)?"_blank":g),Ct(ve)&&(f=f||"http://localhost",Fe.scrollbars="yes");const ze=Object.entries(Fe).reduce((Pt,[sr,fo])=>`${Pt}${sr}=${fo},`,"");if(function un(y=(0,F.z$)()){var f;return ss(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(ve)&&"_self"!==ee)return function vw(y,f){const g=document.createElement("a");g.href=y,g.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(f||"",ee),new Lf(null);const Ke=window.open(f||"",ee,ze);Ae(Ke,y,"popup-blocked");try{Ke.focus()}catch(Pt){}return new Lf(Ke)}(f,ee,so())})()}_openRedirect(f,g,b,S){var M=this;return(0,d.Z)(function*(){return yield M._originValidation(f),function sl(y){Pn().location.href=y}(au(f,g,b,ht(),S)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:S,promise:M}=this.eventManagers[g];return S?Promise.resolve(S):(Xe(M,"If manager is not set, promise should be"),M)}const b=this.initAndGetManager(f);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(f){var g=this;return(0,d.Z)(function*(){const b=yield function Py(y){return su.apply(this,arguments)}(f),S=new $d(f);return b.register("authEvent",M=>(Ae(null==M?void 0:M.authEvent,f,"invalid-auth-event"),{status:S.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:S},g.iframes[f._key()]=b,S})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(kt,{type:kt},S=>{var M;const U=null===(M=null==S?void 0:S[0])||void 0===M?void 0:M[kt];void 0!==U&&g(!!U),jt(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function bt(y){return Ci.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return na()||ea()||ss()}}),this.cordovaResolver=qt(class Wf{constructor(){this._redirectPersistence=hn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bc}_initialize(f){var g=this;return(0,d.Z)(function*(){const b=f._key();let S=g.eventManagers.get(b);return S||(S=new Ec(f),g.eventManagers.set(b,S),g.attachCallbackListeners(f,S)),S})()}_openPopup(f){jt(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,b,S){var M=this;return(0,d.Z)(function*(){!function By(y){var f,g,b,S,M,U,ee,Fe,ve,ze;const Ke=mn();Ae("function"==typeof(null===(f=null==Ke?void 0:Ke.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ae(void 0!==(null===(g=null==Ke?void 0:Ke.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ae("function"==typeof(null===(M=null===(S=null===(b=null==Ke?void 0:Ke.cordova)||void 0===b?void 0:b.plugins)||void 0===S?void 0:S.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(Fe=null===(ee=null===(U=null==Ke?void 0:Ke.cordova)||void 0===U?void 0:U.plugins)||void 0===ee?void 0:ee.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(ze=null===(ve=null==Ke?void 0:Ke.cordova)||void 0===ve?void 0:ve.InAppBrowser)||void 0===ze?void 0:ze.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const U=yield M._initialize(f);yield U.initialized(),U.resetRedirect(),function eu(){Ei.clear()}(),yield M._originValidation(f);const ee=function ml(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Cc(),postBody:null,tenantId:y.tenantId,error:Dn(y,"no-auth-event")}}(f,b,S);yield function uo(y,f){return Hf()._set(_n(y),f)}(f,ee);const Fe=yield function zg(y,f,g){return uu.apply(this,arguments)}(f,ee,g),ve=yield function Kg(y){const{cordova:f}=mn();return new Promise(g=>{f.plugins.browsertab.isAvailable(b=>{let S=null;b?f.plugins.browsertab.openUrl(y):S=f.InAppBrowser.open(y,function ur(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Fe);return function Vy(y,f,g){return jf.apply(this,arguments)}(f,U,ve)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function gl(y){return Jd.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:b,handleOpenURL:S,BuildInfo:M}=mn(),U=setTimeout((0,d.Z)(function*(){yield Gn(f),g.onEvent(Tc())}),500),ee=function(){var ze=(0,d.Z)(function*(Ke){clearTimeout(U);const Pt=yield Gn(f);let sr=null;Pt&&(null==Ke?void 0:Ke.url)&&(sr=function Gf(y,f){var g,b;const S=function Yg(y){const f=cu(y),g=f.link?decodeURIComponent(f.link):void 0,b=cu(g).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return cu(S).link||S||b||g||y}(f);if(S.includes("/__/auth/callback")){const M=cu(S),U=M.firebaseError?function $f(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(M.firebaseError)):null,ee=null===(b=null===(g=null==U?void 0:U.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],Fe=ee?Dn(ee):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Pt,Ke.url)),g.onEvent(sr||Tc())});return function(Pt){return ze.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,ee);const Fe=S,ve=`${M.packageName.toLowerCase()}://`;mn().handleOpenURL=function(){var ze=(0,d.Z)(function*(Ke){if(Ke.toLowerCase().startsWith(ve)&&ee({url:Ke}),"function"==typeof Fe)try{Fe(Ke)}catch(Pt){console.error(Pt)}});return function(Ke){return ze.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=hn,this._completeRedirectFn=bc}_initialize(f){var g=this;return(0,d.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,b,S){var M=this;return(0,d.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,g,b,S)})()}_openRedirect(f,g,b,S){var M=this;return(0,d.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,g,b,S)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return em()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Mc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Zf(){return eh.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function pu(y){return y.unwrap()}function Hy(y){return gu(y)}function gu(y){const{_tokenResponse:f}=y instanceof F.ZR?y.customData:y;if(!f)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return C.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=as;break;case"facebook.com":b=sa;break;case"github.com":b=Gr;break;case"twitter.com":b=to;break;default:const{oauthIdToken:S,oauthAccessToken:M,oauthTokenSecret:U,pendingToken:ee,nonce:Fe}=f;return M||U||S||ee?ee?g.startsWith("saml.")?ls._create(g,ee):Nr._fromParams({providerId:g,signInMethod:g,pendingToken:ee,idToken:S,accessToken:M}):new Ns(g).credential({idToken:S,accessToken:M,rawNonce:Fe}):null}return y instanceof F.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function ui(y,f){return f.catch(g=>{throw g instanceof F.ZR&&function Qf(y,f){var g;const b=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Rc(y,function lc(y,f){var g;const b=(0,F.m9)(y),S=f;return Ae(f.customData.operationType,b,"argument-error"),Ae(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),Sn._fromError(b,S)}(y,f));else if(b){const S=gu(f),M=f;S&&(M.credential=S,M.tenantId=b.tenantId||void 0,M.email=b.email||void 0,M.phoneNumber=b.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Hy(g),additionalUserInfo:Lt(g),user:_s.getOrCreate(S)}})}function th(y,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,d.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:b=>ui(y,g.confirm(b))}})).apply(this,arguments)}class Rc{constructor(f,g){this.resolver=g,this.auth=function Yf(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ui(pu(this.auth),this.resolver.resolveSignIn(f))}}class _s{constructor(f){this._delegate=f,this.multiFactor=function xo(y){const f=(0,F.m9)(y);return $i.has(f)||$i.set(f,il._fromUser(f)),$i.get(f)}(f)}static getOrCreate(f){return _s.USER_MAP.has(f)||_s.USER_MAP.set(f,new _s(f)),_s.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,d.Z)(function*(){return ui(g.auth,Ka(g._delegate,f))})()}linkWithPhoneNumber(f,g){var b=this;return(0,d.Z)(function*(){return th(b.auth,function Ud(y,f,g){return qr.apply(this,arguments)}(b._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,d.Z)(function*(){return ui(g.auth,function vn(y,f,g){return Bo.apply(this,arguments)}(g._delegate,f,hr))})()}linkWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield zi(Bn(g.auth)),function Rf(y,f,g){return function yc(y,f,g){return vc.apply(this,arguments)}(y,f,g)}(g._delegate,f,hr)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,d.Z)(function*(){return ui(g.auth,Gi(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return th(this.auth,function mc(y,f,g){return Vo.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return ui(this.auth,function oi(y,f,g){return ir.apply(this,arguments)}(this._delegate,f,hr))}reauthenticateWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield zi(Bn(g.auth)),function _w(y,f,g){return function Oy(y,f,g){return Mf.apply(this,arguments)}(y,f,g)}(g._delegate,f,hr)})()}sendEmailVerification(f){return function ic(y,f){return ro.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,d.Z)(function*(){return yield function Se(y,f){return Ot.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function If(y,f){return nl((0,F.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Bg(y,f){return nl((0,F.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Af(y,f){return dl.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Os(y,f){return Tn.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function $l(y,f,g){return Wl.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_s.USER_MAP=new WeakMap;const mu=Ae;let co=(()=>{class y{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;mu(S,"invalid-api-key",{appName:g.name}),mu(S,"invalid-api-key",{appName:g.name});const M="undefined"!=typeof window?hr:void 0;this._delegate=b.initialize({options:{persistence:Da(S,g.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Sr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_s.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function os(y,f,g){const b=Bn(y);Ae(b._canInitEmulator,b,"emulator-config-failed"),Ae(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const S=!!(null==g?void 0:g.disableWarnings),M=md(f),{host:U,port:ee}=function xl(y){const f=md(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(b);if(S){const M=S[1];return{host:M,port:yf(b.substr(M.length+1))}}{const[M,U]=b.split(":");return{host:M,port:yf(U)}}}(f);b.config.emulator={url:`${M}//${U}${null===ee?"":`:${ee}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:U,port:ee,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Ui(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,b)}applyActionCode(g){return function tc(y,f){return ha.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Md(this._delegate,g)}confirmPasswordReset(g,b){return function Ja(y,f,g){return ec.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var S=this;return(0,d.Z)(function*(){return ui(S._delegate,function Hl(y,f,g){return Rd.apply(this,arguments)}(S._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Od(y,f){return Cf.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Cn(y,f){const g=cn.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,d.Z)(function*(){mu(Kf(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function fl(y,f){return Of.apply(this,arguments)}(g._delegate,hr);return b?ui(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Uy(y,f){Bn(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,b,S){const{next:M,error:U,complete:ee}=wa(g,b,S);return this._delegate.onAuthStateChanged(M,U,ee)}onIdTokenChanged(g,b,S){const{next:M,error:U,complete:ee}=wa(g,b,S);return this._delegate.onIdTokenChanged(M,U,ee)}sendSignInLinkToEmail(g,b){return function dr(y,f,g){return jn.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function Ya(y,f,g){return Qa.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,d.Z)(function*(){let S;switch(function yl(y,f){Sc(Object.values(li).includes(f),y,"invalid-persistence-type"),(0,F.b$)()?Sc(f!==li.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?Sc(f===li.NONE,y,"unsupported-persistence-type"):zf()?Sc(f===li.NONE||f===li.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):Sc(f===li.NONE||hu(),y,"unsupported-persistence-type")}(b._delegate,g),g){case li.SESSION:S=hn;break;case li.LOCAL:S=(yield qt(hs)._isAvailable())?hs:Mr;break;case li.NONE:S=Ur;break;default:return jt("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ui(this._delegate,function za(y){return aa.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ui(this._delegate,Ul(this._delegate,g))}signInWithCustomToken(g){return ui(this._delegate,function Nd(y,f){return ca.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return ui(this._delegate,function Vg(y,f,g){return Ul((0,F.m9)(y),ia.credential(f,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return ui(this._delegate,function rc(y,f,g){return tl.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return th(this._delegate,function Jl(y,f,g){return Di.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,d.Z)(function*(){return mu(Kf(),b._delegate,"operation-not-supported-in-this-environment"),ui(b._delegate,function Bt(y,f,g){return Xt.apply(this,arguments)}(b._delegate,g,hr))})()}signInWithRedirect(g){var b=this;return(0,d.Z)(function*(){return mu(Kf(),b._delegate,"operation-not-supported-in-this-environment"),yield zi(b._delegate),function Gd(y,f,g){return function Hd(y,f,g){return Nf.apply(this,arguments)}(y,f,g)}(b._delegate,g,hr)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function nc(y,f){return el.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=li,y})();function wa(y,f,g){let b=y;"function"!=typeof y&&({next:b,error:f,complete:g}=y);const S=b;return{next:U=>S(U&&_s.getOrCreate(U)),error:f,complete:g}}function Da(y,f){const g=function ww(y,f){const g=fu();if(!(null==g?void 0:g.sessionStorage))return[];const b=$t(Ac,y,f);switch(g.sessionStorage.getItem(b)){case li.NONE:return[Ur];case li.LOCAL:return[hs,hn];case li.SESSION:return[hn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(hs)&&g.push(hs),"undefined"!=typeof window)for(const b of[Mr,hn])g.includes(b)||g.push(b);return g.includes(Ur)||g.push(Ur),g}class Ea{constructor(){this.providerId="phone",this._delegate=new C(pu(Q.Z.auth()))}static credential(f,g){return C.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Ea.PHONE_SIGN_IN_METHOD=C.PHONE_SIGN_IN_METHOD,Ea.PROVIDER_ID=C.PROVIDER_ID;const ho=Ae;class $y{constructor(f,g,b=Q.Z.app()){var S;ho(null===(S=b.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new Lo(f,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Oc(y){y.INTERNAL.registerComponent(new he.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new co(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ia,FacebookAuthProvider:sa,GithubAuthProvider:Gr,GoogleAuthProvider:as,OAuthProvider:Ns,SAMLAuthProvider:Hr,PhoneAuthProvider:Ea,PhoneMultiFactorGenerator:Qd,RecaptchaVerifier:$y,TwitterAuthProvider:to,Auth:co,AuthCredential:Ua,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.6")}(Q.Z)},2940:function(nt,Ee){!function(P){"use strict";function d(Z){return Array.prototype.slice.call(Z)}function Q(Z){return new Promise(function(ne,_e){Z.onsuccess=function(){ne(Z.result)},Z.onerror=function(){_e(Z.error)}})}function F(Z,ne,_e){var Te,ye=new Promise(function(je,Ie){Q(Te=Z[ne].apply(Z,_e)).then(je,Ie)});return ye.request=Te,ye}function ae(Z,ne,_e){var Te=F(Z,ne,_e);return Te.then(function(ye){if(ye)return new H(ye,Te.request)})}function re(Z,ne,_e){_e.forEach(function(Te){Object.defineProperty(Z.prototype,Te,{get:function(){return this[ne][Te]},set:function(ye){this[ne][Te]=ye}})})}function ge(Z,ne,_e,Te){Te.forEach(function(ye){ye in _e.prototype&&(Z.prototype[ye]=function(){return F(this[ne],ye,arguments)})})}function ie(Z,ne,_e,Te){Te.forEach(function(ye){ye in _e.prototype&&(Z.prototype[ye]=function(){return this[ne][ye].apply(this[ne],arguments)})})}function le(Z,ne,_e,Te){Te.forEach(function(ye){ye in _e.prototype&&(Z.prototype[ye]=function(){return ae(this[ne],ye,arguments)})})}function ue(Z){this._index=Z}function H(Z,ne){this._cursor=Z,this._request=ne}function G(Z){this._store=Z}function X(Z){this._tx=Z,this.complete=new Promise(function(ne,_e){Z.oncomplete=function(){ne()},Z.onerror=function(){_e(Z.error)},Z.onabort=function(){_e(Z.error)}})}function Ue(Z,ne,_e){this._db=Z,this.oldVersion=ne,this.transaction=new X(_e)}function Ce(Z){this._db=Z}re(ue,"_index",["name","keyPath","multiEntry","unique"]),ge(ue,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),le(ue,"_index",IDBIndex,["openCursor","openKeyCursor"]),re(H,"_cursor",["direction","key","primaryKey","value"]),ge(H,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Z){Z in IDBCursor.prototype&&(H.prototype[Z]=function(){var ne=this,_e=arguments;return Promise.resolve().then(function(){return ne._cursor[Z].apply(ne._cursor,_e),Q(ne._request).then(function(Te){if(Te)return new H(Te,ne._request)})})})}),G.prototype.createIndex=function(){return new ue(this._store.createIndex.apply(this._store,arguments))},G.prototype.index=function(){return new ue(this._store.index.apply(this._store,arguments))},re(G,"_store",["name","keyPath","indexNames","autoIncrement"]),ge(G,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),le(G,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ie(G,"_store",IDBObjectStore,["deleteIndex"]),X.prototype.objectStore=function(){return new G(this._tx.objectStore.apply(this._tx,arguments))},re(X,"_tx",["objectStoreNames","mode"]),ie(X,"_tx",IDBTransaction,["abort"]),Ue.prototype.createObjectStore=function(){return new G(this._db.createObjectStore.apply(this._db,arguments))},re(Ue,"_db",["name","version","objectStoreNames"]),ie(Ue,"_db",IDBDatabase,["deleteObjectStore","close"]),Ce.prototype.transaction=function(){return new X(this._db.transaction.apply(this._db,arguments))},re(Ce,"_db",["name","version","objectStoreNames"]),ie(Ce,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Z){[G,ue].forEach(function(ne){Z in ne.prototype&&(ne.prototype[Z.replace("open","iterate")]=function(){var _e=d(arguments),Te=_e[_e.length-1],ye=this._store||this._index,je=ye[Z].apply(ye,_e.slice(0,-1));je.onsuccess=function(){Te(je.result)}})})}),[ue,G].forEach(function(Z){Z.prototype.getAll||(Z.prototype.getAll=function(ne,_e){var Te=this,ye=[];return new Promise(function(je){Te.iterateCursor(ne,function(Ie){Ie?(ye.push(Ie.value),void 0===_e||ye.length!=_e?Ie.continue():je(ye)):je(ye)})})})}),P.openDb=function Oe(Z,ne,_e){var Te=F(indexedDB,"open",[Z,ne]),ye=Te.request;return ye&&(ye.onupgradeneeded=function(je){_e&&_e(new Ue(ye.result,je.oldVersion,ye.transaction))}),Te.then(function(je){return new Ce(je)})},P.deleteDb=function Ve(Z){return F(indexedDB,"deleteDatabase",[Z])},Object.defineProperty(P,"__esModule",{value:!0})}(Ee)},8306:(nt,Ee,P)=>{"use strict";P.d(Ee,{y:()=>H});var d=P(930),Q=P(727),F=P(8822),ae=P(4671);var ie=P(2416),le=P(576),ue=P(2806);let H=(()=>{class Ce{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const Z=new Ce;return Z.source=this,Z.operator=Ve,Z}subscribe(Ve,Z,ne){const _e=function Ue(Ce){return Ce&&Ce instanceof d.Lv||function X(Ce){return Ce&&(0,le.m)(Ce.next)&&(0,le.m)(Ce.error)&&(0,le.m)(Ce.complete)}(Ce)&&(0,Q.Nn)(Ce)}(Ve)?Ve:new d.Hp(Ve,Z,ne);return(0,ue.x)(()=>{const{operator:Te,source:ye}=this;_e.add(Te?Te.call(_e,ye):ye?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(Z){Ve.error(Z)}}forEach(Ve,Z){return new(Z=G(Z))((ne,_e)=>{let Te;Te=this.subscribe(ye=>{try{Ve(ye)}catch(je){_e(je),null==Te||Te.unsubscribe()}},_e,ne)})}_subscribe(Ve){var Z;return null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(Ve)}[F.L](){return this}pipe(...Ve){return function ge(Ce){return 0===Ce.length?ae.y:1===Ce.length?Ce[0]:function(Ve){return Ce.reduce((Z,ne)=>ne(Z),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=G(Ve))((Z,ne)=>{let _e;this.subscribe(Te=>_e=Te,Te=>ne(Te),()=>Z(_e))})}}return Ce.create=Oe=>new Ce(Oe),Ce})();function G(Ce){var Oe;return null!==(Oe=null!=Ce?Ce:ie.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(nt,Ee,P)=>{"use strict";P.d(Ee,{x:()=>ie});var d=P(8306),Q=P(727);const ae=(0,P(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=P(8737),ge=P(2806);let ie=(()=>{class ue extends d.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new le(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new ae}next(G){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const X=this.observers.slice();for(const Ue of X)Ue.next(G)}})}error(G){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:Ue,observers:Ce}=this;return X||Ue?Q.Lc:(Ce.push(G),new Q.w0(()=>(0,re.P)(Ce,G)))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:Ue,isStopped:Ce}=this;X?G.error(Ue):Ce&&G.complete()}asObservable(){const G=new d.y;return G.source=this,G}}return ue.create=(H,G)=>new le(H,G),ue})();class le extends ie{constructor(H,G){super(),this.destination=H,this.source=G}next(H){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,H)}error(H){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,H)}complete(){var H,G;null===(G=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===G||G.call(H)}_subscribe(H){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(H))&&void 0!==X?X:Q.Lc}}},930:(nt,Ee,P)=>{"use strict";P.d(Ee,{Hp:()=>Ue,Lv:()=>X});var d=P(576),Q=P(727),F=P(2416),ae=P(7849),re=P(5032);const ge=ue("C",void 0,void 0);function ue(ne,_e,Te){return{kind:ne,value:_e,error:Te}}var H=P(3410),G=P(2806);class X extends Q.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Q.Nn)(_e)&&_e.add(this)):this.destination=Z}static create(_e,Te,ye){return new Ue(_e,Te,ye)}next(_e){this.isStopped?Ve(function le(ne){return ue("N",ne,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Ve(function ie(ne){return ue("E",void 0,ne)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Ve(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ue extends X{constructor(_e,Te,ye){let je;if(super(),(0,d.m)(_e))je=_e;else if(_e){let Ie;({next:je,error:Te,complete:ye}=_e),this&&F.v.useDeprecatedNextContext?(Ie=Object.create(_e),Ie.unsubscribe=()=>this.unsubscribe()):Ie=_e,je=null==je?void 0:je.bind(Ie),Te=null==Te?void 0:Te.bind(Ie),ye=null==ye?void 0:ye.bind(Ie)}this.destination={next:je?Ce(je):re.Z,error:Ce(null!=Te?Te:Oe),complete:ye?Ce(ye):re.Z}}}function Ce(ne,_e){return(...Te)=>{try{ne(...Te)}catch(ye){F.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(ye):(0,ae.h)(ye)}}}function Oe(ne){throw ne}function Ve(ne,_e){const{onStoppedNotification:Te}=F.v;Te&&H.z.setTimeout(()=>Te(ne,_e))}const Z={closed:!0,next:re.Z,error:Oe,complete:re.Z}},727:(nt,Ee,P)=>{"use strict";P.d(Ee,{Lc:()=>ge,w0:()=>re,Nn:()=>ie});var d=P(576);const F=(0,P(3888).d)(ue=>function(G){ue(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,Ue)=>`${Ue+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ae=P(8737);class re{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Ce of G)Ce.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,d.m)(X))try{X()}catch(Ce){H=Ce instanceof F?Ce.errors:[Ce]}const{_teardowns:Ue}=this;if(Ue){this._teardowns=null;for(const Ce of Ue)try{le(Ce)}catch(Oe){H=null!=H?H:[],Oe instanceof F?H=[...H,...Oe.errors]:H.push(Oe)}}if(H)throw new F(H)}}add(H){var G;if(H&&H!==this)if(this.closed)le(H);else{if(H instanceof re){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._teardowns=null!==(G=this._teardowns)&&void 0!==G?G:[]).push(H)}}_hasParent(H){const{_parentage:G}=this;return G===H||Array.isArray(G)&&G.includes(H)}_addParent(H){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(H),G):G?[G,H]:H}_removeParent(H){const{_parentage:G}=this;G===H?this._parentage=null:Array.isArray(G)&&(0,ae.P)(G,H)}remove(H){const{_teardowns:G}=this;G&&(0,ae.P)(G,H),H instanceof re&&H._removeParent(this)}}re.EMPTY=(()=>{const ue=new re;return ue.closed=!0,ue})();const ge=re.EMPTY;function ie(ue){return ue instanceof re||ue&&"closed"in ue&&(0,d.m)(ue.remove)&&(0,d.m)(ue.add)&&(0,d.m)(ue.unsubscribe)}function le(ue){(0,d.m)(ue)?ue():ue.unsubscribe()}},2416:(nt,Ee,P)=>{"use strict";P.d(Ee,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,Ee,P)=>{"use strict";P.d(Ee,{E:()=>Q});const Q=new(P(8306).y)(re=>re.complete())},8996:(nt,Ee,P)=>{"use strict";P.d(Ee,{D:()=>je});var d=P(8421),Q=P(5363),F=P(9468),ge=P(8306),le=P(2202),ue=P(576),H=P(9672);function X(Ie,Je){if(!Ie)throw new Error("Iterable cannot be null");return new ge.y(Ze=>{(0,H.f)(Ze,Je,()=>{const pt=Ie[Symbol.asyncIterator]();(0,H.f)(Ze,Je,()=>{pt.next().then(J=>{J.done?Ze.complete():Ze.next(J.value)})},0,!0)})})}var Ue=P(3670),Ce=P(8239),Oe=P(1144),Ve=P(6495),Z=P(2206),ne=P(4532),_e=P(3260);function je(Ie,Je){return Je?function ye(Ie,Je){if(null!=Ie){if((0,Ue.c)(Ie))return function ae(Ie,Je){return(0,d.Xf)(Ie).pipe((0,F.R)(Je),(0,Q.Q)(Je))}(Ie,Je);if((0,Oe.z)(Ie))return function ie(Ie,Je){return new ge.y(Ze=>{let pt=0;return Je.schedule(function(){pt===Ie.length?Ze.complete():(Ze.next(Ie[pt++]),Ze.closed||this.schedule())})})}(Ie,Je);if((0,Ce.t)(Ie))return function re(Ie,Je){return(0,d.Xf)(Ie).pipe((0,F.R)(Je),(0,Q.Q)(Je))}(Ie,Je);if((0,Z.D)(Ie))return X(Ie,Je);if((0,Ve.T)(Ie))return function G(Ie,Je){return new ge.y(Ze=>{let pt;return(0,H.f)(Ze,Je,()=>{pt=Ie[le.h](),(0,H.f)(Ze,Je,()=>{let J,me;try{({value:J,done:me}=pt.next())}catch(be){return void Ze.error(be)}me?Ze.complete():Ze.next(J)},0,!0)}),()=>(0,ue.m)(null==pt?void 0:pt.return)&&pt.return()})}(Ie,Je);if((0,_e.L)(Ie))return function Te(Ie,Je){return X((0,_e.Q)(Ie),Je)}(Ie,Je)}throw(0,ne.z)(Ie)}(Ie,Je):(0,d.Xf)(Ie)}},8421:(nt,Ee,P)=>{"use strict";P.d(Ee,{Xf:()=>Ue});var d=P(5987),Q=P(1144),F=P(8239),ae=P(8306),re=P(3670),ge=P(2206),ie=P(4532),le=P(6495),ue=P(3260),H=P(576),G=P(7849),X=P(8822);function Ue(ye){if(ye instanceof ae.y)return ye;if(null!=ye){if((0,re.c)(ye))return function Ce(ye){return new ae.y(je=>{const Ie=ye[X.L]();if((0,H.m)(Ie.subscribe))return Ie.subscribe(je);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ye);if((0,Q.z)(ye))return function Oe(ye){return new ae.y(je=>{for(let Ie=0;Ie<ye.length&&!je.closed;Ie++)je.next(ye[Ie]);je.complete()})}(ye);if((0,F.t)(ye))return function Ve(ye){return new ae.y(je=>{ye.then(Ie=>{je.closed||(je.next(Ie),je.complete())},Ie=>je.error(Ie)).then(null,G.h)})}(ye);if((0,ge.D)(ye))return ne(ye);if((0,le.T)(ye))return function Z(ye){return new ae.y(je=>{for(const Ie of ye)if(je.next(Ie),je.closed)return;je.complete()})}(ye);if((0,ue.L)(ye))return function _e(ye){return ne((0,ue.Q)(ye))}(ye)}throw(0,ie.z)(ye)}function ne(ye){return new ae.y(je=>{(function Te(ye,je){var Ie,Je,Ze,pt;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,d.KL)(ye);!(Je=yield Ie.next()).done;)if(je.next(Je.value),je.closed)return}catch(J){Ze={error:J}}finally{try{Je&&!Je.done&&(pt=Ie.return)&&(yield pt.call(Ie))}finally{if(Ze)throw Ze.error}}je.complete()})})(ye,je).catch(Ie=>je.error(Ie))})}},6451:(nt,Ee,P)=>{"use strict";P.d(Ee,{T:()=>ge});var d=P(8189),Q=P(8421),F=P(515),ae=P(3269),re=P(8996);function ge(...ie){const le=(0,ae.yG)(ie),ue=(0,ae._6)(ie,1/0),H=ie;return H.length?1===H.length?(0,Q.Xf)(H[0]):(0,d.J)(ue)((0,re.D)(H,le)):F.E}},5403:(nt,Ee,P)=>{"use strict";P.d(Ee,{Q:()=>Q});var d=P(930);class Q extends d.Lv{constructor(ae,re,ge,ie,le){super(ae),this.onFinalize=le,this._next=re?function(ue){try{re(ue)}catch(H){ae.error(H)}}:super._next,this._error=ie?function(ue){try{ie(ue)}catch(H){ae.error(H)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(ue){ae.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;const{closed:re}=this;super.unsubscribe(),!re&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}},4004:(nt,Ee,P)=>{"use strict";P.d(Ee,{U:()=>F});var d=P(4482),Q=P(5403);function F(ae,re){return(0,d.e)((ge,ie)=>{let le=0;ge.subscribe(new Q.Q(ie,ue=>{ie.next(ae.call(re,ue,le++))}))})}},8189:(nt,Ee,P)=>{"use strict";P.d(Ee,{J:()=>F});var d=P(5577),Q=P(4671);function F(ae=1/0){return(0,d.z)(Q.y,ae)}},5577:(nt,Ee,P)=>{"use strict";P.d(Ee,{z:()=>le});var d=P(4004),Q=P(8421),F=P(4482),ae=P(9672),re=P(5403),ie=P(576);function le(ue,H,G=1/0){return(0,ie.m)(H)?le((X,Ue)=>(0,d.U)((Ce,Oe)=>H(X,Ce,Ue,Oe))((0,Q.Xf)(ue(X,Ue))),G):("number"==typeof H&&(G=H),(0,F.e)((X,Ue)=>function ge(ue,H,G,X,Ue,Ce,Oe,Ve){const Z=[];let ne=0,_e=0,Te=!1;const ye=()=>{Te&&!Z.length&&!ne&&H.complete()},je=Je=>ne<X?Ie(Je):Z.push(Je),Ie=Je=>{Ce&&H.next(Je),ne++;let Ze=!1;(0,Q.Xf)(G(Je,_e++)).subscribe(new re.Q(H,pt=>{null==Ue||Ue(pt),Ce?je(pt):H.next(pt)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(ne--;Z.length&&ne<X;){const pt=Z.shift();Oe?(0,ae.f)(H,Oe,()=>Ie(pt)):Ie(pt)}ye()}catch(pt){H.error(pt)}}))};return ue.subscribe(new re.Q(H,je,()=>{Te=!0,ye()})),()=>{null==Ve||Ve()}}(X,Ue,ue,G)))}},5363:(nt,Ee,P)=>{"use strict";P.d(Ee,{Q:()=>ae});var d=P(9672),Q=P(4482),F=P(5403);function ae(re,ge=0){return(0,Q.e)((ie,le)=>{ie.subscribe(new F.Q(le,ue=>(0,d.f)(le,re,()=>le.next(ue),ge),()=>(0,d.f)(le,re,()=>le.complete(),ge),ue=>(0,d.f)(le,re,()=>le.error(ue),ge)))})}},3099:(nt,Ee,P)=>{"use strict";P.d(Ee,{B:()=>ge});var d=P(8996),Q=P(5698),F=P(7579),ae=P(930),re=P(4482);function ge(le={}){const{connector:ue=(()=>new F.x),resetOnError:H=!0,resetOnComplete:G=!0,resetOnRefCountZero:X=!0}=le;return Ue=>{let Ce=null,Oe=null,Ve=null,Z=0,ne=!1,_e=!1;const Te=()=>{null==Oe||Oe.unsubscribe(),Oe=null},ye=()=>{Te(),Ce=Ve=null,ne=_e=!1},je=()=>{const Ie=Ce;ye(),null==Ie||Ie.unsubscribe()};return(0,re.e)((Ie,Je)=>{Z++,!_e&&!ne&&Te();const Ze=Ve=null!=Ve?Ve:ue();Je.add(()=>{Z--,0===Z&&!_e&&!ne&&(Oe=ie(je,X))}),Ze.subscribe(Je),Ce||(Ce=new ae.Hp({next:pt=>Ze.next(pt),error:pt=>{_e=!0,Te(),Oe=ie(ye,H,pt),Ze.error(pt)},complete:()=>{ne=!0,Te(),Oe=ie(ye,G),Ze.complete()}}),(0,d.D)(Ie).subscribe(Ce))})(Ue)}}function ie(le,ue,...H){return!0===ue?(le(),null):!1===ue?null:ue(...H).pipe((0,Q.q)(1)).subscribe(()=>le())}},9468:(nt,Ee,P)=>{"use strict";P.d(Ee,{R:()=>Q});var d=P(4482);function Q(F,ae=0){return(0,d.e)((re,ge)=>{ge.add(F.schedule(()=>re.subscribe(ge),ae))})}},5698:(nt,Ee,P)=>{"use strict";P.d(Ee,{q:()=>ae});var d=P(515),Q=P(4482),F=P(5403);function ae(re){return re<=0?()=>d.E:(0,Q.e)((ge,ie)=>{let le=0;ge.subscribe(new F.Q(ie,ue=>{++le<=re&&(ie.next(ue),re<=le&&ie.complete())}))})}},8505:(nt,Ee,P)=>{"use strict";P.d(Ee,{b:()=>re});var d=P(576),Q=P(4482),F=P(5403),ae=P(4671);function re(ge,ie,le){const ue=(0,d.m)(ge)||ie||le?{next:ge,error:ie,complete:le}:ge;return ue?(0,Q.e)((H,G)=>{var X;null===(X=ue.subscribe)||void 0===X||X.call(ue);let Ue=!0;H.subscribe(new F.Q(G,Ce=>{var Oe;null===(Oe=ue.next)||void 0===Oe||Oe.call(ue,Ce),G.next(Ce)},()=>{var Ce;Ue=!1,null===(Ce=ue.complete)||void 0===Ce||Ce.call(ue),G.complete()},Ce=>{var Oe;Ue=!1,null===(Oe=ue.error)||void 0===Oe||Oe.call(ue,Ce),G.error(Ce)},()=>{var Ce,Oe;Ue&&(null===(Ce=ue.unsubscribe)||void 0===Ce||Ce.call(ue)),null===(Oe=ue.finalize)||void 0===Oe||Oe.call(ue)}))}):ae.y}},4408:(nt,Ee,P)=>{"use strict";P.d(Ee,{o:()=>re});var d=P(727);class Q extends d.w0{constructor(ie,le){super()}schedule(ie,le=0){return this}}const F={setInterval(...ge){const{delegate:ie}=F;return((null==ie?void 0:ie.setInterval)||setInterval)(...ge)},clearInterval(ge){const{delegate:ie}=F;return((null==ie?void 0:ie.clearInterval)||clearInterval)(ge)},delegate:void 0};var ae=P(8737);class re extends Q{constructor(ie,le){super(ie,le),this.scheduler=ie,this.work=le,this.pending=!1}schedule(ie,le=0){if(this.closed)return this;this.state=ie;const ue=this.id,H=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(H,ue,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(H,this.id,le),this}requestAsyncId(ie,le,ue=0){return F.setInterval(ie.flush.bind(ie,this),ue)}recycleAsyncId(ie,le,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return le;F.clearInterval(le)}execute(ie,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(ie,le);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,le){let H,ue=!1;try{this.work(ie)}catch(G){ue=!0,H=G||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ie,scheduler:le}=this,{actions:ue}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ue,this),null!=ie&&(this.id=this.recycleAsyncId(le,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,Ee,P)=>{"use strict";P.d(Ee,{v:()=>F});var d=P(6063);class Q{constructor(re,ge=Q.now){this.schedulerActionCtor=re,this.now=ge}schedule(re,ge=0,ie){return new this.schedulerActionCtor(this,re).schedule(ie,ge)}}Q.now=d.l.now;class F extends Q{constructor(re,ge=Q.now){super(re,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:ge}=this;if(this._active)return void ge.push(re);let ie;this._active=!0;do{if(ie=re.execute(re.state,re.delay))break}while(re=ge.shift());if(this._active=!1,ie){for(;re=ge.shift();)re.unsubscribe();throw ie}}}},4986:(nt,Ee,P)=>{"use strict";P.d(Ee,{z:()=>F,P:()=>ae});var d=P(4408);const F=new(P(7565).v)(d.o),ae=F},6063:(nt,Ee,P)=>{"use strict";P.d(Ee,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(nt,Ee,P)=>{"use strict";P.d(Ee,{z:()=>d});const d={setTimeout(...Q){const{delegate:F}=d;return((null==F?void 0:F.setTimeout)||setTimeout)(...Q)},clearTimeout(Q){const{delegate:F}=d;return((null==F?void 0:F.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(nt,Ee,P)=>{"use strict";P.d(Ee,{h:()=>Q});const Q=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,Ee,P)=>{"use strict";P.d(Ee,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(nt,Ee,P)=>{"use strict";P.d(Ee,{jO:()=>ae,yG:()=>re,_6:()=>ge});var d=P(576),Q=P(3532);function F(ie){return ie[ie.length-1]}function ae(ie){return(0,d.m)(F(ie))?ie.pop():void 0}function re(ie){return(0,Q.K)(F(ie))?ie.pop():void 0}function ge(ie,le){return"number"==typeof F(ie)?ie.pop():le}},8737:(nt,Ee,P)=>{"use strict";function d(Q,F){if(Q){const ae=Q.indexOf(F);0<=ae&&Q.splice(ae,1)}}P.d(Ee,{P:()=>d})},3888:(nt,Ee,P)=>{"use strict";function d(Q){const ae=Q(re=>{Error.call(re),re.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}P.d(Ee,{d:()=>d})},2806:(nt,Ee,P)=>{"use strict";P.d(Ee,{x:()=>F,O:()=>ae});var d=P(2416);let Q=null;function F(re){if(d.v.useDeprecatedSynchronousErrorHandling){const ge=!Q;if(ge&&(Q={errorThrown:!1,error:null}),re(),ge){const{errorThrown:ie,error:le}=Q;if(Q=null,ie)throw le}}else re()}function ae(re){d.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=re)}},9672:(nt,Ee,P)=>{"use strict";function d(Q,F,ae,re=0,ge=!1){const ie=F.schedule(function(){ae(),ge?Q.add(this.schedule(null,re)):this.unsubscribe()},re);if(Q.add(ie),!ge)return ie}P.d(Ee,{f:()=>d})},4671:(nt,Ee,P)=>{"use strict";function d(Q){return Q}P.d(Ee,{y:()=>d})},1144:(nt,Ee,P)=>{"use strict";P.d(Ee,{z:()=>d});const d=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(nt,Ee,P)=>{"use strict";P.d(Ee,{D:()=>Q});var d=P(576);function Q(F){return Symbol.asyncIterator&&(0,d.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(nt,Ee,P)=>{"use strict";function d(Q){return"function"==typeof Q}P.d(Ee,{m:()=>d})},3670:(nt,Ee,P)=>{"use strict";P.d(Ee,{c:()=>F});var d=P(8822),Q=P(576);function F(ae){return(0,Q.m)(ae[d.L])}},6495:(nt,Ee,P)=>{"use strict";P.d(Ee,{T:()=>F});var d=P(2202),Q=P(576);function F(ae){return(0,Q.m)(null==ae?void 0:ae[d.h])}},8239:(nt,Ee,P)=>{"use strict";P.d(Ee,{t:()=>Q});var d=P(576);function Q(F){return(0,d.m)(null==F?void 0:F.then)}},3260:(nt,Ee,P)=>{"use strict";P.d(Ee,{Q:()=>F,L:()=>ae});var d=P(5987),Q=P(576);function F(re){return(0,d.FC)(this,arguments,function*(){const ie=re.getReader();try{for(;;){const{value:le,done:ue}=yield(0,d.qq)(ie.read());if(ue)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(le)}}finally{ie.releaseLock()}})}function ae(re){return(0,Q.m)(null==re?void 0:re.getReader)}},3532:(nt,Ee,P)=>{"use strict";P.d(Ee,{K:()=>Q});var d=P(576);function Q(F){return F&&(0,d.m)(F.schedule)}},4482:(nt,Ee,P)=>{"use strict";P.d(Ee,{A:()=>Q,e:()=>F});var d=P(576);function Q(ae){return(0,d.m)(null==ae?void 0:ae.lift)}function F(ae){return re=>{if(Q(re))return re.lift(function(ge){try{return ae(ge,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(nt,Ee,P)=>{"use strict";function d(){}P.d(Ee,{Z:()=>d})},7849:(nt,Ee,P)=>{"use strict";P.d(Ee,{h:()=>F});var d=P(2416),Q=P(3410);function F(ae){Q.z.setTimeout(()=>{const{onUnhandledError:re}=d.v;if(!re)throw ae;re(ae)})}},4532:(nt,Ee,P)=>{"use strict";function d(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ee,{z:()=>d})},5987:(nt,Ee,P)=>{"use strict";function le(J,me,be,De){return new(be||(be=Promise))(function(he,It){function Ut(rt){try{ot(De.next(rt))}catch(Fr){It(Fr)}}function Kn(rt){try{ot(De.throw(rt))}catch(Fr){It(Fr)}}function ot(rt){rt.done?he(rt.value):function ke(he){return he instanceof be?he:new be(function(It){It(he)})}(rt.value).then(Ut,Kn)}ot((De=De.apply(J,me||[])).next())})}function Z(J){return this instanceof Z?(this.v=J,this):new Z(J)}function ne(J,me,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,De=be.apply(J,me||[]),he=[];return ke={},It("next"),It("throw"),It("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function It(ln){De[ln]&&(ke[ln]=function(Sr){return new Promise(function(Qt,ki){he.push([ln,Sr,Qt,ki])>1||Ut(ln,Sr)})})}function Ut(ln,Sr){try{!function Kn(ln){ln.value instanceof Z?Promise.resolve(ln.value.v).then(ot,rt):Fr(he[0][2],ln)}(De[ln](Sr))}catch(Qt){Fr(he[0][3],Qt)}}function ot(ln){Ut("next",ln)}function rt(ln){Ut("throw",ln)}function Fr(ln,Sr){ln(Sr),he.shift(),he.length&&Ut(he[0][0],he[0][1])}}function Te(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,me=J[Symbol.asyncIterator];return me?me.call(J):(J=function X(J){var me="function"==typeof Symbol&&Symbol.iterator,be=me&&J[me],De=0;if(be)return be.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&De>=J.length&&(J=void 0),{value:J&&J[De++],done:!J}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),be={},De("next"),De("throw"),De("return"),be[Symbol.asyncIterator]=function(){return this},be);function De(he){be[he]=J[he]&&function(It){return new Promise(function(Ut,Kn){!function ke(he,It,Ut,Kn){Promise.resolve(Kn).then(function(ot){he({value:ot,done:Ut})},It)}(Ut,Kn,(It=J[he](It)).done,It.value)})}}}P.d(Ee,{mG:()=>le,qq:()=>Z,FC:()=>ne,KL:()=>Te})},5e3:(nt,Ee,P)=>{"use strict";P.d(Ee,{deG:()=>Nn,tb:()=>Le,AFp:()=>ab,ip1:()=>Bh,CZH:()=>Uh,hGG:()=>uC,z2F:()=>Il,sBO:()=>fb,Sil:()=>Me,_Vd:()=>Yc,EJc:()=>lt,SBq:()=>Qc,qLn:()=>Go,vpe:()=>Qr,tBr:()=>ir,XFs:()=>Xe,OlP:()=>on,zs3:()=>Zi,ZZ4:()=>Kh,aQg:()=>og,soG:()=>Hh,YKP:()=>N0,h0i:()=>Cr,PXZ:()=>_i,R0b:()=>Gs,FiY:()=>vn,Lbi:()=>zE,g9A:()=>U_,Qsj:()=>I0,FYo:()=>Up,JOm:()=>hr,tp0:()=>fs,Rgc:()=>Mu,dDg:()=>rd,q4F:()=>A0,GfV:()=>Ah,s_b:()=>T_,ifc:()=>At,eFA:()=>QE,G48:()=>tg,Gpc:()=>G,X6Q:()=>ka,_c5:()=>qI,VLi:()=>Mt,c2e:()=>Gh,zSh:()=>lh,wAp:()=>yt,vHH:()=>Oe,cg1:()=>e_,kL8:()=>Ch,dqk:()=>gt,sIi:()=>mp,CqO:()=>Si,QGY:()=>jv,F4k:()=>RD,RDi:()=>Id,AaK:()=>le,qOj:()=>Rv,TTD:()=>Ha,_Bn:()=>Bp,xp6:()=>ep,uIk:()=>xv,Tol:()=>Tp,ekj:()=>Hm,Suo:()=>q0,Xpm:()=>Yn,lG2:()=>Ol,Yz7:()=>Qt,cJS:()=>ns,oAB:()=>Qs,Yjl:()=>Co,Y36:()=>Pm,_UZ:()=>Fm,qZA:()=>wh,TgZ:()=>js,EpF:()=>MD,n5z:()=>Pn,Ikx:()=>Sp,SDv:()=>f_,QtT:()=>bE,pQV:()=>p_,LFG:()=>K,$8M:()=>ga,$Z:()=>Lv,NdJ:()=>Dh,CRH:()=>z0,oxw:()=>Vm,Hsn:()=>xD,F$t:()=>OD,Q6J:()=>Vv,s9C:()=>Hv,MGl:()=>Bm,VKq:()=>$p,WLB:()=>Nh,kEZ:()=>P0,iGM:()=>M_,MAs:()=>bD,CHM:()=>Ll,LSH:()=>uu,Udp:()=>Cp,YNc:()=>vD,W1O:()=>Fh,_uU:()=>t0,hij:()=>Ip,Gf:()=>R_});var d=P(7579),Q=P(727),F=P(8306),ae=P(6451),re=P(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function ie(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ue(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=ge({__forward_ref__:ge});function G(s){return s.__forward_ref__=G,s.toString=function(){return le(this())},s}function X(s){return Ue(s)?s():s}function Ue(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===G}class Oe extends Error{constructor(o,l){super(function Ve(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function Z(s){return"string"==typeof s?s:null==s?"":String(s)}function ne(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Z(s)}function je(s,o){const l=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${ne(s)} found${l}`)}function rt(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}function Qt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function ns(s){return{providers:s.providers||[],imports:s.imports||[]}}function Rn(s){return Pi(s,ti)||Pi(s,Ae)}function Pi(s,o){return s.hasOwnProperty(o)?s[o]:null}function Do(s){return s&&(s.hasOwnProperty(Is)||s.hasOwnProperty(_r))?s[Is]:null}const ti=ge({\u0275prov:ge}),Is=ge({\u0275inj:ge}),Ae=ge({ngInjectableDef:ge}),_r=ge({ngInjectorDef:ge});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let wi;function Zn(s){const o=wi;return wi=s,o}function Ys(s,o,l){const c=Rn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&Xe.Optional?null:void 0!==o?o:void je(le(s),"Injector")}function tt(s){return{toString:s}.toString()}var St=(()=>((St=St||{})[St.OnPush=0]="OnPush",St[St.Default=1]="Default",St))(),At=(()=>{return(s=At||(At={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",At;var s})();const et="undefined"!=typeof globalThis&&globalThis,ut="undefined"!=typeof window&&window,$u="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,gt=et||"undefined"!=typeof global&&global||ut||$u,Ss={},j=[],W=ge({\u0275cmp:ge}),q=ge({\u0275dir:ge}),we=ge({\u0275pipe:ge}),te=ge({\u0275mod:ge}),He=ge({\u0275fac:ge}),_t=ge({__NG_ELEMENT_ID__:ge});let pn=0;function Yn(s){return tt(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===St.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||j,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||At.Emulated,id:"c",styles:s.styles||j,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,m=s.features,v=s.pipes;return c.id+=pn++,c.inputs=Xo(s.inputs,l),c.outputs=Xo(s.outputs),m&&m.forEach(D=>D(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(Br):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(Ft):null,c})}function Br(s){return ar(s)||function Qn(s){return s[q]||null}(s)}function Ft(s){return function rs(s){return s[we]||null}(s)}const yr={};function Qs(s){return tt(()=>{const o={type:s.type,bootstrap:s.bootstrap||j,declarations:s.declarations||j,imports:s.imports||j,exports:s.exports||j,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(yr[s.id]=s.type),o})}function Xo(s,o){if(null==s)return Ss;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),l[h]=c,o&&(o[h]=m)}return l}const Ol=Yn;function Co(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function ar(s){return s[W]||null}function lr(s,o){const l=s[te]||null;if(!l&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return l}function Vi(s){return Array.isArray(s)&&"object"==typeof s[1]}function Bi(s){return Array.isArray(s)&&!0===s[1]}function gd(s){return 0!=(8&s.flags)}function Bn(s){return 2==(2&s.flags)}function As(s){return 1==(1&s.flags)}function os(s){return null!==s.template}function md(s){return 0!=(512&s[2])}function Ao(s,o){return s.hasOwnProperty(He)?s[He]:null}class kl{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ha(){return No}function No(s){return s.type.prototype.ngOnChanges&&(s.setInput=Xs),$a}function $a(){const s=Cd(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===Ss)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Xs(s,o,l,c){const h=Cd(s)||function Nr(s,o){return s[vr]=o}(s,{previous:Ss,current:null}),m=h.current||(h.current={}),v=h.previous,D=this.declaredInputs[l],E=v[D];m[D]=new kl(E&&E.currentValue,o,v===Ss),s[c]=o}Ha.ngInherit=!0;const vr="__ngSimpleChanges__";function Cd(s){return s[vr]||null}let Pl;function Id(s){Pl=s}function Qu(){return void 0!==Pl?Pl:"undefined"!=typeof document?document:void 0}function Jt(s){return!!s.listen}const eo={createRenderer:(s,o)=>Qu()};function cn(s){for(;Array.isArray(s);)s=s[0];return s}function er(s,o){return cn(o[s])}function Un(s,o){return cn(o[s.index])}function sa(s,o){return s.data[o]}function Gr(s,o){const l=o[s];return Vi(l)?l:l[0]}function tr(s){return 4==(4&s[2])}function ls(s){return 128==(128&s[2])}function Hr(s,o){return null==o?null:s[o]}function to(s){s[18]=0}function oa(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const mt={lFrame:Xa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function la(){return mt.bindingsEnabled}function Se(){return mt.lFrame.lView}function Ot(){return mt.lFrame.tView}function Ll(s){return mt.lFrame.contextLView=s,s[8]}function dn(){let s=Mo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Mo(){return mt.lFrame.currentTNode}function no(){const s=mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function ri(s,o){const l=mt.lFrame;l.currentTNode=s,l.isParent=o}function Ms(){return mt.lFrame.isParent}function Vl(){mt.lFrame.isParent=!1}function ua(){return mt.isInCheckNoChangesMode}function Ka(s){mt.isInCheckNoChangesMode=s}function nr(){const s=mt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Rs(){return mt.lFrame.bindingIndex++}function Hi(s){const o=mt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function ca(s){mt.lFrame.inI18n=s}function Gl(s,o){const l=mt.lFrame;l.bindingIndex=l.bindingRootIndex=s,da(o)}function da(s){mt.lFrame.currentDirectiveIndex=s}function Qa(){return mt.lFrame.currentQueryIndex}function Ja(s){mt.lFrame.currentQueryIndex=s}function ec(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function tc(s,o,l){if(l&Xe.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||l&Xe.Host||(h=ec(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const c=mt.lFrame=Md();return c.currentTNode=o,c.lView=s,!0}function ha(s){const o=Md(),l=s[1];mt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Md(){const s=mt.lFrame,o=null===s?null:s.child;return null===o?Xa(s):o}function Xa(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function nc(){const s=mt.lFrame;return mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const el=nc;function Hl(){const s=nc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function dr(){return mt.lFrame.selectedIndex}function jn(s){mt.lFrame.selectedIndex=s}function Cn(){const s=mt.lFrame;return sa(s.tView,s.selectedIndex)}function ic(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:D,ngAfterViewInit:E,ngAfterViewChecked:N,ngOnDestroy:R}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),D&&((s.contentHooks||(s.contentHooks=[])).push(l,D),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,D)),E&&(s.viewHooks||(s.viewHooks=[])).push(-l,E),N&&((s.viewHooks||(s.viewHooks=[])).push(l,N),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,N)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(l,R)}}function ro(s,o,l){Tf(s,o,3,l)}function $l(s,o,l,c){(3&s[2])===l&&Tf(s,o,l,c)}function Wl(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Tf(s,o,l,c){const m=null!=c?c:-1,v=o.length-1;let D=0;for(let E=void 0!==c?65535&s[18]:0;E<v;E++)if("number"==typeof o[E+1]){if(D=o[E],null!=c&&D>=c)break}else o[E]<0&&(s[18]+=65536),(D<m||-1==m)&&(xd(s,l,o,E),s[18]=(4294901760&s[18])+E+2),E++}function xd(s,o,l,c){const h=l[c]<0,m=l[c+1],D=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(D)}finally{}}}else try{m.call(D)}finally{}}class Tn{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function sc(s,o,l){const c=Jt(s);let h=0;for(;h<l.length;){const m=l[h];if("number"==typeof m){if(0!==m)break;h++;const v=l[h++],D=l[h++],E=l[h++];c?s.setAttribute(o,D,E,v):o.setAttributeNS(v,D,E)}else{const v=m,D=l[++h];fa(v)?c&&s.setProperty(o,v,D):c?s.setAttribute(o,v,D):o.setAttribute(v,D),h++}}return h}function br(s){return 3===s||4===s||6===s}function fa(s){return 64===s.charCodeAt(0)}function Lt(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||io(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function io(s,o,l,c,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const D=s[m++];if("number"==typeof D){if(D===o){v=-1;break}if(D>o){v=m-1;break}}}for(;m<s.length;){const D=s[m];if("number"==typeof D)break;if(D===l){if(null===c)return void(null!==h&&(s[m+1]=h));if(c===s[m+1])return void(s[m+2]=h)}m++,null!==c&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,l),null!==c&&s.splice(m++,0,c),null!==h&&s.splice(m++,0,h)}function In(s){return-1!==s}function at(s){return 32767&s}function it(s,o){let l=function oc(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let ac=!0;function $r(s){const o=ac;return ac=s,o}let lc=0;function us(s,o){const l=il(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Oo(c.data,s),Oo(o,null),Oo(c.blueprint,null));const h=$i(s,o),m=s.injectorIndex;if(In(h)){const v=at(h),D=it(h,o),E=D[1].data;for(let N=0;N<8;N++)o[m+N]=D[v+N]|E[v+N]}return o[m+8]=h,m}function Oo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function il(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function $i(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){const m=h[1],v=m.type;if(c=2===v?m.declTNode:1===v?h[6]:null,null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function xo(s,o,l){!function Ro(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(_t)&&(c=l[_t]),null==c&&(c=l[_t]=lc++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function en(s,o,l){if(l&Xe.Optional)return s;je(o,"NodeInjector")}function xs(s,o,l,c){if(l&Xe.Optional&&void 0===c&&(c=null),0==(l&(Xe.Self|Xe.Host))){const h=s[9],m=Zn(void 0);try{return h?h.get(o,c,l&Xe.Optional):Ys(o,c,l&Xe.Optional)}finally{Zn(m)}}return en(c,o,l)}function zl(s,o,l,c=Xe.Default,h){if(null!==s){const m=function Kl(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(_t)?s[_t]:void 0;return"number"==typeof o?o>=0?255&o:fe:o}(l);if("function"==typeof m){if(!tc(o,s,c))return c&Xe.Host?en(h,l,c):xs(o,l,c,h);try{const v=m(c);if(null!=v||c&Xe.Optional)return v;je(l)}finally{el()}}else if("number"==typeof m){let v=null,D=il(s,o),E=-1,N=c&Xe.Host?o[16][6]:null;for((-1===D||c&Xe.SkipSelf)&&(E=-1===D?$i(s,o):o[D+8],-1!==E&&so(c,!1)?(v=o[1],D=at(E),o=it(E,o)):D=-1);-1!==D;){const R=o[1];if(Fd(m,D,R.data)){const L=Mr(D,o,l,v,c,N);if(L!==Wi)return L}E=o[D+8],-1!==E&&so(c,o[1].data[D+8]===N)&&Fd(m,D,o)?(v=R,D=at(E),o=it(E,o)):D=-1}}}return xs(o,l,c,h)}const Wi={};function fe(){return new ko(dn(),Se())}function Mr(s,o,l,c,h,m){const v=o[1],D=v.data[s+8],R=k(D,v,l,null==c?Bn(D)&&ac:c!=v&&0!=(3&D.type),h&Xe.Host&&m===D);return null!==R?hn(o,v,R,D):Wi}function k(s,o,l,c,h){const m=s.providerIndexes,v=o.data,D=1048575&m,E=s.directiveStart,R=m>>20,$=h?D+R:s.directiveEnd;for(let Y=c?D:D+R;Y<$;Y++){const pe=v[Y];if(Y<E&&l===pe||Y>=E&&pe.type===l)return Y}if(h){const Y=v[E];if(Y&&os(Y)&&Y.type===l)return E}return null}function hn(s,o,l,c){let h=s[l];const m=o.data;if(function If(s){return s instanceof Tn}(h)){const v=h;v.resolving&&function _e(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${l}`)}(ne(m[l]));const D=$r(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?Zn(v.injectImpl):null;tc(s,c,Xe.Default);try{h=s[l]=v.factory(void 0,m,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Cf(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(c){const v=No(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==E&&Zn(E),$r(D),v.resolving=!1,el()}}return h}function Fd(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function so(s,o){return!(s&Xe.Self||s&Xe.Host&&o)}class ko{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return zl(this._tNode,this._lView,o,c,l)}}function Pn(s){return tt(()=>{const o=s.prototype.constructor,l=o[He]||sl(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const m=h[He]||sl(h);if(m&&m!==l)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function sl(s){return Ue(s)?()=>{const o=sl(X(s));return o&&o()}:Ao(s)}function ga(s){return function pa(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const m=l[h];if(br(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(m===o)return l[h+1];h+=2}}}return null}(dn(),s)}const cs="__parameters__";function ds(s,o,l){return tt(()=>{const c=function Po(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...m){if(this instanceof h)return c.apply(this,m),this;const v=new h(...m);return D.annotation=v,D;function D(E,N,R){const L=E.hasOwnProperty(cs)?E[cs]:Object.defineProperty(E,cs,{value:[]})[cs];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(v),E}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class on{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Qt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nn=new on("AnalyzeForEntryComponents");function si(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),si(c,o)):o!==s&&o.push(c)}return o}function nn(s,o){s.forEach(l=>Array.isArray(l)?nn(l,o):o(l))}function hc(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function al(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function _a(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}function wr(s,o,l){let c=ao(s,o);return c>=0?s[1|c]=l:(c=~c,function ya(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function Ls(s,o){const l=ao(s,o);if(l>=0)return s[1|l]}function ao(s,o){return function ll(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const m=c+(h-c>>1),v=s[m<<l];if(o===v)return m<<l;v>o?h=m:c=m+1}return~(h<<l)}(s,o,1)}const qr={},mc="__NG_DI_FLAG__",Vo="ngTempTokenPath",Xl=/\n/gm,dl="__source",C=ge({provide:String,useValue:ge});let I;function O(s){const o=I;return I=s,o}function B(s,o=Xe.Default){if(void 0===I)throw new Oe(203,"");return null===I?Ys(s,void 0,o):I.get(s,o&Xe.Optional?null:void 0,o)}function K(s,o=Xe.Default){return(function qt(){return wi}()||B)(X(s),o)}function Ye(s){const o=[];for(let l=0;l<s.length;l++){const c=X(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Oe(900,"");let h,m=Xe.Default;for(let v=0;v<c.length;v++){const D=c[v],E=Bt(D);"number"==typeof E?-1===E?h=D.token:m|=E:h=D}o.push(K(h,m))}else o.push(K(c))}return o}function qe(s,o){return s[mc]=o,s.prototype[mc]=o,s}function Bt(s){return s[mc]}const ir=qe(ds("Inject",s=>({token:s})),-1),vn=qe(ds("Optional"),8),fs=qe(ds("SkipSelf"),4);let yc;function fl(s){var o;return(null===(o=function vc(){if(void 0===yc&&(yc=null,gt.trustedTypes))try{yc=gt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return yc}())||void 0===o?void 0:o.createHTML(s))||s}class qd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function bt(s){return s instanceof qd?s.changingThisBreaksApplicationSecurity:s}class ai{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(fl(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class ky{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=fl(o),l;const c=this.inertDocument.createElement("body");return c.innerHTML=fl(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const v=l.item(h).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const ps=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Py=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function su(s){return(s=String(s)).match(ps)||s.match(Py)?s:"unsafe:"+s}function Ff(s){return(s=String(s)).split(",").map(o=>su(o.trim())).join(", ")}function zr(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function pl(...s){const o={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(o[c]=!0);return o}const ou=zr("area,br,col,hr,img,wbr"),Hg=zr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Lf=zr("rp,rt"),Vf=pl(ou,pl(Hg,zr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pl(Lf,zr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pl(Lf,Hg)),au=zr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Uo=zr("srcset"),lu=pl(au,Uo,zr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var mn=(()=>((mn=mn||{})[mn.NONE=0]="NONE",mn[mn.HTML=1]="HTML",mn[mn.STYLE=2]="STYLE",mn[mn.SCRIPT=3]="SCRIPT",mn[mn.URL=4]="URL",mn[mn.RESOURCE_URL=5]="RESOURCE_URL",mn))();function uu(s){const o=function Dc(){const s=Se();return s&&s[12]}();return o?o.sanitize(mn.URL,s)||"":function Ci(s,o){const l=function gn(s){return s instanceof qd&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?bt(s):su(Z(s))}const uo="__ngContext__";function Gn(s,o){s[uo]=o}function Gf(s){const o=function vt(s){return s[uo]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Xd(s){return s.ngOriginalError}function jo(s,...o){s.error(...o)}class Go{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=function Xg(s){return s&&s.ngErrorLogger||jo}(o);c(this._console,"ERROR",o),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Xd(o);for(;l&&Xd(l);)l=Xd(l);return l||null}}const qf=/^>|^->|<!--|-->|--!>|<!-$/g,Ic=/(<|>)/;const eh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(gt))();function zi(s){return s instanceof Function?s():s}var hr=(()=>((hr=hr||{})[hr.Important=1]="Important",hr[hr.DashCase=2]="DashCase",hr))();let pu;function Yf(s,o){return pu(s,o)}function gu(s){const o=s[3];return Bi(o)?o[3]:o}function Kr(s){return _s(s[13])}function Rc(s){return _s(s[4])}function _s(s){for(;null!==s&&!Bi(s);)s=s[4];return s}function co(s,o,l,c,h){if(null!=c){let m,v=!1;Bi(c)?m=c:Vi(c)&&(v=!0,c=c[0]);const D=cn(c);0===s&&null!==l?null==h?Pt(o,l,D):Ke(o,l,D,h||null,!0):1===s&&null!==l?Ke(o,l,D,h||null,!0):2===s?nm(o,D,v):3===s&&o.destroyNode(D),null!=m&&function g1(s,o,l,c,h){const m=l[7];m!==cn(l)&&co(o,s,c,m,h);for(let D=10;D<l.length;D++){const E=l[D];Jf(E[1],E,s,o,c,m)}}(o,s,m,l,h)}}function wa(s,o){return Jt(s)?s.createText(o):s.createTextNode(o)}function Da(s,o,l){Jt(s)?s.setValue(o,l):o.textContent=l}function Ea(s,o){return s.createComment(function hu(s){return s.replace(qf,o=>o.replace(Ic,"\u200b$1\u200b"))}(o))}function ho(s,o,l){return Jt(s)?s.createElement(o,l):null===l?s.createElement(o):s.createElementNS(l,o)}function b(s,o){const l=s[9],c=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,oa(h,-1)),l.splice(c,1)}function S(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&b(h,c),o>0&&(s[l-1][4]=c[4]);const m=al(s,10+o);!function $y(s,o){Jf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=m[19];null!==v&&v.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function M(s,o){if(!(256&o[2])){const l=o[11];Jt(l)&&l.destroyNode&&Jf(s,o,l,3,null,null),function y(s){let o=s[13];if(!o)return U(s[1],s);for(;o;){let l=null;if(Vi(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)Vi(o)&&U(o[1],o),o=o[3];null===o&&(o=s),Vi(o)&&U(o[1],o),l=o&&o[4]}o=l}}(o)}}function U(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Fe(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof Tn)){const m=l[c+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const D=h[m[v]],E=m[v+1];try{E.call(D)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function ee(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const v=l[m+1],D="function"==typeof v?v(o):cn(o[v]),E=c[h=l[m+2]],N=l[m+3];"boolean"==typeof N?D.removeEventListener(l[m],E,N):N>=0?c[h=N]():c[h=-N].unsubscribe(),m+=2}else{const v=c[h=l[m+1]];l[m].call(v)}if(null!==c){for(let m=h+1;m<c.length;m++)c[m]();o[7]=null}}(s,o),1===o[1].type&&Jt(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&Bi(o[3])){l!==o[3]&&b(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function ve(s,o,l){return ze(s,o.parent,l)}function ze(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===At.None||h===At.Emulated)return null}return Un(c,l)}function Ke(s,o,l,c,h){Jt(s)?s.insertBefore(o,l,c,h):o.insertBefore(l,c,h)}function Pt(s,o,l){Jt(s)?s.appendChild(o,l):o.appendChild(l)}function sr(s,o,l,c,h){null!==c?Ke(s,o,l,c,h):Pt(s,o,l)}function Ki(s,o){return Jt(s)?s.parentNode(o):o.parentNode}function po(s,o,l){return Ho(s,o,l)}function xc(s,o,l){return 40&s.type?Un(s,l):null}let kc,Ho=xc;function _u(s,o){Ho=s,kc=o}function yu(s,o,l,c){const h=ve(s,c,o),m=o[11],D=po(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let E=0;E<l.length;E++)sr(m,h,l[E],D,!1);else sr(m,h,l,D,!1);void 0!==kc&&kc(m,c,o,l,h)}function Pc(s,o){if(null!==o){const l=o.type;if(3&l)return Un(o,s);if(4&l)return Fc(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return Pc(s,c);{const h=s[o.index];return Bi(h)?Fc(-1,h):cn(h)}}if(32&l)return Yf(o,s)()||cn(s[o.index]);{const c=tm(s,o);return null!==c?Array.isArray(c)?c[0]:Pc(gu(s[16]),c):Pc(s,o.next)}}return null}function tm(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Fc(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return Pc(c,h)}return o[7]}function nm(s,o,l){const c=Ki(s,o);c&&function fo(s,o,l,c){Jt(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}function qy(s,o,l,c,h,m,v){for(;null!=l;){const D=c[l.index],E=l.type;if(v&&0===o&&(D&&Gn(cn(D),c),l.flags|=4),64!=(64&l.flags))if(8&E)qy(s,o,l.child,c,h,m,!1),co(o,s,h,D,m);else if(32&E){const N=Yf(l,c);let R;for(;R=N();)co(o,s,h,R,m);co(o,s,h,D,m)}else 16&E?zy(s,o,c,l,h,m):co(o,s,h,D,m);l=v?l.projectionNext:l.next}}function Jf(s,o,l,c,h,m){qy(l,c,s.firstChild,o,h,m,!1)}function zy(s,o,l,c,h,m){const v=l[16],E=v[6].projection[c.projection];if(Array.isArray(E))for(let N=0;N<E.length;N++)co(o,s,h,E[N],m);else qy(s,o,E,v[3],h,m,!0)}function Ew(s,o,l){Jt(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function Ky(s,o,l){Jt(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function Cw(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===c||s.charCodeAt(h+m)<=32)return h}l=h+1}}const Xf="ng-template";function Zy(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==Cw(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Yy(s){return 4===s.type&&s.value!==Xf}function rm(s,o,l){return o===(4!==s.type||l?s.value:Xf)}function _1(s,o,l){let c=4;const h=s.attrs||[],m=function v1(s){for(let o=0;o<s.length;o++)if(br(s[o]))return o;return s.length}(h);let v=!1;for(let D=0;D<o.length;D++){const E=o[D];if("number"!=typeof E){if(!v)if(4&c){if(c=2|1&c,""!==E&&!rm(s,E,l)||""===E&&1===o.length){if(Vs(c))return!1;v=!0}}else{const N=8&c?E:o[++D];if(8&c&&null!==s.attrs){if(!Zy(s.attrs,N,l)){if(Vs(c))return!1;v=!0}continue}const L=Tw(8&c?"class":E,h,Yy(s),l);if(-1===L){if(Vs(c))return!1;v=!0;continue}if(""!==N){let $;$=L>m?"":h[L+1].toLowerCase();const Y=8&c?$:null;if(Y&&-1!==Cw(Y,N,0)||2&c&&N!==$){if(Vs(c))return!1;v=!0}}}}else{if(!v&&!Vs(c)&&!Vs(E))return!1;if(v&&Vs(E))continue;v=!1,c=E|1&c}}return Vs(c)||v}function Vs(s){return 0==(1&s)}function Tw(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let D=o[++h];for(;"string"==typeof D;)D=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function Iw(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function Qy(s,o,l=!1){for(let c=0;c<o.length;c++)if(_1(s,o[c],l))return!0;return!1}function Jy(s,o){e:for(let l=0;l<o.length;l++){const c=o[l];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function Sw(s,o){return s?":not("+o.trim()+")":o}function b1(s){let o=s[0],l=1,c=2,h="",m=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&c){const D=s[++l];h+="["+v+(D.length>0?'="'+D+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!Vs(v)&&(o+=Sw(m,h),h=""),c=v,m=m||!Vs(c);l++}return""!==h&&(o+=Sw(m,h)),o}const Tt={};function ep(s){im(Ot(),Se(),dr()+s,ua())}function im(s,o,l,c){if(!c)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&ro(o,m,l)}else{const m=s.preOrderHooks;null!==m&&$l(o,m,0,l)}jn(l)}function sm(s,o){return s<<17|o<<2}function go(s){return s>>17&32767}function ev(s){return 2|s}function vl(s){return(131068&s)>>2}function tv(s,o){return-131069&s|o<<2}function nv(s){return 1|s}function rp(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],m=l[c+1];if(-1!==m){const v=s.data[m];Ja(h),v.contentQueries(2,o[m],m)}}}function Bc(s,o,l,c,h,m,v,D,E,N){const R=o.blueprint.slice();return R[0]=h,R[2]=140|c,to(R),R[3]=R[15]=s,R[8]=l,R[10]=v||s&&s[10],R[11]=D||s&&s[11],R[12]=E||s&&s[12]||null,R[9]=N||s&&s[9]||null,R[6]=m,R[16]=2==o.type?s[16]:R,R}function wu(s,o,l,c,h){let m=s.data[o];if(null===m)m=fv(s,o,l,c,h),function Nd(){return mt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=c,m.attrs=h;const v=no();m.injectorIndex=null===v?-1:v.injectorIndex}return ri(m,!0),m}function fv(s,o,l,c,h){const m=Mo(),v=Ms(),E=s.data[o]=function Uc(s,o,l,c,h,m){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=E),null!==m&&(v?null==m.child&&null!==E.parent&&(m.child=E):null===m.next&&(m.next=E)),E}function Ta(s,o,l,c){if(0===l)return-1;const h=o.length;for(let m=0;m<l;m++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function ip(s,o,l){ha(o);try{const c=s.viewQuery;null!==c&&dp(1,c,l);const h=s.template;null!==h&&pm(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&rp(s,o),s.staticViewQueries&&dp(2,s.viewQuery,l);const m=s.components;null!==m&&function hv(s,o){for(let l=0;l<o.length;l++)U1(s,o[l])}(o,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Hl()}}function ih(s,o,l,c){const h=o[2];if(256==(256&h))return;ha(o);const m=ua();try{to(o),function jl(s){return mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&pm(s,o,l,2,c);const v=3==(3&h);if(!m)if(v){const N=s.preOrderCheckHooks;null!==N&&ro(o,N,null)}else{const N=s.preOrderHooks;null!==N&&$l(o,N,0,null),Wl(o,0)}if(function B1(s){for(let o=Kr(s);null!==o;o=Rc(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c],m=h[3];0==(1024&h[2])&&oa(m,1),h[2]|=1024}}}(o),function Ww(s){for(let o=Kr(s);null!==o;o=Rc(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];ls(c)&&ih(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&rp(s,o),!m)if(v){const N=s.contentCheckHooks;null!==N&&ro(o,N)}else{const N=s.contentHooks;null!==N&&$l(o,N,1),Wl(o,1)}!function xw(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)jn(~h);else{const m=h,v=l[++c],D=l[++c];Gl(v,m),D(2,o[m])}}}finally{jn(-1)}}(s,o);const D=s.components;null!==D&&function fm(s,o){for(let l=0;l<o.length;l++)qw(s,o[l])}(o,D);const E=s.viewQuery;if(null!==E&&dp(2,E,c),!m)if(v){const N=s.viewCheckHooks;null!==N&&ro(o,N)}else{const N=s.viewHooks;null!==N&&$l(o,N,2),Wl(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,oa(o[3],-1))}finally{Hl()}}function O1(s,o,l,c){const h=o[10],m=!ua(),v=tr(o);try{m&&!v&&h.begin&&h.begin(),v&&ip(s,o,c),ih(s,o,l,c)}finally{m&&!v&&h.end&&h.end()}}function pm(s,o,l,c,h){const m=dr(),v=2&c;try{jn(-1),v&&o.length>20&&im(s,o,20,ua()),l(c,h)}finally{jn(m)}}function pv(s,o,l){!la()||(function F1(s,o,l,c){const h=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||us(l,o),Gn(c,o);const v=l.initialInputs;for(let D=h;D<m;D++){const E=s.data[D],N=os(E);N&&L1(o,l,E);const R=hn(o,s,D,l);Gn(R,o),null!==v&&V1(0,D-h,R,E,0,v),N&&(Gr(l.index,o)[8]=R)}}(s,o,l,Un(l,o)),128==(128&l.flags)&&function lp(s,o,l){const c=l.directiveStart,h=l.directiveEnd,v=l.index,D=function Za(){return mt.lFrame.currentDirectiveIndex}();try{jn(v);for(let E=c;E<h;E++){const N=s.data[E],R=o[E];da(E),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&$o(N,R)}}finally{jn(-1),da(D)}}(s,o,l))}function mm(s,o,l=Un){const c=o.localNames;if(null!==c){let h=o.index+1;for(let m=0;m<c.length;m+=2){const v=c[m+1],D=-1===v?l(o,s):s[v];s[h++]=D}}}function kw(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=_m(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function _m(s,o,l,c,h,m,v,D,E,N){const R=20+c,L=R+h,$=function Pw(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Tt);return l}(R,L),Y="function"==typeof N?N():N;return $[1]={type:s,blueprint:$,template:l,queries:null,viewQuery:D,declTNode:o,data:$.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:Y,incompleteFirstPass:!1}}function sp(s,o,l,c){const h=Kw(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&yv(s).push(c,h.length-1))}function bm(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,h):l[c]=[o,h]}return l}function Ti(s,o,l,c,h,m,v,D){const E=Un(o,l);let R,N=o.inputs;!D&&null!=N&&(R=N[c])?(Qw(s,l,R,c,h),Bn(o)&&function Vw(s,o){const l=Gr(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function x1(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,Jt(m)?m.setProperty(E,c,h):fa(c)||(E.setProperty?E.setProperty(c,h):E[c]=h))}function op(s,o,l,c){let h=!1;if(la()){const m=function up(s,o,l){const c=s.directiveRegistry;let h=null;if(c)for(let m=0;m<c.length;m++){const v=c[m];Qy(l,v.selectors,!1)&&(h||(h=[]),xo(us(l,o),s,v.type),os(v)?(Gw(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===c?null:{"":-1};if(null!==m){h=!0,sh(l,s.data.length,m.length);for(let R=0;R<m.length;R++){const L=m[R];L.providersResolver&&L.providersResolver(L)}let D=!1,E=!1,N=Ta(s,o,m.length,null);for(let R=0;R<m.length;R++){const L=m[R];l.mergedAttrs=Lt(l.mergedAttrs,L.hostAttrs),oh(s,l,o,N,L),gv(N,L,v),null!==L.contentQueries&&(l.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(l.flags|=128);const $=L.type.prototype;!D&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),D=!0),!E&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),E=!0),N++}!function Lw(s,o){const c=o.directiveEnd,h=s.data,m=o.attrs,v=[];let D=null,E=null;for(let N=o.directiveStart;N<c;N++){const R=h[N],L=R.inputs,$=null===m||Yy(o)?null:Em(L,m);v.push($),D=bm(L,N,D),E=bm(R.outputs,N,E)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=16),D.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=D,o.outputs=E}(s,l)}v&&function Hw(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=l[o[h+1]];if(null==m)throw new Oe(-301,`Export of name '${o[h+1]}' not found!`);c.push(o[h],m)}}}(l,c,v)}return l.mergedAttrs=Lt(l.mergedAttrs,l.attrs),h}function ap(s,o,l,c,h,m){const v=m.hostBindings;if(v){let D=s.hostBindingOpCodes;null===D&&(D=s.hostBindingOpCodes=[]);const E=~o.index;(function jw(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(D)!=E&&D.push(E),D.push(c,h,v)}}function $o(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Gw(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function gv(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;os(o)&&(l[""]=s)}}function sh(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function oh(s,o,l,c,h){s.data[c]=h;const m=h.factory||(h.factory=Ao(h.type)),v=new Tn(m,os(h),null);s.blueprint[c]=v,l[c]=v,ap(s,o,0,c,Ta(s,l,h.hostVars,Tt),h)}function L1(s,o,l){const c=Un(o,s),h=kw(l),m=s[10],v=cp(s,Bc(s,h,null,l.onPush?64:16,c,o,m,m.createRenderer(c,l),null,null));s[o.index]=v}function Dm(s,o,l,c,h,m,v){if(null==m)Jt(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const D=null==v?Z(m):v(m,c||"",h);Jt(s)?s.setAttribute(o,h,D,l):l?o.setAttributeNS(l,h,D):o.setAttribute(h,D)}}function V1(s,o,l,c,h,m){const v=m[o];if(null!==v){const D=c.setInput;for(let E=0;E<v.length;){const N=v[E++],R=v[E++],L=v[E++];null!==D?c.setInput(l,L,N,R):l[R]=L}}}function Em(s,o){let l=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return l}function Bs(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function qw(s,o){const l=Gr(o,s);if(ls(l)){const c=l[1];80&l[2]?ih(c,l,c.template,l[8]):l[5]>0&&mv(l)}}function mv(s){for(let c=Kr(s);null!==c;c=Rc(c))for(let h=10;h<c.length;h++){const m=c[h];if(1024&m[2]){const v=m[1];ih(v,m,v.template,m[8])}else m[5]>0&&mv(m)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=Gr(l[c],s);ls(h)&&h[5]>0&&mv(h)}}function U1(s,o){const l=Gr(o,s),c=l[1];(function j1(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),ip(c,l,l[8])}function cp(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function jc(s){for(;s;){s[2]|=64;const o=gu(s);if(md(s)&&!o)return s;s=o}return null}function _v(s,o,l){const c=o[10];c.begin&&c.begin();try{ih(s,o,s.template,l)}catch(h){throw Yw(o,h),h}finally{c.end&&c.end()}}function Tm(s){!function Cm(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=Gf(l),h=c[1];O1(h,c,h.template,l)}}(s[8])}function dp(s,o,l){Ja(0),o(s,l)}const H1=(()=>Promise.resolve(null))();function Kw(s){return s[7]||(s[7]=[])}function yv(s){return s.cleanup||(s.cleanup=[])}function Yw(s,o){const l=s[9],c=l?l.get(Go,null):null;c&&c.handleError(o)}function Qw(s,o,l,c,h){for(let m=0;m<l.length;){const v=l[m++],D=l[m++],E=o[v],N=s.data[v];null!==N.setInput?N.setInput(E,h,c,D):E[D]=h}}function hp(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const D=o[v];"number"==typeof D?m=D:1==m?h=ue(h,D):2==m&&(c=ue(c,D+": "+o[++v]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}const vv=new on("INJECTOR",-1);class Sm{get(o,l=qr){if(l===qr){const c=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw c.name="NullInjectorError",c}return l}}const lh=new on("Set Injector scope."),fp={},uh={};let bv;function wv(){return void 0===bv&&(bv=new Sm),bv}function Dv(s,o=null,l=null,c){const h=Ev(s,o,l,c);return h._resolveInjectorDefTypes(),h}function Ev(s,o=null,l=null,c){return new Am(s,l,o||wv(),c)}class Am{constructor(o,l,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];l&&nn(l,D=>this.processProvider(D,o,l)),nn([o],D=>this.processInjectorType(D,[],m)),this.records.set(vv,Du(void 0,this));const v=this.records.get(lh);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:le(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=qr,c=Xe.Default){this.assertNotDestroyed();const h=O(this),m=Zn(void 0);try{if(!(c&Xe.SkipSelf)){let D=this.records.get(o);if(void 0===D){const E=function Eu(s){return"function"==typeof s||"object"==typeof s&&s instanceof on}(o)&&Rn(o);D=E&&this.injectableDefInScope(E)?Du(pp(o),fp):null,this.records.set(o,D)}if(null!=D)return this.hydrate(o,D)}return(c&Xe.Self?wv():this.parent).get(o,l=c&Xe.Optional&&l===qr?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[Vo]=v[Vo]||[]).unshift(le(o)),h)throw v;return function Xt(s,o,l,c){const h=s[Vo];throw o[dl]&&h.unshift(o[dl]),s.message=function oi(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=le(o);if(Array.isArray(o))h=o.map(le).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let D=o[v];m.push(v+":"+("string"==typeof D?JSON.stringify(D):le(D)))}h=`{${m.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(Xl,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[Vo]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Zn(m),O(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(le(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,"")}processInjectorType(o,l,c){if(!(o=X(o)))return!1;let h=Do(o);const m=null==h&&o.ngModule||void 0,v=void 0===m?o:m,D=-1!==c.indexOf(v);if(void 0!==m&&(h=Do(m)),null==h)return!1;if(null!=h.imports&&!D){let R;c.push(v);try{nn(h.imports,L=>{this.processInjectorType(L,l,c)&&(void 0===R&&(R=[]),R.push(L))})}finally{}if(void 0!==R)for(let L=0;L<R.length;L++){const{ngModule:$,providers:Y}=R[L];nn(Y,pe=>this.processProvider(pe,$,Y||j))}}this.injectorDefTypes.add(v);const E=Ao(v)||(()=>new v);this.records.set(v,Du(E,fp));const N=h.providers;if(null!=N&&!D){const R=o;nn(N,L=>this.processProvider(L,R,N))}return void 0!==m&&void 0!==o.providers}processProvider(o,l,c){let h=Hc(o=X(o))?o:X(o&&o.provide);const m=function W1(s,o,l){return Xw(s)?Du(void 0,s.useValue):Du(Jw(s),fp)}(o);if(Hc(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Du(void 0,fp,!0),v.factory=()=>Ye(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,m)}hydrate(o,l){return l.value===fp&&(l.value=uh,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Nm(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=X(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function pp(s){const o=Rn(s),l=null!==o?o.factory:Ao(s);if(null!==l)return l;if(s instanceof on)throw new Oe(204,"");if(s instanceof Function)return function Cv(s){const o=s.length;if(o>0)throw _a(o,"?"),new Oe(204,"");const l=function jt(s){const o=s&&(s[ti]||s[Ae]);if(o){const l=function Dn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Oe(204,"")}function Jw(s,o,l){let c;if(Hc(s)){const h=X(s);return Ao(h)||pp(h)}if(Xw(s))c=()=>X(s.useValue);else if(function tD(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Ye(s.deps||[]));else if(function eD(s){return!(!s||!s.useExisting)}(s))c=()=>K(X(s.useExisting));else{const h=X(s&&(s.useClass||s.provide));if(!function ys(s){return!!s.deps}(s))return Ao(h)||pp(h);c=()=>new h(...Ye(s.deps))}return c}function Du(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Xw(s){return null!==s&&"object"==typeof s&&C in s}function Hc(s){return"function"==typeof s}let Zi=(()=>{class s{static create(l,c){var h;if(Array.isArray(l))return Dv({name:""},c,l,"");{const m=null!==(h=l.name)&&void 0!==h?h:"";return Dv({name:m},l.parent,l.providers,m)}}}return s.THROW_IF_NOT_FOUND=qr,s.NULL=new Sm,s.\u0275prov=Qt({token:s,providedIn:"any",factory:()=>K(vv)}),s.__NG_ELEMENT_ID__=-1,s})();function uD(s,o){ic(Gf(s)[1],dn())}function Rv(s){let o=function cD(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let h;if(os(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");h=o.\u0275dir}if(h){if(l){c.push(h);const v=s;v.inputs=Ov(s.inputs),v.declaredInputs=Ov(s.declaredInputs),v.outputs=Ov(s.outputs);const D=h.hostBindings;D&&eT(s,D);const E=h.viewQuery,N=h.contentQueries;if(E&&J1(s,E),N&&X1(s,N),ie(s.inputs,h.inputs),ie(s.declaredInputs,h.declaredInputs),ie(s.outputs,h.outputs),os(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const D=m[v];D&&D.ngInherit&&D(s),D===Rv&&(l=!1)}}o=Object.getPrototypeOf(o)}!function Q1(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Lt(h.hostAttrs,l=Lt(l,h.hostAttrs))}}(c)}function Ov(s){return s===Ss?{}:s===j?[]:s}function J1(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function X1(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,m)=>{o(c,h,m),l(c,h,m)}:o}function eT(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}let Om=null;function ch(){if(!Om){const s=gt.Symbol;if(s&&s.iterator)Om=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Om=c)}}}return Om}function mp(s){return!!Us(s)&&(Array.isArray(s)||!(s instanceof Map)&&ch()in s)}function Us(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Sa(s,o,l){return s[o]=l}function ci(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Wc(s,o,l,c){const h=ci(s,o,l);return ci(s,o+1,c)||h}function xv(s,o,l,c){const h=Se();return ci(h,Rs(),o)&&(Ot(),function fr(s,o,l,c,h,m){const v=Un(s,o);Dm(o[11],v,m,s.value,l,c,h)}(Cn(),h,s,o,l,c)),xv}function hh(s,o,l,c){return ci(s,Rs(),l)?o+Z(l)+c:Tt}function vD(s,o,l,c,h,m,v,D){const E=Se(),N=Ot(),R=s+20,L=N.firstCreatePass?function yD(s,o,l,c,h,m,v,D,E){const N=o.consts,R=wu(o,s,4,v||null,Hr(N,D));op(o,l,R,Hr(N,E)),ic(o,R);const L=R.tViews=_m(2,R,c,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,N);return null!==o.queries&&(o.queries.template(o,R),L.queries=o.queries.embeddedTView(R)),R}(R,N,E,o,l,c,h,m,v):N.data[R];ri(L,!1);const $=E[11].createComment("");yu(N,E,$,L),Gn($,E),cp(E,E[R]=Bs($,E,$,L)),As(L)&&pv(N,E,L),null!=v&&mm(E,L,D)}function bD(s){return function as(s,o){return s[o]}(function Ul(){return mt.lFrame.contextLView}(),20+s)}function Pm(s,o=Xe.Default){const l=Se();return null===l?K(s,o):zl(dn(),l,X(s),o)}function Lv(){throw new Error("invalid")}function Vv(s,o,l){const c=Se();return ci(c,Rs(),o)&&Ti(Ot(),Cn(),c,s,o,c[11],l,!1),Vv}function Bv(s,o,l,c,h){const v=h?"class":"style";Qw(s,l,o.inputs[v],v,c)}function js(s,o,l,c){const h=Se(),m=Ot(),v=20+s,D=h[11],E=h[v]=ho(D,o,function Od(){return mt.lFrame.currentNamespace}()),N=m.firstCreatePass?function Zr(s,o,l,c,h,m,v){const D=o.consts,N=wu(o,s,2,h,Hr(D,m));return op(o,l,N,Hr(D,v)),null!==N.attrs&&hp(N,N.attrs,!1),null!==N.mergedAttrs&&hp(N,N.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,N),N}(v,m,h,0,o,l,c):m.data[v];ri(N,!0);const R=N.mergedAttrs;null!==R&&sc(D,E,R);const L=N.classes;null!==L&&Ky(D,E,L);const $=N.styles;null!==$&&Ew(D,E,$),64!=(64&N.flags)&&yu(m,h,E,N),0===function qa(){return mt.lFrame.elementDepthCount}()&&Gn(E,h),function za(){mt.lFrame.elementDepthCount++}(),As(N)&&(pv(m,h,N),function gm(s,o,l){if(gd(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,l[m],m)}}}(m,N,h)),null!==c&&mm(h,N)}function wh(){let s=dn();Ms()?Vl():(s=s.parent,ri(s,!1));const o=s;!function aa(){mt.lFrame.elementDepthCount--}();const l=Ot();l.firstCreatePass&&(ic(l,s),gd(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function kd(s){return 0!=(16&s.flags)}(o)&&Bv(l,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function rl(s){return 0!=(32&s.flags)}(o)&&Bv(l,o,Se(),o.stylesWithoutHost,!1)}function Fm(s,o,l,c){js(s,o,l,c),wh()}function MD(){return Se()}function jv(s){return!!s&&"function"==typeof s.then}function RD(s){return!!s&&"function"==typeof s.subscribe}const Si=RD;function Dh(s,o,l,c){const h=Se(),m=Ot(),v=dn();return function Lm(s,o,l,c,h,m,v,D){const E=As(c),R=s.firstCreatePass&&yv(s),L=o[8],$=Kw(o);let Y=!0;if(3&c.type||D){const Ge=Un(c,o),Be=D?D(Ge):Ge,se=$.length,ft=D?Vt=>D(cn(Vt[c.index])):c.index;if(Jt(l)){let Vt=null;if(!D&&E&&(Vt=function wT(s,o,l,c){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===l&&h[m+1]===c){const D=o[7],E=h[m+2];return D.length>E?D[E]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,c.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=m,Vt.__ngLastListenerFn__=m,Y=!1;else{m=Dp(c,o,L,m,!1);const wt=l.listen(Be,h,m);$.push(m,wt),R&&R.push(h,ft,se,se+1)}}else m=Dp(c,o,L,m,!0),Be.addEventListener(h,m,v),$.push(m),R&&R.push(h,ft,se,v)}else m=Dp(c,o,L,m,!1);const pe=c.outputs;let Pe;if(Y&&null!==pe&&(Pe=pe[h])){const Ge=Pe.length;if(Ge)for(let Be=0;Be<Ge;Be+=2){const Ni=o[Pe[Be]][Pe[Be+1]].subscribe(m),Wn=$.length;$.push(m,Ni),R&&R.push(h,c.index,Wn,-(Wn+1))}}}(m,h,h[11],v,s,o,!!l,c),Dh}function wp(s,o,l,c){try{return!1!==l(c)}catch(h){return Yw(s,h),!1}}function Dp(s,o,l,c,h){return function m(v){if(v===Function)return c;const D=2&s.flags?Gr(s.index,o):o;0==(32&o[2])&&jc(D);let E=wp(o,0,c,v),N=m.__ngNextListenerFn__;for(;N;)E=wp(o,0,N,v)&&E,N=N.__ngNextListenerFn__;return h&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function Vm(s=1){return function Rd(s){return(mt.lFrame.contextLView=function Vg(s,o){for(;s>0;)o=o[15],s--;return o}(s,mt.lFrame.contextLView))[8]}(s)}function DT(s,o){let l=null;const c=function y1(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const m=o[h];if("*"!==m){if(null===c?Qy(s,m,!0):Jy(c,m))return h}else l=h}return l}function OD(s){const o=Se()[16][6];if(!o.projection){const c=o.projection=_a(s?s.length:1,null),h=c.slice();let m=o.child;for(;null!==m;){const v=s?DT(m,s):0;null!==v&&(h[v]?h[v].projectionNext=m:c[v]=m,h[v]=m),m=m.next}}}function xD(s,o=0,l){const c=Se(),h=Ot(),m=wu(h,20+s,16,null,l||null);null===m.projection&&(m.projection=o),Vl(),64!=(64&m.flags)&&function Dw(s,o,l){zy(o[11],0,o,l,ve(s,l,o),po(l.parent||o[6],l,o))}(h,c,m)}function Hv(s,o,l){return Bm(s,"",o,"",l),Hv}function Bm(s,o,l,c,h){const m=Se(),v=hh(m,o,l,c);return v!==Tt&&Ti(Ot(),Cn(),m,s,v,m[11],h,!1),Bm}function Um(s,o,l,c,h){const m=s[l+1],v=null===o;let D=c?go(m):vl(m),E=!1;for(;0!==D&&(!1===E||v);){const R=s[D+1];BD(s[D],o)&&(E=!0,s[D+1]=c?nv(R):ev(R)),D=c?go(R):vl(R)}E&&(s[l+1]=c?ev(m):nv(m))}function BD(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ao(s,o)>=0}const Hn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function UD(s){return s.substring(Hn.key,Hn.keyEnd)}function GD(s,o){const l=Hn.textEnd;return l===o?-1:(o=Hn.keyEnd=function CT(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Hn.key=o,l),Su(s,o,l))}function Su(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function Cp(s,o,l){return qo(s,o,l,!1),Cp}function Hm(s,o){return qo(s,o,null,!0),Hm}function Tp(s){!function zo(s,o,l,c){const h=Ot(),m=Hi(2);h.firstUpdatePass&&zD(h,null,m,c);const v=Se();if(l!==Tt&&ci(v,m,l)){const D=h.data[dr()];if(e0(D,c)&&!qD(h,m)){let E=c?D.classesWithoutHost:D.stylesWithoutHost;null!==E&&(l=ue(E,l||"")),Bv(h,D,v,l,c)}else!function Xv(s,o,l,c,h,m,v,D){h===Tt&&(h=j);let E=0,N=0,R=0<h.length?h[0]:null,L=0<m.length?m[0]:null;for(;null!==R||null!==L;){const $=E<h.length?h[E+1]:void 0,Y=N<m.length?m[N+1]:void 0;let Pe,pe=null;R===L?(E+=2,N+=2,$!==Y&&(pe=L,Pe=Y)):null===L||null!==R&&R<L?(E+=2,pe=R):(N+=2,pe=L,Pe=Y),null!==pe&&ZD(s,o,l,c,pe,Pe,v,D),R=E<h.length?h[E]:null,L=N<m.length?m[N]:null}}(h,D,v,v[11],v[m+1],v[m+1]=function KD(s,o,l){if(null==l||""===l)return j;const c=[],h=bt(l);if(Array.isArray(h))for(let m=0;m<h.length;m++)s(c,h[m],!0);else if("object"==typeof h)for(const m in h)h.hasOwnProperty(m)&&s(c,m,h[m]);else"string"==typeof h&&o(c,h);return c}(s,o,l),c,m)}}(wr,Ma,s,!0)}function Ma(s,o){for(let l=function jD(s){return function Yv(s){Hn.key=0,Hn.keyEnd=0,Hn.value=0,Hn.valueEnd=0,Hn.textEnd=s.length}(s),GD(s,Su(s,0,Hn.textEnd))}(o);l>=0;l=GD(o,l))wr(s,UD(o),!0)}function qo(s,o,l,c){const h=Se(),m=Ot(),v=Hi(2);m.firstUpdatePass&&zD(m,s,v,c),o!==Tt&&ci(h,v,o)&&ZD(m,m.data[dr()],h,h[11],s,h[v+1]=function QD(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=le(bt(s)))),s}(o,l),c,v)}function qD(s,o){return o>=s.expandoStartIndex}function zD(s,o,l,c){const h=s.data;if(null===h[l+1]){const m=h[dr()],v=qD(s,l);e0(m,c)&&null===o&&!v&&(o=!1),o=function IT(s,o,l,c){const h=function Ya(s){const o=mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=Au(l=Qv(null,s,o,l,c),o.attrs,c),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=Qv(h,s,o,l,c),null===m){let E=function ST(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==vl(c))return s[go(c)]}(s,o,c);void 0!==E&&Array.isArray(E)&&(E=Qv(null,s,o,E[1],c),E=Au(E,o.attrs,c),function AT(s,o,l,c){s[go(l?o.classBindings:o.styleBindings)]=c}(s,o,c,E))}else m=function NT(s,o,l){let c;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)c=Au(c,s[m].hostAttrs,l);return Au(c,o.attrs,l)}(s,o,c)}return void 0!==m&&(c?o.residualClasses=m:o.residualStyles=m),l}(h,m,o,c),function qv(s,o,l,c,h,m){let v=m?o.classBindings:o.styleBindings,D=go(v),E=vl(v);s[c]=l;let R,N=!1;if(Array.isArray(l)){const L=l;R=L[1],(null===R||ao(L,R)>0)&&(N=!0)}else R=l;if(h)if(0!==E){const $=go(s[D+1]);s[c+1]=sm($,D),0!==$&&(s[$+1]=tv(s[$+1],c)),s[D+1]=function E1(s,o){return 131071&s|o<<17}(s[D+1],c)}else s[c+1]=sm(D,0),0!==D&&(s[D+1]=tv(s[D+1],c)),D=c;else s[c+1]=sm(E,0),0===D?D=c:s[E+1]=tv(s[E+1],c),E=c;N&&(s[c+1]=ev(s[c+1])),Um(s,R,c,!0),Um(s,R,c,!1),function VD(s,o,l,c,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&ao(m,o)>=0&&(l[c+1]=nv(l[c+1]))}(o,R,s,c,m),v=sm(D,E),m?o.classBindings=v:o.styleBindings=v}(h,m,o,l,v,c)}}function Qv(s,o,l,c,h){let m=null;const v=l.directiveEnd;let D=l.directiveStylingLast;for(-1===D?D=l.directiveStart:D++;D<v&&(m=o[D],c=Au(c,m.hostAttrs,h),m!==s);)D++;return null!==s&&(l.directiveStylingLast=D),c}function Au(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?h=v:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),wr(s,v,!!l||o[++m]))}return void 0===s?null:s}function ZD(s,o,l,c,h,m,v,D){if(!(3&o.type))return;const E=s.data,N=E[D+1];$m(function Aw(s){return 1==(1&s)}(N)?YD(E,o,l,h,vl(N),v):void 0)||($m(m)||function om(s){return 2==(2&s)}(N)&&(m=YD(E,null,l,h,D,v)),function m1(s,o,l,c,h){const m=Jt(s);if(o)h?m?s.addClass(l,c):l.classList.add(c):m?s.removeClass(l,c):l.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:hr.DashCase;if(null==h)m?s.removeStyle(l,c,v):l.style.removeProperty(c);else{const D="string"==typeof h&&h.endsWith("!important");D&&(h=h.slice(0,-10),v|=hr.Important),m?s.setStyle(l,c,h,v):l.style.setProperty(c,h,D?"important":"")}}}(c,v,er(dr(),l),h,m))}function YD(s,o,l,c,h,m){const v=null===o;let D;for(;h>0;){const E=s[h],N=Array.isArray(E),R=N?E[1]:E,L=null===R;let $=l[h+1];$===Tt&&($=L?j:void 0);let Y=L?Ls($,c):R===c?$:void 0;if(N&&!$m(Y)&&(Y=Ls(E,c)),$m(Y)&&(D=Y,v))return D;const pe=s[h+1];h=v?go(pe):vl(pe)}if(null!==o){let E=m?o.residualClasses:o.residualStyles;null!=E&&(D=Ls(E,c))}return D}function $m(s){return void 0!==s}function e0(s,o){return 0!=(s.flags&(o?16:32))}function t0(s,o=""){const l=Se(),c=Ot(),h=s+20,m=c.firstCreatePass?wu(c,h,1,o,null):c.data[h],v=l[h]=wa(l[11],o);yu(c,l,v,m),ri(m,!1)}function Ip(s,o,l){const c=Se(),h=hh(c,s,o,l);return h!==Tt&&function Wo(s,o,l){const c=er(o,s);Da(s[11],c,l)}(c,dr(),h),Ip}function Sp(s,o,l){const c=Se();return ci(c,Rs(),o)&&Ti(Ot(),Cn(),c,s,o,c[11],l,!0),Sp}const zc=void 0;var jT=["en",[["a","p"],["AM","PM"],zc],[["AM","PM"],zc,zc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zc,"{1} 'at' {0}",zc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function UT(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Kc={};function e_(s){const o=function WT(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=nE(o);if(l)return l;const c=o.split("-")[0];if(l=nE(c),l)return l;if("en"===c)return jT;throw new Error(`Missing locale data for the locale "${s}".`)}function Ch(s){return e_(s)[yt.PluralCase]}function nE(s){return s in Kc||(Kc[s]=gt.ng&&gt.ng.common&&gt.ng.common.locales&&gt.ng.common.locales[s]),Kc[s]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const rE=["zero","one","two","few","many"],Np="en-US",t_={marker:"element"},n_={marker:"ICU"};var $n=(()=>(($n=$n||{})[$n.SHIFT=2]="SHIFT",$n[$n.APPEND_EAGERLY=1]="APPEND_EAGERLY",$n[$n.COMMENT=2]="COMMENT",$n))();let sE=Np;function aE(s,o,l){const c=o.insertBeforeIndex,h=Array.isArray(c)?c[0]:c;return null===h?xc(s,0,l):cn(l[h])}function lE(s,o,l,c,h){const m=o.insertBeforeIndex;if(Array.isArray(m)){let v=c,D=null;if(3&o.type||(D=v,v=h),null!==v&&0==(2&o.flags))for(let E=1;E<m.length;E++)Ke(s,v,l[m[E]],D,!1)}}function uE(s,o){if(s.push(o),s.length>1)for(let l=s.length-2;l>=0;l--){const c=s[l];cE(c)||r_(c,o)&&null===KT(c)&&Mp(c,o.index)}}function cE(s){return!(64&s.type)}function r_(s,o){return cE(o)||s.index>o.index}function KT(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function Mp(s,o){const l=s.insertBeforeIndex;Array.isArray(l)?l[0]=o:(_u(aE,lE),s.insertBeforeIndex=o)}function Ko(s,o){const l=s.data[o];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function wl(s,o,l){const c=fv(s,l,64,null,null);return uE(o,c),c}function Qe(s,o){const l=o[s.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function i_(s){return s>>>17}function Et(s){return(131070&s)>>>1}let Dl=0,Op=0;function dE(s,o,l,c){const h=l[11];let v,m=null;for(let D=0;D<o.length;D++){const E=o[D];if("string"==typeof E){const N=o[++D];null===l[N]&&(l[N]=wa(h,E))}else if("number"==typeof E)switch(1&E){case 0:const N=i_(E);let R,L;if(null===m&&(m=N,v=Ki(h,c)),N===m?(R=c,L=v):(R=null,L=cn(l[N])),null!==L){const Pe=Et(E);Ke(h,L,l[Pe],R,!1);const Be=Ko(s,Pe);if(null!==Be&&"object"==typeof Be){const se=Qe(Be,l);null!==se&&dE(s,Be.create[se],l,l[Be.anchorIdx])}}break;case 1:const Y=o[++D],pe=o[++D];Dm(h,er(E>>>1,l),null,null,Y,pe,null)}else switch(E){case n_:const N=o[++D],R=o[++D];null===l[R]&&Gn(l[R]=Ea(h,N),l);break;case t_:const L=o[++D],$=o[++D];null===l[$]&&Gn(l[$]=ho(h,L,null),l)}}}function Yr(s,o,l,c,h){for(let m=0;m<l.length;m++){const v=l[m],D=l[++m];if(v&h){let E="";for(let N=m+1;N<=m+D;N++){const R=l[N];if("string"==typeof R)E+=R;else if("number"==typeof R)if(R<0)E+=Z(o[c-R]);else{const L=R>>>2;switch(3&R){case 1:const $=l[++N],Y=l[++N],pe=s.data[L];"string"==typeof pe?Dm(o[11],o[L],null,pe,$,E,Y):Ti(s,pe,o,$,E,o[11],Y,!1);break;case 0:const Pe=o[L];null!==Pe&&Da(o[11],Pe,E);break;case 2:hi(s,Ko(s,L),o,E);break;case 3:xp(s,Ko(s,L),c,o)}}}}else{const E=l[m+1];if(E>0&&3==(3&E)){const R=Ko(s,E>>>2);o[R.currentCaseLViewIndex]<0&&xp(s,R,c,o)}}m+=D}}function xp(s,o,l,c){let h=c[o.currentCaseLViewIndex];if(null!==h){let m=Dl;h<0&&(h=c[o.currentCaseLViewIndex]=~h,m=-1),Yr(s,c,o.update[h],l,m)}}function hi(s,o,l,c){const h=function JT(s,o){let l=s.cases.indexOf(o);if(-1===l)switch(s.type){case 1:{const c=function iE(s,o){const l=Ch(o)(parseInt(s,10)),c=rE[l];return void 0!==c?c:"other"}(o,function zT(){return sE}());l=s.cases.indexOf(c),-1===l&&"other"!==c&&(l=s.cases.indexOf("other"));break}case 0:l=s.cases.indexOf("other")}return-1===l?null:l}(o,c);if(Qe(o,l)!==h&&(El(s,o,l),l[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const v=l[o.anchorIdx];v&&dE(s,o.create[h],l,v)}}function El(s,o,l){let c=Qe(o,l);if(null!==c){const h=o.remove[c];for(let m=0;m<h.length;m++){const v=h[m];if(v>0){const D=er(v,l);null!==D&&nm(l[11],D)}else El(s,Ko(s,~v),l)}}}function XT(){const s=[];let l,c,o=-1;function m(D,E){o=0;const N=Qe(D,E);c=null!==N?D.remove[N]:j}function v(){if(o<c.length){const D=c[o++];return D>0?l[D]:(s.push(o,c),m(l[1].data[~D],l),v())}return 0===s.length?null:(c=s.pop(),o=s.pop(),v())}return function h(D,E){for(l=E;s.length;)s.pop();return m(D.value,E),v}}const Zc=/\ufffd(\d+):?\d*\ufffd/gi,Qi=/\ufffd(\d+)\ufffd/,o_=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,fE=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,pE=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,c0=/\uE500/g;function d0(s,o,l,c,h,m,v){const D=Ta(s,c,1,null);let E=D<<$n.SHIFT,N=no();o===N&&(N=null),null===N&&(E|=$n.APPEND_EAGERLY),v&&(E|=$n.COMMENT,function Hy(s){void 0===pu&&(pu=s())}(XT)),h.push(E,null===m?"":m);const R=fv(s,D,v?32:1,null===m?"":m,null);uE(l,R);const L=R.index;return ri(R,!1),null!==N&&o!==N&&function ZT(s,o){let l=s.insertBeforeIndex;null===l?(_u(aE,lE),l=s.insertBeforeIndex=[null,o]):(function J(s,o,l){s!=o&&rt(l,s,o,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(o))}(N,L),R}function h0(s,o,l,c,h,m,v){const D=v.match(Zc),E=d0(s,o,l,m,c,D?null:v,!1);D&&Th(h,v,E.index,null,0,null)}function Th(s,o,l,c,h,m){const v=s.length,D=v+1;s.push(null,null);const E=v+2,N=o.split(Zc);let R=0;for(let L=0;L<N.length;L++){const $=N[L];if(1&L){const Y=h+parseInt($,10);s.push(-1-Y),R|=f0(Y)}else""!==$&&s.push($)}return s.push(l<<2|(c?1:0)),c&&s.push(c,m),s[v]=R,s[D]=s.length-E,R}function f0(s){return 1<<Math.min(s,31)}function g0(s){let o,m,l="",c=0,h=!1;for(;null!==(o=fE.exec(s));)h?o[0]===`\ufffd/*${m}\ufffd`&&(c=o.index,h=!1):(l+=s.substring(c,o.index+o[0].length),m=o[1],h=!0);return l+=s.substr(c),l}function m0(s,o,l,c,h,m){let v=0;const D={type:h.type,currentCaseLViewIndex:Ta(s,o,1,null),anchorIdx:m,cases:[],create:[],remove:[],update:[]};(function y0(s,o,l){s.push(f0(o.mainBinding),2,-1-o.mainBinding,l<<2|2)})(l,h,m),function a0(s,o,l){const c=s.data[o];null===c?s.data[o]=l:c.value=l}(s,m,D);const E=h.values;for(let N=0;N<E.length;N++){const R=E[N],L=[];for(let $=0;$<R.length;$++){const Y=R[$];if("string"!=typeof Y){const pe=L.push(Y)-1;R[$]=`\x3c!--\ufffd${pe}\ufffd--\x3e`}}v=_0(s,D,o,l,c,h.cases[N],R.join(""),L)|v}v&&function yE(s,o,l){s.push(o,1,l<<2|3)}(l,v,m)}function a_(s){const o=[],l=[];let c=1,h=0;const m=kp(s=s.replace(o_,function(v,D,E){return c="select"===E?0:1,h=parseInt(D.substr(1),10),""}));for(let v=0;v<m.length;){let D=m[v++].trim();1===c&&(D=D.replace(/\s*(?:=)?(\w+)\s*/,"$1")),D.length&&o.push(D);const E=kp(m[v++]);o.length>l.length&&l.push(E)}return{type:c,mainBinding:h,cases:o,values:l}}function kp(s){if(!s)return[];let o=0;const l=[],c=[],h=/[{}]/g;let m;for(h.lastIndex=0;m=h.exec(s);){const D=m.index;if("}"==m[0]){if(l.pop(),0==l.length){const E=s.substring(o,D);o_.test(E)?c.push(a_(E)):c.push(E),o=D+1}}else{if(0==l.length){const E=s.substring(o,D);c.push(E),o=D+1}l.push("{")}}const v=s.substring(o);return c.push(v),c}function _0(s,o,l,c,h,m,v,D){const E=[],N=[],R=[];o.cases.push(m),o.create.push(E),o.remove.push(N),o.update.push(R);const $=function xt(s){const o=new ky(s);return function Pf(){try{return!!(new window.DOMParser).parseFromString(fl(""),"text/html")}catch(s){return!1}}()?new ai(o):o}(Qu()).getInertBodyElement(v),Y=function wc(s){return"content"in s&&function Wg(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}($)||$;return Y?l_(s,o,l,c,E,N,R,Y,h,D,0):0}function l_(s,o,l,c,h,m,v,D,E,N,R){let L=0,$=D.firstChild;for(;$;){const Y=Ta(s,l,1,null);switch($.nodeType){case Node.ELEMENT_NODE:const pe=$,Pe=pe.tagName.toLowerCase();if(Vf.hasOwnProperty(Pe)){v0(h,t_,Pe,E,Y),s.data[Y]=Pe;const ft=pe.attributes;for(let Vt=0;Vt<ft.length;Vt++){const wt=ft.item(Vt),Ni=wt.name.toLowerCase();wt.value.match(Zc)?lu.hasOwnProperty(Ni)&&Th(v,wt.value,Y,wt.name,0,au[Ni]?su:Uo[Ni]?Ff:null):oI(h,Y,wt)}L=l_(s,o,l,c,h,m,v,$,Y,N,R+1)|L,_E(m,Y,R)}break;case Node.TEXT_NODE:const Ge=$.textContent||"",Be=Ge.match(Zc);v0(h,null,Be?"":Ge,E,Y),_E(m,Y,R),Be&&(L=Th(v,Ge,Y,null,0,null)|L);break;case Node.COMMENT_NODE:const se=Qi.exec($.textContent||"");if(se){const Vt=N[parseInt(se[1],10)];v0(h,n_,"",E,Y),m0(s,l,c,E,Vt,Y),sI(m,Y,R)}}$=$.nextSibling}return L}function _E(s,o,l){0===l&&s.push(o)}function sI(s,o,l){0===l&&(s.push(~o),s.push(o))}function v0(s,o,l,c,h){null!==o&&s.push(o),s.push(l,h,function l0(s,o,l){return s|o<<17|l<<1}(0,c,h))}function oI(s,o,l){s.push(o<<1|1,l.name,l.value)}function d_(s,o,l=-1){const c=Ot(),h=Se(),m=20+s,v=Hr(c.consts,o),D=no();c.firstCreatePass&&function mE(s,o,l,c,h,m){const v=no(),D=[],E=[],N=[[]];h=function iI(s,o){if(function p0(s){return-1===s}(o))return g0(s);{const l=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,c=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return g0(s.substring(l,c))}}(h,m);const R=function gE(s){return s.replace(c0," ")}(h).split(pE);for(let L=0;L<R.length;L++){let $=R[L];if(0==(1&L)){const Y=kp($);for(let pe=0;pe<Y.length;pe++){let Pe=Y[pe];if(0==(1&pe)){const Ge=Pe;""!==Ge&&h0(s,v,N[0],D,E,l,Ge)}else{const Ge=Pe;if("object"!=typeof Ge)throw new Error(`Unable to parse ICU expression in "${h}" message.`);m0(s,l,E,o,Ge,d0(s,v,N[0],l,D,"",!0).index)}}}else{const Y=47===$.charCodeAt(0),Pe=($.charCodeAt(Y?1:0),20+Number.parseInt($.substring(Y?2:1)));if(Y)N.shift(),ri(no(),!1);else{const Ge=wl(s,N[0],Pe);N.unshift([]),ri(Ge,!0)}}}s.data[c]={create:D,update:E}}(c,null===D?0:D.index,h,m,v,l);const E=c.data[m],R=ze(c,D===h[6]?null:D,h);(function QT(s,o,l,c){const h=s[11];for(let m=0;m<o.length;m++){const v=o[m++],D=o[m],E=(v&$n.COMMENT)===$n.COMMENT,N=(v&$n.APPEND_EAGERLY)===$n.APPEND_EAGERLY,R=v>>>$n.SHIFT;let L=s[R];null===L&&(L=s[R]=E?h.createComment(D):wa(h,D)),N&&null!==l&&Ke(h,l,L,c,!1)}})(h,E.create,R,D&&8&D.type?h[D.index]:null),ca(!0)}function f_(s,o,l){d_(s,o,l),function h_(){ca(!1)}()}function p_(s){return function u0(s){s&&(Dl|=1<<Math.min(Op,31)),Op++}(ci(Se(),Rs(),s)),p_}function bE(s){!function YT(s,o,l){if(Op>0){const c=s.data[l];Yr(s,o,Array.isArray(c)?c:c.update,function Gi(){return mt.lFrame.bindingIndex}()-Op-1,Dl)}Dl=0,Op=0}(Ot(),Se(),s+20)}function Lp(s,o,l,c,h){if(s=X(s),Array.isArray(s))for(let m=0;m<s.length;m++)Lp(s[m],o,l,c,h);else{const m=Ot(),v=Se();let D=Hc(s)?s:X(s.provide),E=Jw(s);const N=dn(),R=1048575&N.providerIndexes,L=N.directiveStart,$=N.providerIndexes>>20;if(Hc(s)||!s.multi){const Y=new Tn(E,h,Pm),pe=Vp(D,o,h?R:R+$,L);-1===pe?(xo(us(N,v),m,D),g_(m,s,o.length),o.push(D),N.directiveStart++,N.directiveEnd++,h&&(N.providerIndexes+=1048576),l.push(Y),v.push(Y)):(l[pe]=Y,v[pe]=Y)}else{const Y=Vp(D,o,R+$,L),pe=Vp(D,o,R,R+$),Pe=Y>=0&&l[Y],Ge=pe>=0&&l[pe];if(h&&!Ge||!h&&!Pe){xo(us(N,v),m,D);const Be=function pi(s,o,l,c,h){const m=new Tn(s,l,Pm);return m.multi=[],m.index=o,m.componentProviders=0,EE(m,h,c&&!l),m}(h?D0:w0,l.length,h,c,E);!h&&Ge&&(l[pe].providerFactory=Be),g_(m,s,o.length,0),o.push(D),N.directiveStart++,N.directiveEnd++,h&&(N.providerIndexes+=1048576),l.push(Be),v.push(Be)}else g_(m,s,Y>-1?Y:pe,EE(l[h?pe:Y],E,!h&&c));!h&&c&&Ge&&l[pe].componentProviders++}}}function g_(s,o,l,c){const h=Hc(o),m=function nD(s){return!!s.useClass}(o);if(h||m){const E=(m?X(o.useClass):o).prototype.ngOnDestroy;if(E){const N=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=N.indexOf(l);-1===R?N.push(l,[c,E]):N[R+1].push(c,E)}else N.push(l,E)}}}function EE(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Vp(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function w0(s,o,l,c){return Er(this.multi,[])}function D0(s,o,l,c){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,D=hn(l,l[1],this.providerFactory.index,c);m=D.slice(0,v),Er(h,m);for(let E=v;E<D.length;E++)m.push(D[E])}else m=[],Er(h,m);return m}function Er(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function Bp(s,o=[]){return l=>{l.providersResolver=(c,h)=>function DE(s,o,l){const c=Ot();if(c.firstCreatePass){const h=os(s);Lp(l,c.data,c.blueprint,h,!0),Lp(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class CE{}class dI{resolveComponentFactory(o){throw function cI(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Yc=(()=>{class s{}return s.NULL=new dI,s})();function T0(){return Sh(dn(),Se())}function Sh(s,o){return new Qc(Un(s,o))}let Qc=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=T0,s})();function TE(s){return s instanceof Qc?s.nativeElement:s}class Up{}let I0=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function IE(){const s=Se(),l=Gr(dn().index,s);return function S0(s){return s[11]}(Vi(l)?l:s)}(),s})(),hI=(()=>{class s{}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:()=>null}),s})();class Ah{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const A0=new Ah("13.1.3"),m_={};function jp(s,o,l,c,h=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&c.push(cn(m)),Bi(m))for(let D=10;D<m.length;D++){const E=m[D],N=E[1].firstChild;null!==N&&jp(E[1],E,N,c)}const v=l.type;if(8&v)jp(s,o,l.child,c);else if(32&v){const D=Yf(l,o);let E;for(;E=D();)c.push(E)}else if(16&v){const D=tm(o,l);if(Array.isArray(D))c.push(...D);else{const E=gu(o[16]);jp(E[1],E,D,c,!0)}}l=h?l.projectionNext:l.next}return c}class Nu{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return jp(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Bi(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(S(o,c),al(l,c))}this._attachedToViewContainer=!1}M(this._lView[1],this._lView)}onDestroy(o){sp(this._lView[1],this._lView,null,o)}markForCheck(){jc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){_v(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Im(s,o,l){Ka(!0);try{_v(s,o,l)}finally{Ka(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Oc(s,o){Jf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class fI extends Nu{constructor(o){super(o),this._view=o}detectChanges(){Tm(this._view)}checkNoChanges(){!function G1(s){Ka(!0);try{Tm(s)}finally{Ka(!1)}}(this._view)}get context(){return null}}class SE extends Yc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=ar(o);return new __(l,this.ngModule)}}function Jc(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}const gI=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>eh});class __ extends CE{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function w1(s){return s.map(b1).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Jc(this.componentDef.inputs)}get outputs(){return Jc(this.componentDef.outputs)}create(o,l,c,h){const m=(h=h||this.ngModule)?function Xc(s,o){return{get:(l,c,h)=>{const m=s.get(l,m_,h);return m!==m_||c===m_?m:o.get(l,c,h)}}}(o,h.injector):o,v=m.get(Up,eo),D=m.get(hI,null),E=v.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",R=c?function vm(s,o,l){if(Jt(s))return s.selectRootElement(o,l===At.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(E,c,this.componentDef.encapsulation):ho(v.createRenderer(null,this.componentDef),N,function pI(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(N)),L=this.componentDef.onPush?576:528,$=function lD(s,o){return{components:[],scheduler:s||eh,clean:H1,playerHandler:o||null,flags:0}}(),Y=_m(0,null,null,1,0,null,null,null,null,null),pe=Bc(null,Y,$,L,null,null,v,E,D,m);let Pe,Ge;ha(pe);try{const Be=function oD(s,o,l,c,h,m){const v=l[1];l[20]=s;const E=wu(v,20,2,"#host",null),N=E.mergedAttrs=o.hostAttrs;null!==N&&(hp(E,N,!0),null!==s&&(sc(h,s,N),null!==E.classes&&Ky(h,s,E.classes),null!==E.styles&&Ew(h,s,E.styles)));const R=c.createRenderer(s,o),L=Bc(l,kw(o),null,o.onPush?64:16,l[20],E,c,R,m||null,null);return v.firstCreatePass&&(xo(us(E,l),v,o.type),Gw(v,E),sh(E,l.length,1)),cp(l,L),l[20]=L}(R,this.componentDef,pe,v,E);if(R)if(c)sc(E,R,["ng-version",A0.full]);else{const{attrs:se,classes:ft}=function D1(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++c]):8===h&&l.push(m);else{if(!Vs(h))break;h=m}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);se&&sc(E,R,se),ft&&ft.length>0&&Ky(E,R,ft.join(" "))}if(Ge=sa(Y,20),void 0!==l){const se=Ge.projection=[];for(let ft=0;ft<this.ngContentSelectors.length;ft++){const Vt=l[ft];se.push(null!=Vt?Array.from(Vt):null)}}Pe=function aD(s,o,l,c,h){const m=l[1],v=function P1(s,o,l){const c=dn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),oh(s,c,o,Ta(s,o,1,null),l));const h=hn(o,s,c.directiveStart,c);Gn(h,o);const m=Un(c,o);return m&&Gn(m,o),h}(m,l,o);if(c.components.push(v),s[8]=v,h&&h.forEach(E=>E(v,o)),o.contentQueries){const E=dn();o.contentQueries(1,v,E.directiveStart)}const D=dn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(jn(D.index),ap(l[1],D,0,D.directiveStart,D.directiveEnd,o),$o(o,v)),v}(Be,this.componentDef,pe,$,[uD]),ip(Y,pe,null)}finally{Hl()}return new Gp(this.componentType,Pe,Sh(Ge,pe),pe,Ge)}}class Gp extends class E0{}{constructor(o,l,c,h,m){super(),this.location=c,this._rootLView=h,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new fI(h),this.componentType=o}get injector(){return new ko(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Cr{}class N0{}const Ra=new Map;class b_ extends Cr{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new SE(this);const c=lr(o);this._bootstrapComponents=zi(c.bootstrap),this._r3Injector=Ev(o,l,[{provide:Cr,useValue:this},{provide:Yc,useValue:this.componentFactoryResolver}],le(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=Zi.THROW_IF_NOT_FOUND,c=Xe.Default){return o===Zi||o===Cr||o===vv?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Hp extends N0{constructor(o){super(),this.moduleType=o,null!==lr(o)&&function O0(s){const o=new Set;!function l(c){const h=lr(c,!0),m=h.id;null!==m&&(function R0(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${le(o)} vs ${le(o.name)}`)}(m,Ra.get(m),c),Ra.set(m,c));const v=zi(h.imports);for(const D of v)o.has(D)||(o.add(D),l(D))}(s)}(o)}create(o){return new b_(this.moduleType,o)}}function $p(s,o,l,c){return function RE(s,o,l,c,h,m){const v=o+l;return ci(s,v,h)?Sa(s,v+1,m?c.call(m,h):c(h)):Mh(s,v+1)}(Se(),nr(),s,o,l,c)}function Nh(s,o,l,c,h){return function Rh(s,o,l,c,h,m,v){const D=o+l;return Wc(s,D,h,m)?Sa(s,D+2,v?c.call(v,h,m):c(h,m)):Mh(s,D+2)}(Se(),nr(),s,o,l,c,h)}function P0(s,o,l,c,h,m){return function V0(s,o,l,c,h,m,v,D){const E=o+l;return function _p(s,o,l,c,h){const m=Wc(s,o,l,c);return ci(s,o+2,h)||m}(s,E,h,m,v)?Sa(s,E+3,D?c.call(D,h,m,v):c(h,m,v)):Mh(s,E+3)}(Se(),nr(),s,o,l,c,h,m)}function Mh(s,o){const l=s[o];return l===Tt?void 0:l}function Cl(s){return o=>{setTimeout(s,void 0,o)}}const Qr=class bI extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var h,m,v;let D=o,E=l||(()=>null),N=c;if(o&&"object"==typeof o){const L=o;D=null===(h=L.next)||void 0===h?void 0:h.bind(L),E=null===(m=L.error)||void 0===m?void 0:m.bind(L),N=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(E=Cl(E),D&&(D=Cl(D)),N&&(N=Cl(N)));const R=super.subscribe({next:D,error:E,complete:N});return o instanceof Q.w0&&o.add(R),R}};function D_(){return this._results[ch()]()}class Ph{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=ch(),c=Ph.prototype;c[l]||(c[l]=D_)}get changes(){return this._changes||(this._changes=new Qr)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=si(o);(this._changesDetected=!function dc(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],m=o[c];if(l&&(h=l(h),m=l(m)),m!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Mu=(()=>{class s{}return s.__NG_ELEMENT_ID__=E_,s})();const OE=Mu,Fn=class extends OE{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=Bc(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(c[19]=m.createEmbeddedView(l)),ip(l,c,o),new Nu(c)}};function E_(){return C_(dn(),Se())}function C_(s,o){return 4&s.type?new Fn(o,s,Sh(s,o)):null}let T_=(()=>{class s{}return s.__NG_ELEMENT_ID__=qp,s})();function qp(){return kE(dn(),Se())}const zp=T_,xE=class extends zp{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return Sh(this._hostTNode,this._hostLView)}get injector(){return new ko(this._hostTNode,this._hostLView)}get parentInjector(){const o=$i(this._hostTNode,this._hostLView);if(In(o)){const l=it(o,this._hostLView),c=at(o);return new ko(l[1].data[c+8],l)}return new ko(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=G0(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const h=o.createEmbeddedView(l||{});return this.insert(h,c),h}createComponent(o,l,c,h,m){const v=o&&!function hs(s){return"function"==typeof s}(o);let D;if(v)D=l;else{const L=l||{};D=L.index,c=L.injector,h=L.projectableNodes,m=L.ngModuleRef}const E=v?o:new __(ar(o)),N=c||this.parentInjector;if(!m&&null==E.ngModule&&N){const L=N.get(Cr,null);L&&(m=L)}const R=E.create(N,h,void 0,m);return this.insert(R.hostView,D),R}insert(o,l){const c=o._lView,h=c[1];if(function Ju(s){return Bi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=c[3],$=new xE(L,L[6],L[3]);$.detach($.indexOf(o))}}const m=this._adjustIndex(l),v=this._lContainer;!function f(s,o,l,c){const h=10+c,m=l.length;c>0&&(l[h-1][4]=o),c<m-10?(o[4]=l[h],hc(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function g(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const D=o[19];null!==D&&D.insertView(s),o[2]|=128}(h,c,v,m);const D=Fc(m,v),E=c[11],N=Ki(E,v[7]);return null!==N&&function Wy(s,o,l,c,h,m){c[0]=h,c[6]=o,Jf(s,c,l,1,h,m)}(h,v[6],E,c,N,D),o.attachToViewContainerRef(),hc(H0(v),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=G0(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=S(this._lContainer,l);c&&(al(H0(this._lContainer),l),M(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=S(this._lContainer,l);return c&&null!=al(H0(this._lContainer),l)?new Nu(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function G0(s){return s[8]}function H0(s){return s[8]||(s[8]=[])}function kE(s,o){let l;const c=o[s.index];if(Bi(c))l=c;else{let h;if(8&s.type)h=cn(c);else{const m=o[11];h=m.createComment("");const v=Un(s,o);Ke(m,Ki(m,v),h,function nh(s,o){return Jt(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=l=Bs(c,o,h,s),cp(o,l)}return new xE(l,s,o)}class Oa{constructor(o){this.queryList=o,this.matches=null}clone(){return new Oa(this.queryList)}setDirty(){this.queryList.setDirty()}}class S_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let m=0;m<c;m++){const v=l.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new S_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==Kp(o,l).matches&&this.queries[l].setDirty()}}class $0{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class A_{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,m=this.getByIndex(c).embeddedTView(o,h);m&&(m.indexInDeclarationView=c,null!==l?l.push(m):l=[m])}return null!==l?new A_(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ru{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Ru(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const m=c[h];this.matchTNodeWithReadOption(o,l,EI(l,m)),this.matchTNodeWithReadOption(o,l,k(l,o,m,!1,!1))}else c===Mu?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,k(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Qc||h===T_||h===Mu&&4&l.type)this.addMatch(l.index,-2);else{const m=k(l,o,h,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function EI(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function PE(s,o,l,c){return-1===l?function CI(s,o){return 11&s.type?Sh(s,o):4&s.type?C_(s,o):null}(o,s):-2===l?function TI(s,o,l){return l===Qc?Sh(o,s):l===Mu?C_(o,s):l===T_?kE(o,s):void 0}(s,o,c):hn(s,s[1],l,o)}function W0(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const m=s.data,v=l.matches,D=[];for(let E=0;E<v.length;E+=2){const N=v[E];D.push(N<0?null:PE(o,m[N],v[E+1],l.metadata.read))}h.matches=D}return h.matches}function N_(s,o,l,c){const h=s.queries.getByIndex(l),m=h.matches;if(null!==m){const v=W0(s,o,h,l);for(let D=0;D<m.length;D+=2){const E=m[D];if(E>0)c.push(v[D/2]);else{const N=m[D+1],R=o[-E];for(let L=10;L<R.length;L++){const $=R[L];$[17]===$[3]&&N_($[1],$,N,c)}if(null!==R[9]){const L=R[9];for(let $=0;$<L.length;$++){const Y=L[$];N_(Y[1],Y,N,c)}}}}}return c}function M_(s){const o=Se(),l=Ot(),c=Qa();Ja(c+1);const h=Kp(l,c);if(s.dirty&&tr(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?N_(l,o,c,[]):W0(l,o,h,c);s.reset(m,TE),s.notifyOnChanges()}return!0}return!1}function R_(s,o,l){const c=Ot();c.firstCreatePass&&(LE(c,new $0(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),FE(c,Se(),o)}function q0(s,o,l,c){const h=Ot();if(h.firstCreatePass){const m=dn();LE(h,new $0(o,l,c),m.index),function II(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}FE(h,Se(),l)}function z0(){return function K0(s,o){return s[19].queries[o].queryList}(Se(),Qa())}function FE(s,o,l){const c=new Ph(4==(4&l));sp(s,o,c,c.destroy),null===o[19]&&(o[19]=new S_),o[19].queries.push(new Oa(c))}function LE(s,o,l){null===s.queries&&(s.queries=new A_),s.queries.track(new Ru(o,l))}function Kp(s,o){return s.queries.getByIndex(o)}function Fh(s,o){return C_(s,o)}function Xp(...s){}const Bh=new on("Application Initializer");let Uh=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Xp,this.reject=Xp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(jv(m))l.push(m);else if(Si(m)){const v=new Promise((D,E)=>{m.subscribe({complete:D,error:E})});l.push(v)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(K(Bh,8))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();const ab=new on("AppId"),jh={provide:ab,useFactory:function gi(){return`${xa()}${xa()}${xa()}`},deps:[]};function xa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const U_=new on("Platform Initializer"),zE=new on("Platform ID"),Le=new on("appBootstrapListener");let Gh=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();const Hh=new on("LocaleId"),lt=new on("DefaultCurrencyCode");class de{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let Me=(()=>{class s{compileModuleSync(l){return new Hp(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),m=zi(lr(l).declarations).reduce((v,D)=>{const E=ar(D);return E&&v.push(new __(E)),v},[]);return new de(c,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();const PI=(()=>Promise.resolve(0))();function lb(s){"undefined"==typeof Zone?PI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Gs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qr(!1),this.onMicrotaskEmpty=new Qr(!1),this.onStable=new Qr(!1),this.onError=new Qr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function FI(){let s=gt.requestAnimationFrame,o=gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function FM(s){const o=()=>{!function VI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(gt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Ji(s),s.isCheckStableRunning=!0,j_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Ji(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,m,v,D)=>{try{return KE(s),l.invokeTask(h,m,v,D)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),ub(s)}},onInvoke:(l,c,h,m,v,D,E)=>{try{return KE(s),l.invoke(h,m,v,D,E)}finally{s.shouldCoalesceRunChangeDetection&&o(),ub(s)}},onHasTask:(l,c,h,m)=>{l.hasTask(h,m),c===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Ji(s),j_(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,c,h,m)=>(l.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Gs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,LI,Xp,Xp);try{return m.runTask(v,l,c)}finally{m.cancelTask(v)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const LI={};function j_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Ji(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function KE(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function ub(s){s._nesting--,j_(s)}class Gt{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qr,this.onMicrotaskEmpty=new Qr,this.onStable=new Qr,this.onError=new Qr}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}let rd=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gs.assertNotInAngularZone(),lb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lb(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(K(Gs))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})(),cb=(()=>{class s{constructor(){this._applications=new Map,G_.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return G_.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();class ei{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function Mt(s){G_=s}let mi,G_=new ei;const YE=new on("AllowMultipleToken");class _i{constructor(o,l){this.name=o,this.token=l}}function QE(s,o,l=[]){const c=`Platform: ${o}`,h=new on(c);return(m=[])=>{let v=Tl();if(!v||v.injector.get(YE,!1))if(s)s(l.concat(m).concat({provide:h,useValue:!0}));else{const D=l.concat(m).concat({provide:h,useValue:!0},{provide:lh,useValue:"platform"});!function $h(s){if(mi&&!mi.destroyed&&!mi.injector.get(YE,!1))throw new Oe(400,"");mi=s.get(gr);const o=s.get(U_,null);o&&o.forEach(l=>l())}(Zi.create({providers:D,name:c}))}return function Pr(s){const o=Tl();if(!o)throw new Oe(401,"");return o}()}}function Tl(){return mi&&!mi.destroyed?mi:null}let gr=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const D=function Wh(s,o){let l;return l="noop"===s?new Gt:("zone.js"===s?void 0:s)||new Gs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),E=[{provide:Gs,useValue:D}];return D.run(()=>{const N=Zi.create({providers:E,parent:this.injector,name:l.moduleType.name}),R=l.create(N),L=R.injector.get(Go,null);if(!L)throw new Oe(402,"");return D.runOutsideAngular(()=>{const $=D.onError.subscribe({next:Y=>{L.handleError(Y)}});R.onDestroy(()=>{Sl(this._modules,R),$.unsubscribe()})}),function db(s,o,l){try{const c=l();return jv(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(L,D,()=>{const $=R.injector.get(Uh);return $.runInitializers(),$.donePromise.then(()=>(function oE(s){(function ot(s,o){null==s&&rt(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(sE=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Hh,Np)||Np),this._moduleDoBootstrap(R),R))})})}bootstrapModule(l,c=[]){const h=hb({},c);return function ZE(s,o,l){const c=new Hp(l);return Promise.resolve(c)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(l){const c=l.injector.get(Il);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Oe(403,"");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(K(Zi))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();function hb(s,o){return Array.isArray(o)?o.reduce(hb,s):Object.assign(Object.assign({},s),o)}let Il=(()=>{class s{constructor(l,c,h,m,v){this._zone=l,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const D=new F.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),E=new F.y(N=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Gs.assertNotInAngularZone(),lb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{Gs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{R.unsubscribe(),L.unsubscribe()}});this.isStable=(0,ae.T)(D,E.pipe((0,re.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new Oe(405,"");let h;h=l instanceof CE?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const m=function an(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Cr),D=h.create(Zi.NULL,[],c||h.selector,m),E=D.location.nativeElement,N=D.injector.get(rd,null),R=N&&D.injector.get(cb);return N&&R&&R.registerApplication(E,N),D.onDestroy(()=>{this.detachView(D.hostView),Sl(this.components,D),R&&R.unregisterApplication(E)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;Sl(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Le,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(K(Gs),K(Zi),K(Go),K(Yc),K(Uh))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();function Sl(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let st=!0,Fu=!1;function ka(){return Fu=!0,st}function tg(){if(Fu)throw new Error("Cannot enable prod mode after platform setup.");st=!1}let fb=(()=>{class s{}return s.__NG_ELEMENT_ID__=W_,s})();function W_(s){return function pb(s,o,l){if(Bn(s)&&!l){const c=Gr(s.index,o);return new Nu(c,c)}return 47&s.type?new Nu(o[16],o):null}(dn(),Se(),16==(16&s))}class id{constructor(){}supports(o){return mp(o)}create(o){return new rC(o)}}const $I=(s,o)=>o;class rC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||$I}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,m=null;for(;l||c;){const v=!c||l&&l.currentIndex<sd(c,h,m)?l:c,D=sd(v,h,m),E=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{m||(m=[]);const N=D-h,R=E-h;if(N!=R){for(let $=0;$<N;$++){const Y=$<m.length?m[$]:m[$]=0,pe=Y+$;R<=pe&&pe<N&&(m[$]=Y+1)}m[v.previousIndex]=R-N}}D!==E&&o(v,D,E)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!mp(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let D=0;D<this.length;D++)m=o[D],v=this._trackByFn(D,m),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,m,v,D)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,v,D),c=!0),l=l._next}else h=0,function oT(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[ch()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,D=>{v=this._trackByFn(h,D),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,D,v,h)),Object.is(l.item,D)||this._addIdentityChange(l,D)):(l=this._mismatch(l,D,v,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,h)):o=this._addAfter(new iC(l,c),m,h),o}_verifyReinsertion(o,l,c,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new bb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class iC{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Al{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class bb{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new Al,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sd(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class ig{constructor(){}supports(o){return o instanceof Map||Us(o)}create(){return new K_}}class K_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Us(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const c=new wb(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class wb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Z_(){return new Kh([new id])}let Kh=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Z_()),deps:[[s,new fs,new vn]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new Oe(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:Z_}),s})();function Hs(){return new og([new ig])}let og=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Hs()),deps:[[s,new fs,new vn]]}}find(l){const c=this.factories.find(m=>m.supports(l));if(c)return c;throw new Oe(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:Hs}),s})();const ag=[new ig],Db=new Kh([new id]),lg=new og(ag),qI=QE(null,"core",[{provide:zE,useValue:"unknown"},{provide:gr,deps:[Zi]},{provide:cb,deps:[]},{provide:Gh,deps:[]}]),zI=[{provide:Il,useClass:Il,deps:[Gs,Zi,Go,Yc,Uh]},{provide:gI,deps:[Gs],useFactory:function KI(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(l){o.push(l)}}},{provide:Uh,useClass:Uh,deps:[[new vn,Bh]]},{provide:Me,useClass:Me,deps:[]},jh,{provide:Kh,useFactory:function oC(){return Db},deps:[]},{provide:og,useFactory:function aC(){return lg},deps:[]},{provide:Hh,useFactory:function lC(s){return s||function Y_(){return"undefined"!=typeof $localize&&$localize.locale||Np}()},deps:[[new ir(Hh),new vn,new fs]]},{provide:lt,useValue:"USD"}];let uC=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(K(Il))},s.\u0275mod=Qs({type:s}),s.\u0275inj=ns({providers:zI}),s})()},3942:(nt,Ee,P)=>{"use strict";P.d(Ee,{Z:()=>Oe});var d=P(2090),Q=P(4859),F=P(9681),ae=P(1877);class re{constructor(Z,ne){this._delegate=Z,this.firebase=ne,(0,F._addComponent)(Z,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=Z.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this._delegate.automaticDataCollectionEnabled=Z}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Z=>{this._delegate.checkDestroyed(),Z()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Z,ne=F._DEFAULT_ENTRY_NAME){var _e;this._delegate.checkDestroyed();const Te=this._delegate.container.getProvider(Z);return!Te.isInitialized()&&"EXPLICIT"===(null===(_e=Te.getComponent())||void 0===_e?void 0:_e.instantiationMode)&&Te.initialize(),Te.getImmediate({identifier:ne})}_removeServiceInstance(Z,ne=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Z).clearInstance(ne)}_addComponent(Z){(0,F._addComponent)(this._delegate,Z)}_addOrOverwriteComponent(Z){(0,F._addOrOverwriteComponent)(this._delegate,Z)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function ue(){const Ve=function le(Ve){const Z={},ne={__esModule:!0,initializeApp:function ye(Ze,pt={}){const J=F.initializeApp(Ze,pt);if((0,d.r3)(Z,J.name))return Z[J.name];const me=new Ve(J,ne);return Z[J.name]=me,me},app:Te,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Ze){const pt=Ze.name,J=pt.replace("-compat","");if(F._registerComponent(Ze)&&"PUBLIC"===Ze.type){const me=(be=Te())=>{if("function"!=typeof be[J])throw ie.create("invalid-app-argument",{appName:pt});return be[J]()};void 0!==Ze.serviceProps&&(0,d.ZB)(me,Ze.serviceProps),ne[J]=me,Ve.prototype[J]=function(...be){return this._getService.bind(this,pt).apply(this,Ze.multipleInstances?be:[])}}return"PUBLIC"===Ze.type?ne[J]:null},removeApp:function _e(Ze){delete Z[Ze]},useAsService:function Je(Ze,pt){return"serverAuth"===pt?null:pt},modularAPIs:F}};function Te(Ze){if(!(0,d.r3)(Z,Ze=Ze||F._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:Ze});return Z[Ze]}return ne.default=ne,Object.defineProperty(ne,"apps",{get:function je(){return Object.keys(Z).map(Ze=>Z[Ze])}}),Te.App=Ve,ne}(re);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function Z(ne){(0,d.ZB)(Ve,ne)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Ve}(),G=new ae.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=H;!function Ce(Ve){(0,F.registerVersion)("@firebase/app-compat","0.1.15",Ve)}()},9681:(nt,Ee,P)=>{"use strict";P.r(Ee),P.d(Ee,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Do,_DEFAULT_ENTRY_NAME:()=>Kn,_addComponent:()=>ln,_addOrOverwriteComponent:()=>Sr,_apps:()=>rt,_clearComponents:()=>Rn,_components:()=>Fr,_getProvider:()=>ki,_registerComponent:()=>Qt,_removeServiceInstance:()=>ns,deleteApp:()=>_r,getApp:()=>Is,getApps:()=>Ae,initializeApp:()=>ti,onLog:()=>qt,registerVersion:()=>wi,setLogLevel:()=>Zn});var d=P(5861),Q=P(4859),F=P(1877),ae=P(2090);class re{constructor(tt){this.container=tt}getPlatformInfoString(){return this.container.getProviders().map(St=>{if(function ge(ht){const tt=ht.getComponent();return"VERSION"===(null==tt?void 0:tt.type)}(St)){const fn=St.getImmediate();return`${fn.library}/${fn.version}`}return null}).filter(St=>St).join(" ")}}const ie="@firebase/app",ue=new F.Yd("@firebase/app"),Kn="[DEFAULT]",ot={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rt=new Map,Fr=new Map;function ln(ht,tt){try{ht.container.addComponent(tt)}catch(St){ue.debug(`Component ${tt.name} failed to register with FirebaseApp ${ht.name}`,St)}}function Sr(ht,tt){ht.container.addOrOverwriteComponent(tt)}function Qt(ht){const tt=ht.name;if(Fr.has(tt))return ue.debug(`There were multiple attempts to register component ${tt}.`),!1;Fr.set(tt,ht);for(const St of rt.values())ln(St,ht);return!0}function ki(ht,tt){return ht.container.getProvider(tt)}function ns(ht,tt,St=Kn){ki(ht,tt).clearInstance(St)}function Rn(){Fr.clear()}const jt=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Dn{constructor(tt,St,fn){this._isDeleted=!1,this._options=Object.assign({},tt),this._config=Object.assign({},St),this._name=St.name,this._automaticDataCollectionEnabled=St.automaticDataCollectionEnabled,this._container=fn,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this.checkDestroyed(),this._automaticDataCollectionEnabled=tt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(tt){this._isDeleted=tt}checkDestroyed(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}}const Do="9.6.4";function ti(ht,tt={}){"object"!=typeof tt&&(tt={name:tt});const St=Object.assign({name:Kn,automaticDataCollectionEnabled:!1},tt),fn=St.name;if("string"!=typeof fn||!fn)throw jt.create("bad-app-name",{appName:String(fn)});const Lr=rt.get(fn);if(Lr){if((0,ae.vZ)(ht,Lr.options)&&(0,ae.vZ)(St,Lr.config))return Lr;throw jt.create("duplicate-app",{appName:fn})}const At=new Q.H0(fn);for(const ut of Fr.values())At.addComponent(ut);const et=new Dn(ht,St,At);return rt.set(fn,et),et}function Is(ht=Kn){const tt=rt.get(ht);if(!tt)throw jt.create("no-app",{appName:ht});return tt}function Ae(){return Array.from(rt.values())}function _r(ht){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,d.Z)(function*(ht){const tt=ht.name;rt.has(tt)&&(rt.delete(tt),yield Promise.all(ht.container.getProviders().map(St=>St.delete())),ht.isDeleted=!0)})).apply(this,arguments)}function wi(ht,tt,St){var fn;let Lr=null!==(fn=ot[ht])&&void 0!==fn?fn:ht;St&&(Lr+=`-${St}`);const At=Lr.match(/\s|\//),et=tt.match(/\s|\//);if(At||et){const ut=[`Unable to register library "${Lr}" with version "${tt}":`];return At&&ut.push(`library name "${Lr}" contains illegal characters (whitespace or "/")`),At&&et&&ut.push("and"),et&&ut.push(`version name "${tt}" contains illegal characters (whitespace or "/")`),void ue.warn(ut.join(" "))}Qt(new Q.wA(`${Lr}-version`,()=>({library:Lr,version:tt}),"VERSION"))}function qt(ht,tt){if(null!==ht&&"function"!=typeof ht)throw jt.create("invalid-log-argument");(0,F.Am)(ht,tt)}function Zn(ht){(0,F.Ub)(ht)}!function Ys(ht){Qt(new Q.wA("platform-logger",tt=>new re(tt),"PRIVATE")),wi(ie,"0.7.14",ht),wi(ie,"0.7.14","esm2017"),wi("fire-js","")}("")},4859:(nt,Ee,P)=>{"use strict";P.d(Ee,{wA:()=>F,H0:()=>le,zt:()=>re});var d=P(5861),Q=P(2090);class F{constructor(H,G,X){this.name=H,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ae="[DEFAULT]";class re{constructor(H,G){this.name=H,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const G=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(G)){const X=new Q.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:G});Ue&&X.resolve(Ue)}catch(Ue){}}return this.instancesDeferred.get(G).promise}getImmediate(H){var G;const X=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),Ue=null!==(G=null==H?void 0:H.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ce){if(Ue)return null;throw Ce}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ie(ue){return"EAGER"===ue.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(G){}for(const[G,X]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(G);try{const Ce=this.getOrInitializeService({instanceIdentifier:Ue});X.resolve(Ce)}catch(Ce){}}}}clearInstance(H=ae){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,d.Z)(function*(){const G=Array.from(H.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ae){return this.instances.has(H)}getOptions(H=ae){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:G={}}=H,X=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[Ce,Oe]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ce)&&Oe.resolve(Ue);return Ue}onInit(H,G){var X;const Ue=this.normalizeInstanceIdentifier(G),Ce=null!==(X=this.onInitCallbacks.get(Ue))&&void 0!==X?X:new Set;Ce.add(H),this.onInitCallbacks.set(Ue,Ce);const Oe=this.instances.get(Ue);return Oe&&H(Oe,Ue),()=>{Ce.delete(H)}}invokeOnInitCallbacks(H,G){const X=this.onInitCallbacks.get(G);if(X)for(const Ue of X)try{Ue(H,G)}catch(Ce){}}getOrInitializeService({instanceIdentifier:H,options:G={}}){let X=this.instances.get(H);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=H,ue===ae?void 0:ue),options:G}),this.instances.set(H,X),this.instancesOptions.set(H,G),this.invokeOnInitCallbacks(X,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,X)}catch(Ue){}var ue;return X||null}normalizeInstanceIdentifier(H=ae){return this.component?this.component.multipleInstances?H:ae:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const G=this.getProvider(H.name);if(G.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);G.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const G=new re(H,this);return this.providers.set(H,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,Ee,P)=>{"use strict";P.d(Ee,{in:()=>Q,Yd:()=>ie,Ub:()=>le,Am:()=>ue});const d=[];var Q=(()=>{return(H=Q||(Q={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",Q;var H})();const F={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ae=Q.INFO,re={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ge=(H,G,...X)=>{if(G<H.logLevel)return;const Ue=(new Date).toISOString(),Ce=re[G];if(!Ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ce](`[${Ue}]  ${H.name}:`,...X)};class ie{constructor(G){this.name=G,this._logLevel=ae,this._logHandler=ge,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in Q))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?F[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...G),this._logHandler(this,Q.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...G),this._logHandler(this,Q.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...G),this._logHandler(this,Q.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...G),this._logHandler(this,Q.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...G),this._logHandler(this,Q.ERROR,...G)}}function le(H){d.forEach(G=>{G.setLogLevel(H)})}function ue(H,G){for(const X of d){let Ue=null;G&&G.level&&(Ue=F[G.level]),X.userLogHandler=null===H?null:(Ce,Oe,...Ve)=>{const Z=Ve.map(ne=>{if(null==ne)return null;if("string"==typeof ne)return ne;if("number"==typeof ne||"boolean"==typeof ne)return ne.toString();if(ne instanceof Error)return ne.message;try{return JSON.stringify(ne)}catch(_e){return null}}).filter(ne=>ne).join(" ");Oe>=(null!=Ue?Ue:Ce.logLevel)&&H({level:Q[Oe].toLowerCase(),message:Z,args:Ve,type:Ce.name})}}}},5861:(nt,Ee,P)=>{"use strict";function d(F,ae,re,ge,ie,le,ue){try{var H=F[le](ue),G=H.value}catch(X){return void re(X)}H.done?ae(G):Promise.resolve(G).then(ge,ie)}function Q(F){return function(){var ae=this,re=arguments;return new Promise(function(ge,ie){var le=F.apply(ae,re);function ue(G){d(le,ge,ie,ue,H,"next",G)}function H(G){d(le,ge,ie,ue,H,"throw",G)}ue(void 0)})}}P.d(Ee,{Z:()=>Q})}},nt=>{nt(nt.s=1800)}]);